(function(){if(typeof sigma==="undefined"){throw new Error("sigma is not declared")}sigma.utils.pkg("sigma.plugins");var b={stage:{show:"rightClickStage",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:false,delay:0,hideDelay:0,template:"",renderer:null},node:{show:"clickNode",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:false,delay:0,hideDelay:0,template:"",renderer:null},edge:{show:"clickEdge",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:false,delay:0,hideDelay:0,template:"",renderer:null},doubleClickDelay:800};function c(r,i,t){var q=this,f=sigma.utils.extend(t.stage,b.stage),m=sigma.utils.extend(t.node,b.node),d=sigma.utils.extend(t.edge,b.edge),n,h,p,l=false,j=false;sigma.classes.dispatcher.extend(this);r.bind("kill",function(){sigma.plugins.killTooltips(r)});function e(s){s.preventDefault()}this.open=function(s,F,D,B,u){g();n=document.createElement("div");if(F.renderer){var z=Object.create(null),E,A,v;for(v in s){z[v]=s[v]}E=F.renderer.call(r.graph,z,F.template);A=typeof E;if(A==="undefined"){return}if(A==="string"){n.innerHTML=E}else{n.appendChild(E)}}else{n.innerHTML=F.template}var w=window.getComputedStyle(i.container).position;if(w!=="static"){n.style.position="absolute";var C=i.container.getBoundingClientRect();D=~~(D-C.left);B=~~(B-C.top)}n.className=F.cssClass;if(F.position!=="css"){if(w==="static"){n.style.position="absolute"}n.style.left=D+"px";n.style.top=B+"px"}n.addEventListener("mouseenter",function(){l=true},false);n.addEventListener("mouseleave",function(){l=false},false);setTimeout(function(){if(!n){return}i.container.appendChild(n);var H=document.body.getBoundingClientRect(),I=n.getBoundingClientRect(),G=I.top-H.top,x=H.bottom-I.bottom,J=I.left-H.left,y=H.right-I.right;if(F.position==="top"){n.className=F.cssClass+" top";n.style.left=D-(I.width/2)+"px";n.style.top=B-I.height+"px"}else{if(F.position==="bottom"){n.className=F.cssClass+" bottom";n.style.left=D-(I.width/2)+"px";n.style.top=B+"px"}else{if(F.position==="left"){n.className=F.cssClass+" left";n.style.left=D-I.width+"px";n.style.top=B-(I.height/2)+"px"}else{if(F.position==="right"){n.className=F.cssClass+" right";n.style.left=D+"px";n.style.top=B-(I.height/2)+"px"}}}}if(F.autoadjust){I=n.getBoundingClientRect();G=I.top-H.top;x=H.bottom-I.bottom;J=I.left-H.left;y=H.right-I.right;if(x<0){n.className=F.cssClass;if(F.position==="top"||F.position==="bottom"){n.className=F.cssClass+" top"}n.style.top=B-I.height+"px"}else{if(G<0){n.className=F.cssClass;if(F.position==="top"||F.position==="bottom"){n.className=F.cssClass+" bottom"}n.style.top=B+"px"}}if(y<0){n.className=F.cssClass;if(F.position==="left"||F.position==="right"){n.className=F.cssClass+" left"}n.style.left=D-I.width+"px"}else{if(J<0){n.className=F.cssClass;if(F.position==="left"||F.position==="right"){n.className=F.cssClass+" right"}n.style.left=D+"px"}}}if(u){u()}},0)};function g(){if(n&&n.parentNode){n.parentNode.removeChild(n);n=null}}function o(){clearTimeout(h);clearTimeout(p);h=false;p=false;g()}function k(s){clearTimeout(h);clearTimeout(p);h=false;p=setTimeout(function(){if(!l){g()}},s)}this.close=function(){o();this.dispatchEvent("hidden");return this};this.kill=function(){this.unbindEvents();clearTimeout(h);clearTimeout(p);n=null;h=null;p=null;j=false};this.unbindEvents=function(){if(t.stage){r.unbind(f.show);r.unbind(f.hide);if(f.show!=="doubleClickStage"){r.unbind("doubleClickStage")}}if(t.node){r.unbind(m.show);r.unbind(m.hide);if(m.show!=="doubleClickNode"){r.unbind("doubleClickNode")}}if(t.edge){r.unbind(d.show);r.unbind(d.hide);if(d.show!=="doubleClickEdge"){r.unbind("doubleClickEdge")}}if(m.show==="rightClickNode"||d.show==="rightClickEdge"){i.container.removeEventListener("contextmenu",e)}};if(t.stage){if(t.stage.renderer!==undefined&&typeof t.stage.renderer!=="function"){throw new TypeError('"options.stage.renderer" is not a function, was '+t.stage.renderer)}if(t.stage.position!==undefined){if(t.stage.position!=="top"&&t.stage.position!=="bottom"&&t.stage.position!=="left"&&t.stage.position!=="right"&&t.stage.position!=="css"){throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+t.position)}}r.bind(f.show,function(v){if(f.show!=="doubleClickStage"&&j){return}var u=v.data.captor.clientX,s=v.data.captor.clientY;clearTimeout(h);h=setTimeout(function(){q.open(null,f,u,s,q.dispatchEvent.bind(q,"shown",v.data))},f.delay)});r.bind(f.hide,function(s){var u=n;k(b.stage.hideDelay);if(u){q.dispatchEvent("hidden",s.data)}});if(f.show!=="doubleClickStage"){r.bind("doubleClickStage",function(s){o();j=true;q.dispatchEvent("hidden",s.data);setTimeout(function(){j=false},b.doubleClickDelay)})}}if(t.node){if(t.node.renderer!==undefined&&typeof t.node.renderer!=="function"){throw new TypeError('"options.node.renderer" is not a function, was '+t.node.renderer)}if(t.node.position!==undefined){if(t.node.position!=="top"&&t.node.position!=="bottom"&&t.node.position!=="left"&&t.node.position!=="right"&&t.node.position!=="css"){throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+t.position)}}r.bind(m.show,function(v){if(m.show!=="doubleClickNode"&&j){return}var w=v.data.node;if(!w&&v.data.enter){w=v.data.enter.nodes[0]}if(w==undefined){return}var u=v.data.captor.clientX,s=v.data.captor.clientY;clearTimeout(h);h=setTimeout(function(){q.open(w,m,u,s,q.dispatchEvent.bind(q,"shown",v.data))},m.delay)});r.bind(m.hide,function(s){if(s.data.leave&&s.data.leave.nodes.length==0){return}var u=n;k(b.node.hideDelay);if(u){q.dispatchEvent("hidden",s.data)}});if(m.show!=="doubleClickNode"){r.bind("doubleClickNode",function(s){o();j=true;q.dispatchEvent("hidden",s.data);setTimeout(function(){j=false},b.doubleClickDelay)})}}if(t.edge){if(t.edge.renderer!==undefined&&typeof t.edge.renderer!=="function"){throw new TypeError('"options.edge.renderer" is not a function, was '+t.edge.renderer)}if(t.edge.position!==undefined){if(t.edge.position!=="top"&&t.edge.position!=="bottom"&&t.edge.position!=="left"&&t.edge.position!=="right"&&t.edge.position!=="css"){throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+t.position)}}r.bind(d.show,function(v){if(d.show!=="doubleClickEdge"&&j){return}var w=v.data.edge;if(!w&&v.data.enter){w=v.data.enter.edges[0]}if(w==undefined){return}var u=v.data.captor.clientX,s=v.data.captor.clientY;clearTimeout(h);h=setTimeout(function(){q.open(w,d,u,s,q.dispatchEvent.bind(q,"shown",v.data))},d.delay)});r.bind(d.hide,function(s){if(s.data.leave&&s.data.leave.edges.length==0){return}var u=n;k(b.edge.hideDelay);if(u){q.dispatchEvent("hidden",s.data)}});if(d.show!=="doubleClickEdge"){r.bind("doubleClickEdge",function(s){o();j=true;q.dispatchEvent("hidden",s.data);setTimeout(function(){j=false},b.doubleClickDelay)})}}if(m.show==="rightClickNode"||d.show==="rightClickEdge"){i.container.addEventListener("contextmenu",e)}}var a={};sigma.plugins.tooltips=function(e,f,d){if(!a[e.id]){a[e.id]=new c(e,f,d)}return a[e.id]};sigma.plugins.killTooltips=function(d){if(a[d.id] instanceof c){a[d.id].kill()}delete a[d.id]}}).call(window);