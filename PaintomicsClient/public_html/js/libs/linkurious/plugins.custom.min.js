(function(e){"use strict";if(typeof sigma=="undefined")throw new Error("sigma is not declared");var t=Object.create(null);sigma.classes.graph.attach("addNode","sigma.helpers.graph.addNode",function(e){e.fixed&&(t[e.id]=this.nodesIndex[e.id])}),sigma.classes.graph.attachBefore("dropNode","sigma.helpers.graph.dropNode",function(e){delete t[e]}),sigma.classes.graph.attachBefore("clear","sigma.helpers.graph.clear",function(){var e;for(e in t)(!("hasOwnProperty"in t)||t.hasOwnProperty(e))&&delete t[e];t=Object.create(null)}),sigma.classes.graph.hasMethod("fixNode")||sigma.classes.graph.addMethod("fixNode",function(e){return this.nodesIndex[e]&&(this.nodesIndex[e].fixed=!0,t[e]=this.nodesIndex[e]),this}),sigma.classes.graph.hasMethod("unfixNode")||sigma.classes.graph.addMethod("unfixNode",function(e){return this.nodesIndex[e]&&(delete this.nodesIndex[e].fixed,delete t[e]),this}),sigma.classes.graph.hasMethod("getFixedNodes")||sigma.classes.graph.addMethod("getFixedNodes",function(){var e,n=[];for(e in t)n.push(this.nodesIndex[e]);return n}),sigma.classes.graph.hasMethod("dropNodes")||sigma.classes.graph.addMethod("dropNodes",function(e){if(arguments.length>1)throw new Error("Too many arguments. Use an array instead.");if(typeof e=="string"||typeof e=="number")this.dropNode(e);else{if(!Array.isArray(e))throw new TypeError('Invalid argument: "v" is not a string, a number, or an array, was '+e);var t,n;for(t=0,n=e.length;t<n;t++){if(typeof e[t]!="string"&&typeof e[t]!="number")throw new TypeError("Invalid argument: a node id is not a string or a number, was "+e[t]);this.dropNode(e[t])}}return this}),sigma.classes.graph.hasMethod("dropEdges")||sigma.classes.graph.addMethod("dropEdges",function(e){if(arguments.length>1)throw new Error("Too many arguments. Use an array instead.");if(typeof e=="string"||typeof e=="number")this.dropEdge(e);else{if(!Array.isArray(e))throw new TypeError("Invalid argument: it is not a string, a number, or an array, was "+e);var t,n;for(t=0,n=e.length;t<n;t++){if(typeof e[t]!="string"&&typeof e[t]!="number")throw new TypeError("Invalid argument: an edge id is not a string or a number, was "+e[t]);this.dropEdge(e[t])}}return this}),sigma.classes.graph.hasMethod("adjacentNodes")||sigma.classes.graph.addMethod("adjacentNodes",function(e,t){t=t||{},t.withHidden=arguments.length==2?t.withHidden:!0;if(typeof e!="string"&&typeof e!="number")throw new TypeError("The node id is not a string or a number, was "+e);var n=this,r,i,s=[];for(r in this.allNeighborsIndex[e])t.withHidden?s.push(this.nodesIndex[r]):this.nodes(r).hidden||(i=Object.keys(this.allNeighborsIndex[e][r]).map(function(e){return n.edges(e)}).filter(function(e){return!e.hidden}).length!=0,i&&s.push(this.nodesIndex[r]));return s}),sigma.classes.graph.hasMethod("adjacentEdges")||sigma.classes.graph.addMethod("adjacentEdges",function(e,t){t=t||{},t.withHidden=arguments.length==2?t.withHidden:!0;if(typeof e!="string"&&typeof e!="number")throw new TypeError("The node id is not a string or a number, was "+e);var n=this.allNeighborsIndex[e],r,i,s=[];for(i in n)for(r in n[i])(t.withHidden||!this.edges(r).hidden)&&s.push(n[i][r]);return s})}).call(this),function(e){"use strict";function t(e,t,n){var r=null,i=null,s=null;window.Blob?(r=new Blob([e],{type:"text/xml"}),i=window.URL.createObjectURL(r)):s="data:text/xml;charset=UTF-8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>')+encodeURIComponent(e);if(navigator.msSaveBlob)navigator.msSaveBlob(r,n);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(r,n);else{var o=document.createElement("a");o.setAttribute("href",window.Blob?i:s),o.setAttribute("download",n||"graph."+t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}i&&setTimeout(function(){window.URL.revokeObjectURL(i)},0)}function n(e,t){return t===null?null:t.split(".").reduce(function(e,t){return e[t]},e)}function r(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function i(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),r+"-"+n+"-"+t}function s(e){return e===+e&&e===(e|0)}function o(e,t){return t==="integer"&&typeof e=="number"?s(e)||(t="float"):typeof e!="number"&&(t="string",typeof e=="boolean"&&(t="boolean")),t}if(typeof sigma=="undefined")throw"sigma.exporters.gexf: sigma is not declared";sigma.prototype.toGEXF=function(e){e=e||{};var s=document.implementation.createDocument("","",null),u=new XMLSerializer,a="",f=!0,l,c=this.graph.nodes(),h=this.graph.edges();e.renderer&&(f=e.renderer instanceof sigma.renderers.webgl,l=f?e.renderer.camera.prefix:e.renderer.camera.readPrefix);var p,d,v={},m=0,g={},y=0,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B;D=s.createElement("gexf"),D.setAttribute("xmlns","http://www.gexf.net/1.2draft"),D.setAttribute("xmlns:viz","http://www.gexf.net/1.2draft/viz"),D.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),D.setAttribute("xsi:schemaLocation","http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"),D.setAttribute("version","1.2"),O=s.createElement("meta"),O.setAttribute("lastmodifieddate",i()),e.creator&&(N=s.createElement("creator"),B=s.createTextNode(""+e.creator),N.appendChild(B),O.appendChild(N)),e.description&&(C=s.createElement("description"),B=s.createTextNode(""+e.description),C.appendChild(B),O.appendChild(C)),A=s.createElement("graph"),A.setAttribute("mode","static"),M=s.createElement("nodes");for(var j=0;j<c.length;j++){p=c[j],_=s.createElement("node"),_.setAttribute("id",p.id),p.label&&_.setAttribute("label",p.label),d=n(p,e.nodeAttributes),d&&(w=s.createElement("attvalues"),Object.keys(d).forEach(function(e){e in v||(v[e]={id:m,type:"integer"},m++);var t=d[e];v[e].type=o(t,v[e].type),E=s.createElement("attvalue"),E.setAttribute("for",v[e].id),E.setAttribute("value",t),w.appendChild(E)}),_.appendChild(w));if(e.renderer){if(p.color){var F;p.color[0]==="#"?F=r(p.color):F=p.color.match(/\d+/g),F.length>2&&(T=s.createElement("viz:color"),T.setAttribute("r",F[0]),T.setAttribute("g",F[1]),T.setAttribute("b",F[2]),F.length>3&&(F.length===5?T.setAttribute("a",F[3]+"."+F[4]):T.setAttribute("a",F[3])),_.appendChild(T))}P=s.createElement("viz:position"),P.setAttribute("x",p[l+"x"]),P.setAttribute("y",-parseInt(p[l+"y"],10)),_.appendChild(P),p.size&&(H=s.createElement("viz:size"),H.setAttribute("value",p[l+"size"]),_.appendChild(H))}M.appendChild(_)}S=s.createElement("attributes"),S.setAttribute("class","node"),Object.keys(v).forEach(function(e){b=s.createElement("attribute"),b.setAttribute("id",v[e].id),b.setAttribute("title",e),b.setAttribute("type",v[e].type),S.appendChild(b)}),k=s.createElement("edges");for(var j=0;j<h.length;j++){p=h[j],L=s.createElement("edge"),L.setAttribute("id",p.id),L.setAttribute("source",p.source),L.setAttribute("target",p.target),p.size&&L.setAttribute("weight",p.size),p.label&&L.setAttribute("label",p.label),d=n(p,e.edgeAttributes),d&&(w=s.createElement("attvalues"),Object.keys(d).forEach(function(e){e in g||(g[e]={id:y,type:"integer"},y++);var t=d[e];g[e].type=o(t,g[e].type),E=s.createElement("attvalue"),E.setAttribute("for",g[e].id),E.setAttribute("value",t),w.appendChild(E)}),L.appendChild(w));if(e.renderer){if(p.color){var F;p.color[0]==="#"?F=r(p.color):F=p.color.match(/\d+/g),F.length>2&&F.length<=5&&(T=s.createElement("viz:color"),T.setAttribute("r",F[0]),T.setAttribute("g",F[1]),T.setAttribute("b",F[2]),L.appendChild(T))}p.size&&(H=s.createElement("viz:size"),H.setAttribute("value",p.size),L.appendChild(H))}k.appendChild(L)}return x=s.createElement("attributes"),x.setAttribute("class","edge"),Object.keys(g).forEach(function(e){b=s.createElement("attribute"),b.setAttribute("id",g[e].id),b.setAttribute("title",e),b.setAttribute("type",g[e].type),x.appendChild(b)}),A.appendChild(S),A.appendChild(x),A.appendChild(M),A.appendChild(k),D.appendChild(O),D.appendChild(A),s.appendChild(D),a=u.serializeToString(s),e.download&&t(a,"gexf",e.filename),b&&b.parentNode.removeChild(b),w&&w.parentNode.removeChild(w),E&&E.parentNode.removeChild(E),T&&T.parentNode.removeChild(T),N&&N.parentNode.removeChild(N),C&&C.parentNode.removeChild(C),B&&B.parentNode.removeChild(B),P&&P.parentNode.removeChild(P),H&&H.parentNode.removeChild(H),_&&_.parentNode.removeChild(_),L&&L.parentNode.removeChild(L),S&&S.parentNode.removeChild(S),x&&x.parentNode.removeChild(x),M&&M.parentNode.removeChild(M),k&&k.parentNode.removeChild(k),A&&A.parentNode.removeChild(A),O&&O.parentNode.removeChild(O),D&&D.parentNode.removeChild(D),s=null,a}}.call(this),function(e){"use strict";function t(e,t,n){var r=null,i=null,s=null;window.Blob?(r=new Blob([e],{type:"text/xml"}),i=window.URL.createObjectURL(r)):s="data:text/xml;charset=UTF-8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>')+encodeURIComponent(e);if(navigator.msSaveBlob)navigator.msSaveBlob(r,n);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(r,n);else{var o=document.createElement("a");o.setAttribute("href",window.Blob?i:s),o.setAttribute("download",n||"graph."+t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}i&&setTimeout(function(){window.URL.revokeObjectURL(i)},0)}function n(e,t){for(var n in e){if(!e.hasOwnProperty(n))continue;t(e[n],n)}}function r(e,t){return t==null?null:t.split(".").reduce(function(e,t){return e[t]},e)}function i(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}if(typeof sigma=="undefined")throw"sigma.exporters.graphML: sigma is not declared";sigma.prototype.toGraphML=function(s){function p(e,t){var n;t[0]==="#"?n=i(t):n=t.match(/\d+(\.\d+)?/g),e.r=n[0],e.g=n[1],e.b=n[2],e.a&&(e.a=n[3])}function d(t,n,r,i,s){r=r||{};var u=o.createElement(n);for(var a in r){if(!r.hasOwnProperty(a))continue;var f=r[a];f!==e&&u.setAttribute(a,f)}if(i!==e||s){Object.prototype.toString.call(i)==="[object Object]"&&(i=JSON.stringify(i));var l=document.createTextNode(i);u.appendChild(l)}return t.appendChild(u),u}function w(t,i,s){var o=r(t,s),u={id:t.id};m.forEach(function(n){var r=n==="x"||n==="y"?t[l+n]:t[n];n==="y"&&r&&(r=-parseFloat(r)),r!==e&&(u[(i==="edge"?"edge_":"")+n]=r,n==="color"&&p(u,r))}),n(o,function(e,t){if(m.indexOf(t)!==-1||v.indexOf(t)!==-1)return;g[t]?g[t].for!==i&&(g[t].for="all"):g[t]={"for":i,type:"string"},u[t]=e}),i==="edge"?(u.source=t.source,u.target=t.target,b.push(u)):y.push(u)}function x(e,t){var n=d(e,"data",{key:"nodegraphics"}),r=d(n,"y:ShapeNode");d(r,"y:Geometry",{x:t.x,y:t.y,width:t.size,height:t.size}),d(r,"y:Fill",{color:t.color?t.color:"#000000",transparent:!1}),d(r,"y:NodeLabel",null,t.label?t.label:""),d(r,"y:Shape",{type:t.type?t.type:"circle"})}function T(e,t){var n=d(e,"data",{key:"edgegraphics"}),r=d(n,"y:PolyLineEdge");d(r,"y:LineStyle",{type:t.edge_type?t.edge_type:"line",color:t.edge_color?t.edge_color:"#0000FF",width:t.edge_size?t.edge_size:1}),d(r,"y:EdgeLabel",null,t.edge_label?t.edge_label:"")}s=s||{};var o=document.implementation.createDocument("","",null),u=new XMLSerializer,a,f=!0,l,c=this.graph.nodes(),h=this.graph.edges();s.renderer?(f=s.renderer instanceof sigma.renderers.webgl,l=f?s.renderer.camera.prefix:s.renderer.camera.readPrefix):l="";var v=["id","source","target"],m=["size","x","y","type","color","label","fixed","hidden","active"],g={size:{"for":"all",type:"double"},x:{"for":"node",type:"double"},y:{"for":"node",type:"double"},type:{"for":"all",type:"string"},color:{"for":"all",type:"string"},r:{"for":"all",type:"int"},g:{"for":"all",type:"int"},b:{"for":"all",type:"int"},a:{"for":"all",type:"double"},label:{"for":"all",type:"string"},fixed:{"for":"node",type:"boolean"},hidden:{"for":"all",type:"boolean"},active:{"for":"all",type:"boolean"}},y=[],b=[];c.forEach(function(e){w(e,"node",s.nodesAttributes)}),h.forEach(function(e){w(e,"edge",s.edgesAttributes)});var E=d(o,"graphml",{xmlns:"http://graphml.graphdrawing.org/xmlns","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd","xmlns:y":"http://www.yworks.com/xml/graphml","xmlns:java":"http://www.yworks.com/xml/yfiles-common/1.0/java","xmlns:sys":"http://www.yworks.com/xml/yfiles-common/markup/primitives/2.0","xmlns:x":"http://ww.yworks.com/xml/yfiles-common/markup/2.0"});n(g,function(e,t){(e.for==="node"||e.for==="all")&&d(E,"key",{"attr.name":t,"attr.type":e.type,"for":"node",id:t}),(e.for==="edge"||e.for==="all")&&d(E,"key",{"attr.name":t,"attr.type":e.type,"for":"edge",id:"edge_"+t})}),d(E,"key",{id:"nodegraphics","for":"node","yfiles.type":"nodegraphics","attr.type":"string"}),d(E,"key",{id:"edgegraphics","for":"edge","yfiles.type":"edgegraphics","attr.type":"string"});var S=d(E,"graph",{edgedefault:s.undirectedEdges?"undirected":"directed",id:s.graphId?s.graphId:"G","parse.nodes":c.length,"parse.edges":h.length,"parse.order":"nodesfirst"});y.forEach(function(e){var t=d(S,"node",{id:e.id});x(t,e),n(e,function(e,n){if(v.indexOf(n)!==-1)return;d(t,"data",{key:n},e,!0)})}),b.forEach(function(e){var t=d(S,"edge",{id:e.id,source:e.source,target:e.target});T(t,e),n(e,function(e,n){if(v.indexOf(n)!==-1)return;d(t,"data",{key:n},e,!0)})}),a='<?xml version="1.0" encoding="UTF-8"?>'+u.serializeToString(o),s.download&&t(a,"graphml",s.filename)}}.call(this),function(undefined){"use strict";function download(e,t,n){var r=null,i=null,s=null;window.Blob?(r=new Blob([e],{type:"text/json"}),i=window.URL.createObjectURL(r)):s="data:text/json;charset=UTF-8,"+encodeURIComponent(e);if(navigator.msSaveBlob)navigator.msSaveBlob(r,n);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(r,n);else{var o=document.createElement("a");o.setAttribute("href",window.Blob?i:s),o.setAttribute("download",n||"graph."+t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}i&&setTimeout(function(){window.URL.revokeObjectURL(i)},0)}function deepCopy(o){var copy=Object.create(null);for(var i in o)typeof o[i]=="object"&&o[i]!==null?copy[i]=deepCopy(o[i]):typeof o[i]=="function"&&o[i]!==null?eval(" copy[i] = "+o[i].toString()):copy[i]=o[i];return copy}function startsWith(e,t){return t.slice(0,e.length)==e}function cleanup(e){for(var t in e)if(startsWith("read_cam",t)||startsWith("cam",t)||startsWith("renderer",""+t))e[t]=undefined;return e}if(typeof sigma=="undefined")throw"sigma.exporters.json: sigma is not declared";sigma.prototype.toJSON=function(e){e=e||{};var t={nodes:this.graph.nodes().map(deepCopy).map(cleanup),edges:this.graph.edges().map(deepCopy).map(cleanup)};if(e.pretty)var n=JSON.stringify(t,null," ");else var n=JSON.stringify(t);return e.download&&download(n,"json",e.filename),n}}.call(this),function(e){"use strict";function t(e,t,n){var r=null,i=null,s=null;window.Blob?(r=new Blob([e],{type:"text/xml"}),i=window.URL.createObjectURL(r)):s="data:text/csv;charset=UTF-8,"+encodeURIComponent(e);if(navigator.msSaveBlob)navigator.msSaveBlob(r,n);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(r,n);else{var o=document.createElement("a");o.setAttribute("href",window.Blob?i:s),o.setAttribute("download",n||"graph."+t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}i&&setTimeout(function(){window.URL.revokeObjectURL(i)},0)}function n(t,n){return t===null||t===e?n+n:typeof t=="function"?t.toString():(t=typeof t=="string"?t:JSON.stringify(t),t=t.replace(/\s+/g," "),n&&n.length?n+t.replace(n,n==='"'?"'":'"')+n:t)}function r(t,n){return n===null||n===e?null:n.split(".").reduce(function(e,t){return e[t]},t)}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.prototype.toSpreadsheet=function(e){e=e||{},e.separator=e.separator||",",e.textSeparator=e.textSeparator||"";if(e.textSeparator&&e.textSeparator!=='"'&&e.textSeparator!=="'")throw new TypeError('Invalid argument :"textSeparator" is not single-quote or double-quote, was '+e.textSeparator);var i=[],s={},o=[],u=0,a,f,l,c=e.categoriesName||"categories",h,p,d;if(!e.what)throw new TypeError('Missing argument: "what".');if(e.what==="nodes")e.which?a=this.graph.nodes(e.which):a=this.graph.nodes();else{if(e.what!=="edges")throw new TypeError('Invalid argument: "what" is not "nodes" or "edges", was '+e.what);e.which?a=this.graph.edges(e.which):a=this.graph.edges()}s.id=u++,o.push(n("id",e.textSeparator)),e.what==="edges"&&(s.source=u++,o.push(n("source",e.textSeparator)),s.target=u++,o.push(n("target",e.textSeparator))),d=e.categories&&e.categories.length,d&&(s.categories=u++,o.push(n(c,e.textSeparator)));for(var v=0;v<a.length;v++)h=a[v],f=r(h,e.attributes)||{},Object.keys(f).forEach(function(t){t in s||(s[t]=u++,o.push(n(t,e.textSeparator)))});i.push(o);for(var v=0;v<a.length;v++)h=a[v],p=[],p.length=u,p[0]=n(h.id,e.textSeparator),e.what==="edges"&&(p[1]=n(h.source,e.textSeparator),p[2]=n(h.target,e.textSeparator)),d&&(l=r(h,e.categories),Array.isArray(l)&&(l=l.join(",")),p[s.categories]=n(l,e.textSeparator)),f=r(h,e.attributes)||{},Object.keys(f).forEach(function(t){p[s[t]]=n(f[t],e.textSeparator)}),i.push(p);var m=i.map(function(t){return t.join(e.separator)}).join("\n");return e.download&&t(m,"csv",e.filename),m}}.call(this),function(e){"use strict";function n(e){return new Blob([e],{type:"image/svg+xml;charset=utf-8"})}function r(e,t){if(typeof safari!="undefined"){var r="File download does not work in Safari. Please use a modern web browser such as Firefox, Chrome, or Internet Explorer 11.";throw alert(r),new Error(r)}var i=n(e),s=window.URL.createObjectURL(i);if(navigator.msSaveBlob)navigator.msSaveBlob(i,t);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(i,t);else{var o=document.createElement("a");o.setAttribute("href",s),o.setAttribute("download",t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}setTimeout(function(){window.URL.revokeObjectURL(s)},0)}function o(e,t,n){var r={},i={},o=0,u,a,f="",l,c,h;n.classes&&(a=document.createElementNS(s,"style"),e.insertBefore(a,e.firstChild));var p=e.querySelectorAll('[id="'+t+'-group-nodes"] > [class="'+t+'-node"]');for(c=0,h=p.length,l=!0;c<h;c++)u=p[c].getAttribute("fill"),n.data||p[c].removeAttribute("data-node-id"),n.classes&&(u in r||(r[u]=l?t+"-node":"c-"+o++,f+="."+r[u]+"{fill: "+u+"}"),r[u]!==t+"-node"&&p[c].setAttribute("class",p[c].getAttribute("class")+" "+r[u]),p[c].removeAttribute("fill")),l=!1;var d=e.querySelectorAll('[id="'+t+'-group-edges"] > [class="'+t+'-edge"]');for(c=0,h=d.length,l=!0;c<h;c++)u=d[c].getAttribute("stroke"),n.data||d[c].removeAttribute("data-edge-id"),n.classes&&(u in i||(i[u]=l?t+"-edge":"c-"+o++,f+="."+i[u]+"{stroke: "+u+"}"),i[u]!==t+"-edge"&&d[c].setAttribute("class",d[c].getAttribute("class")+" "+i[u]),d[c].removeAttribute("stroke")),l=!1;n.classes&&a.appendChild(document.createTextNode(f))}if(typeof sigma=="undefined")throw"sigma.renderers.snapshot: sigma not in scope.";var t=this.URL||this.webkitURL||this,i={size:"1000",width:"1000",height:"1000",classes:!0,labels:!0,data:!1,download:!1,filename:"graph.svg"},s="http://www.w3.org/2000/svg";sigma.prototype.toSVG=function(e){e=e||{};var t=this.settings("classPrefix"),n=e.size||e.width||i.size,s=e.size||e.height||i.size,u=document.createElement("div");u.setAttribute("width",n),u.setAttribute("height",s),u.setAttribute("style","position:absolute; top: 0px; left:0px; width: "+n+"px; height: "+s+"px;");var a=this.addCamera(),f=this.addRenderer({camera:a,container:u,type:"svg",forceLabels:!!e.labels});f.resize(n,s),this.refresh(),this.killRenderer(f),this.killCamera(a);var l=u.querySelector("svg");l.removeAttribute("style"),l.setAttribute("width",n+"px"),l.setAttribute("height",s+"px"),l.setAttribute("x","0px"),l.setAttribute("y","0px");if(!e.labels){var c=l.querySelector('[id="'+t+'-group-labels"]');l.removeChild(c)}var h=l.querySelector('[id="'+t+'-group-hovers"]');l.removeChild(h),e.classes=e.classes!==!1,(!e.data||e.classes)&&o(l,t,e);var p=l.outerHTML;u=null;var d='<?xml version="1.0" encoding="utf-8"?>\n';return d+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n',d+=p,e.download&&r(d,e.filename||i.filename),d}}.call(this),function(e){"use strict";function t(e,t,n){var r=window.URL.createObjectURL(e);if(navigator.msSaveBlob)navigator.msSaveBlob(e,n);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(e,n);else{var i=document.createElement("a");i.setAttribute("href",r),i.setAttribute("download",n||"graph."+t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}setTimeout(function(){window.URL.revokeObjectURL(r)},0)}function n(e){var t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(var r=0;r!=e.length;++r)n[r]=e.charCodeAt(r)&255;return t}function r(t){return t===null||t===e?"":typeof t=="string"||typeof t=="number"?t:typeof t=="function"?t.toString():JSON.stringify(t)}function i(t){return t===null||t===e?"":typeof t=="string"||typeof t=="number"?t:Array.isArray(t)?t.join(","):typeof t=="function"?t.toString():JSON.stringify(t)}function s(t,n){return n===null||n===e?null:n.split(".").reduce(function(e,t){return e[t]},t)}function o(){if(!(this instanceof o))return new o;this.SheetNames=[],this.Sheets={}}function u(e,t){t&&(e+=1462);var n=Date.parse(e);return(n-new Date(Date.UTC(1899,11,30)))/864e5}function a(e,t){var n={},r={s:{c:1e7,r:1e7},e:{c:0,r:0}};for(var i=0;i!=e.length;++i)for(var s=0;s!=e[i].length;++s){r.s.r>i&&(r.s.r=i),r.s.c>s&&(r.s.c=s),r.e.r<i&&(r.e.r=i),r.e.c<s&&(r.e.c=s);var o={v:e[i][s]};if(o.v==null)continue;var a=XLSX.utils.encode_cell({c:s,r:i});typeof o.v=="number"?o.t="n":typeof o.v=="boolean"?o.t="b":o.v instanceof Date?(o.t="n",o.z=XLSX.SSF._table[14],o.v=u(o.v)):o.t="s",n[a]=o}return r.s.c<1e7&&(n["!ref"]=XLSX.utils.encode_range(r)),n}function f(e,t){var n=0,o={},u=[],a,f=t.nodesAttributes,l=t.nodesCategories,c=t.nodesCategoriesName||"categories",h,p,d=0,v=[];t.what==="edges"&&(f=t.edgesAttributes,l=t.edgesCategories,c=t.edgesCategoriesName||"categories"),d=l&&l.length?1:0,o.id=n++,u.push("id"),t.what==="edges"&&(o.source=n++,u.push("source"),o.target=n++,u.push("target")),d&&(n++,u.push(c));for(var m=0;m<e.length;m++)h=e[m],a=s(h,f)||{},Object.keys(a).forEach(function(e){e in o||(o[e]=n++,u.push(r(e)))});v.push(u);for(var m=0;m<e.length;m++)h=e[m],p=[],p.length=n,p[0]=r(h.id),t.what==="edges"?(p[1]=r(h.source),p[2]=r(h.target),d&&(p[3]=i(s(h,l)))):d&&(p[1]=i(s(h,l))),a=s(h,f)||{},Object.keys(a).forEach(function(e){p[o[e]]=r(a[e])}),v.push(p);return v}if(typeof sigma=="undefined")throw new Error("sigma is not declared");(typeof dagre=="undefined"||typeof dagre.graphlib=="undefined")&&console.warn("to use the xlx plugin, you have to include the XLSX library"),sigma.prototype.toXLSX=function(e){if(typeof XLSX=="undefined")throw new Error("XLSX is not declared");e=e||{};var r=new o,i,s,u;if(!e.what)e.what="nodes",i=a(f(this.graph.nodes(),e)),e.what="edges",s=a(f(this.graph.edges(),e));else if(e.what==="nodes")e.which?u=this.graph.nodes(e.which):u=this.graph.nodes(),i=a(f(u,e));else{if(e.what!=="edges")throw new TypeError('Invalid argument: "what" is not "nodes" or "edges", was '+e.what);e.which?u=this.graph.edges(e.which):u=this.graph.edges(),s=a(f(u,e))}i&&(r.SheetNames.push("Nodes"),r.Sheets.Nodes=i),s&&(r.SheetNames.push("Edges"),r.Sheets.Edges=s);var l=XLSX.write(r,{bookType:"xlsx",bookSST:!1,type:"binary"}),c=new Blob([n(l)],{type:""});t(c,"xlsx",e.filename)}}.call(this),function(e){"use strict";function s(e){var t=";base64,";if(e.indexOf(t)==-1){var n=e.split(","),r=n[0].split(":")[1],i=decodeURIComponent(n[1]);return new Blob([i],{type:r})}var n=e.split(t),r=n[0].split(":")[1],i=window.atob(n[1]),s=i.length,o=new Uint8Array(s);for(var u=0;u<s;++u)o[u]=i.charCodeAt(u);return new Blob([o],{type:r})}function o(e,t,n){n=n||"graph."+t;if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(s(e),n);else if(navigator.msSaveBlob)navigator.msSaveBlob(s(e),n);else{var r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r)}}function u(e,t,n){var r=Math.min(n/e,n/t);return{width:e*r,height:t*r}}function a(e,t,n){var r;return r=sigma.utils.getBoundaries(e.graph,t.camera.readPrefix),r.minX/=n.zoomRatio,r.minY/=n.zoomRatio,r.maxX/=n.zoomRatio,r.maxY/=n.zoomRatio,r}function f(e,t,n){var r,i=n.margin||0,s={width:t.width,height:t.height};return!n.clips&&!n.size?(r=a(e,t,n),s={width:r.maxX-r.minX+r.sizeMax*2,height:r.maxY-r.minY+r.sizeMax*2}):n.size&&n.size>=1&&(s=u(t.width,t.height,n.size)),s.width+=i,s.height+=i,s}function l(e,t,r){r=r||{};if(!r.format||r.format in n){var i=f(e,t,r),s=e.settings("batchEdgesDrawing");s&&e.settings("batchEdgesDrawing",!1),r.clip||this.clone(e,r,i);var u=this.draw(t,r,i);e.settings("batchEdgesDrawing",s);var a=u.toDataURL(n[r.format||"png"]);return r.download&&o(a,r.format||"png",r.filename),a}throw Error('sigma.renderers.image: unsupported format "'+r.format+'".')}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t,n,r,i;t=["scene","edges","nodes","labels"],n={png:"image/png",jpg:"image/jpeg",gif:"image/gif",tiff:"image/tiff"},l.prototype.clone=function(e,n,s){n.tmpContainer=n.tmpContainer||"image-container";var o=document.getElementById(n.tmpContainer);o||(o=document.createElement("div"),o.id=n.tmpContainer,document.body.appendChild(o)),o.setAttribute("style","width:"+s.width+"px;"+"height:"+Math.round(s.height)+"px;");var u=e.addRenderer({container:document.getElementById(n.tmpContainer),type:"canvas",settings:{batchEdgesDrawing:!0,drawLabels:!!n.labels}});u.camera.ratio=n.zoomRatio>0?n.zoomRatio:1;var a=u instanceof sigma.renderers.webgl,f=!1,l=[];r=document.createElement("canvas"),i=r.getContext("2d"),e.refresh(),t.forEach(function(e){if(!u.contexts[e])return;if(n.labels===!1&&e==="labels")return;var t=u.domElements[e]||u.domElements.scene,o=u.contexts[e];f||(r.width=s.width,r.height=s.height,a&&o instanceof WebGLRenderingContext&&(r.width*=.5,r.height*=.5),f=!0),o instanceof WebGLRenderingContext?i.drawImage(t,0,0,t.width/2,t.height/2):i.drawImage(t,0,0);if(~l.indexOf(o))return;l.push(o)}),l=[],e.killRenderer(u),o.parentNode.removeChild(o)},l.prototype.draw=function(e,n,i){if(!n.size||n.size<1)n.size=window.innerWidth;var s=e instanceof sigma.renderers.webgl,o=!1,a=[],f=document.createElement("canvas"),l=f.getContext("2d");return t.forEach(function(t){if(!e.contexts[t])return;if(n.labels===!1&&t==="labels")return;var c=e.domElements[t]||e.domElements.scene,h=e.contexts[t];if(~a.indexOf(h))return;if(!o){var p,d;n.clip?(p=c.width,d=c.height,i=u(p,d,n.size)):(p=r.width,d=r.height),f.width=i.width,f.height=i.height,!s&&!h instanceof WebGLRenderingContext&&(f.width*=2,f.height*=2),o=!0,n.background&&(l.rect(0,0,f.width,f.height),l.fillStyle=n.background,l.fill())}n.clip?l.drawImage(c,0,0,f.width,f.height):l.drawImage(r,0,0,f.width,f.height),a.push(h)}),a=[],f};var c=null;sigma.plugins.image=function(e,t,n){return sigma.plugins.killImage(),c||(c=new l(e,t,n)),c},sigma.plugins.killImage=function(){c instanceof l&&(c=null,r=null,i=null)}}.call(this),function(e){"use strict";function i(e,t){var n,r,t=t||"",i=-Infinity,s=Infinity,o=Infinity,u=-Infinity,a=-Infinity;for(n=0,r=e.length;n<r;n++)i=Math.max(e[n][t+"size"],i),u=Math.max(e[n][t+"x"],u),s=Math.min(e[n][t+"x"],s),a=Math.max(e[n][t+"y"],a),o=Math.min(e[n][t+"y"],o);return i=i||1,{sizeMax:i,minX:s,minY:o,maxX:u,maxY:a}}function s(e,t,n,r,i){return(i-r)*(e-t)/(n-t)+r}function o(e,t,n){return{x:s(e.x,t.minX,t.maxX,n.minX,n.maxX),y:s(e.y,t.minY,t.maxY,n.minY,n.maxY)}}function u(){if(typeof dagre=="undefined")throw new Error("dagre is not declared");if(typeof dagre.graphlib=="undefined")throw new Error("dagre.graphlib is not declared");var e=this,n;this.init=function(e,n){n=n||{},n.nodes&&(this.nodes=n.nodes,delete n.nodes),n.boundingBox&&(this.boundingBox=n.boundingBox,delete n.boundingBox),this.sigInst=e,this.config=sigma.utils.extend(n,t),this.easing=n.easing,this.duration=n.duration;if(this.easing&&(!sigma.plugins||typeof sigma.plugins.animate=="undefined"))throw new Error("sigma.plugins.animate is not declared");this.running=!1},this.start=function(){if(this.running)return;this.running=!0,n=new dagre.graphlib.Graph({directed:this.config.directed,multigraph:this.config.multigraph,compound:this.config.compound}),n.setGraph(this.config);var t=this.nodes||this.sigInst.graph.nodes();for(var s=0;s<t.length;s++)t[s].fixed||n.setNode(t[s].id,{});this.boundingBox===!0&&(this.boundingBox=i(t));var o=this.sigInst.graph.edges();for(var s=0;s<o.length;s++)n.node(o[s].source)!=null&&n.node(o[s].target)!=null&&n.setEdge(o[s].source,o[s].target,{id:o[s].id});r[e.sigInst.id].dispatchEvent("start"),dagre.layout(n);var u;n.edges().map(function(t){u=e.sigInst.graph.edges(n.edge(t).id),u.points=n.edge(t).points}),this.stop()},this.stop=function(){if(!n)return;var t=n.nodes().map(function(t){return e.sigInst.graph.nodes(t)}),s;if(this.boundingBox)var u=i(n.nodes().map(function(e){return n.node(e)}));this.running=!1;if(this.easing){for(var a=0;a<t.length;a++)this.boundingBox?(s=o(n.node(t[a].id),u,e.boundingBox),t[a].dagre_x=s.x,t[a].dagre_y=s.y):(t[a].dagre_x=n.node(t[a].id).x,t[a].dagre_y=n.node(t[a].id).y);r[e.sigInst.id].dispatchEvent("interpolate"),sigma.plugins.animate(e.sigInst,{x:"dagre_x",y:"dagre_y"},{nodes:t,easing:e.easing,onComplete:function(){for(var n=0;n<t.length;n++)t[n].dagre_x=null,t[n].dagre_y=null;r[e.sigInst.id].dispatchEvent("stop"),e.sigInst.refresh()},duration:e.duration})}else{var f;n.nodes().forEach(function(t){f=e.sigInst.graph.nodes(t),f.x=n.node(t).x,f.y=n.node(t).y}),r[e.sigInst.id].dispatchEvent("stop"),this.sigInst.refresh()}},this.kill=function(){this.sigInst=null,this.config=null,this.easing=null}}if(typeof sigma=="undefined")throw new Error("sigma is not declared");(typeof dagre=="undefined"||typeof dagre.graphlib=="undefined")&&console.warn("to use the dagre plugin, you have to include dagre and dagre.graphlib"),sigma.utils.pkg("sigma.layouts.dagre");var t={directed:!0,multigraph:!0,compound:!1,rankDir:"TB"},n={},r={};sigma.layouts.dagre.configure=function(e,t){if(!e)throw new Error('Missing argument: "sigInst"');if(!t)throw new Error('Missing argument: "config"');return n[e.id]||(n[e.id]=new u,r[e.id]={},sigma.classes.dispatcher.extend(r[e.id]),e.bind("kill",function(){n[e.id].kill(),n[e.id]=null,r[e.id]=null})),n[e.id].init(e,t),r[e.id]},sigma.layouts.dagre.start=function(e,t){if(!e)throw new Error('Missing argument: "sigInst"');return t&&this.configure(e,t),n[e.id].start(),r[e.id]},sigma.layouts.dagre.isRunning=function(e){if(!e)throw new Error('Missing argument: "sigInst"');return!!n[e.id]&&n[e.id].running}}.call(this),function(undefined){"use strict";function crush(e){var t,n,r,i=["x","y","dx","dy","old_dx","old_dy","mass","convergence","size","fixed"],s=["source","target","weight"],o=["node","centerX","centerY","size","nextSibling","firstChild","mass","massCenterX","massCenterY"];for(n=0,r=o.length;n<r;n++)t=new RegExp("rp\\(([^,]*), '"+o[n]+"'\\)","g"),e=e.replace(t,n===0?"$1":"$1 + "+n);for(n=0,r=i.length;n<r;n++)t=new RegExp("np\\(([^,]*), '"+i[n]+"'\\)","g"),e=e.replace(t,n===0?"$1":"$1 + "+n);for(n=0,r=s.length;n<r;n++)t=new RegExp("ep\\(([^,]*), '"+s[n]+"'\\)","g"),e=e.replace(t,n===0?"$1":"$1 + "+n);return e}function getWorkerFn(){var e=crush?crush(Worker.toString()):Worker.toString();return";("+e+").call(this);"}var _root=this,inWebWorker=!("document"in _root),Worker=function(e){function s(){var e,t,n={},r=arguments.length;for(e=r-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n}function o(e){var t;for(t in e)(!("hasOwnProperty"in e)||e.hasOwnProperty(t))&&delete e[t];return e}function l(e,n){if(e%t.ppn!==0)throw"np: non correct ("+e+").";if(e!==parseInt(e))throw"np: non int.";if(n in u)return e+u[n];throw"ForceAtlas2.Worker - Inexistant node property given ("+n+")."}function c(e,n){if(e%t.ppe!==0)throw"ep: non correct ("+e+").";if(e!==parseInt(e))throw"ep: non int.";if(n in a)return e+a[n];throw"ForceAtlas2.Worker - Inexistant edge property given ("+n+")."}function h(e,n){if(e%t.ppr!==0)throw"rp: non correct ("+e+").";if(e!==parseInt(e))throw"rp: non int.";if(n in f)return e+f[n];throw"ForceAtlas2.Worker - Inexistant region property given ("+n+")."}function p(e){if(isNaN(e))throw"NaN alert!"}function d(e,i,s){s=s||{};var o,u;n=e,r=i,t.nodesLength=n.length,t.edgesLength=r.length,v(s)}function v(e){t.settings=s(e,t.settings)}function m
(){var e,s,o,u,a,f,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;for(f=0;f<t.nodesLength;f+=t.ppn)n[l(f,"old_dx")]=n[l(f,"dx")],n[l(f,"old_dy")]=n[l(f,"dy")],n[l(f,"dx")]=0,n[l(f,"dy")]=0;if(t.settings.outboundAttractionDistribution){w=0;for(f=0;f<t.nodesLength;f+=t.ppn)w+=n[l(f,"mass")];w/=t.nodesLength}if(t.settings.barnesHutOptimize){var A=Infinity,O=-Infinity,M=Infinity,_=-Infinity,D,P,H,B,j;i=[];for(f=0;f<t.nodesLength;f+=t.ppn)A=Math.min(A,n[l(f,"x")]),O=Math.max(O,n[l(f,"x")]),M=Math.min(M,n[l(f,"y")]),_=Math.max(_,n[l(f,"y")]);i[h(0,"node")]=-1,i[h(0,"centerX")]=(A+O)/2,i[h(0,"centerY")]=(M+_)/2,i[h(0,"size")]=Math.max(O-A,_-M),i[h(0,"nextSibling")]=-1,i[h(0,"firstChild")]=-1,i[h(0,"mass")]=0,i[h(0,"massCenterX")]=0,i[h(0,"massCenterY")]=0,u=1;for(f=0;f<t.nodesLength;f+=t.ppn){a=0;for(;;){if(i[h(a,"firstChild")]>=0){n[l(f,"x")]<i[h(a,"centerX")]?n[l(f,"y")]<i[h(a,"centerY")]?D=i[h(a,"firstChild")]:D=i[h(a,"firstChild")]+t.ppr:n[l(f,"y")]<i[h(a,"centerY")]?D=i[h(a,"firstChild")]+t.ppr*2:D=i[h(a,"firstChild")]+t.ppr*3,i[h(a,"massCenterX")]=(i[h(a,"massCenterX")]*i[h(a,"mass")]+n[l(f,"x")]*n[l(f,"mass")])/(i[h(a,"mass")]+n[l(f,"mass")]),i[h(a,"massCenterY")]=(i[h(a,"massCenterY")]*i[h(a,"mass")]+n[l(f,"y")]*n[l(f,"mass")])/(i[h(a,"mass")]+n[l(f,"mass")]),i[h(a,"mass")]+=n[l(f,"mass")],a=D;continue}if(i[h(a,"node")]<0){i[h(a,"node")]=f;break}i[h(a,"firstChild")]=u*t.ppr,m=i[h(a,"size")]/2,g=i[h(a,"firstChild")],i[h(g,"node")]=-1,i[h(g,"centerX")]=i[h(a,"centerX")]-m,i[h(g,"centerY")]=i[h(a,"centerY")]-m,i[h(g,"size")]=m,i[h(g,"nextSibling")]=g+t.ppr,i[h(g,"firstChild")]=-1,i[h(g,"mass")]=0,i[h(g,"massCenterX")]=0,i[h(g,"massCenterY")]=0,g+=t.ppr,i[h(g,"node")]=-1,i[h(g,"centerX")]=i[h(a,"centerX")]-m,i[h(g,"centerY")]=i[h(a,"centerY")]+m,i[h(g,"size")]=m,i[h(g,"nextSibling")]=g+t.ppr,i[h(g,"firstChild")]=-1,i[h(g,"mass")]=0,i[h(g,"massCenterX")]=0,i[h(g,"massCenterY")]=0,g+=t.ppr,i[h(g,"node")]=-1,i[h(g,"centerX")]=i[h(a,"centerX")]+m,i[h(g,"centerY")]=i[h(a,"centerY")]-m,i[h(g,"size")]=m,i[h(g,"nextSibling")]=g+t.ppr,i[h(g,"firstChild")]=-1,i[h(g,"mass")]=0,i[h(g,"massCenterX")]=0,i[h(g,"massCenterY")]=0,g+=t.ppr,i[h(g,"node")]=-1,i[h(g,"centerX")]=i[h(a,"centerX")]+m,i[h(g,"centerY")]=i[h(a,"centerY")]+m,i[h(g,"size")]=m,i[h(g,"nextSibling")]=i[h(a,"nextSibling")],i[h(g,"firstChild")]=-1,i[h(g,"mass")]=0,i[h(g,"massCenterX")]=0,i[h(g,"massCenterY")]=0,u+=4,n[l(i[h(a,"node")],"x")]<i[h(a,"centerX")]?n[l(i[h(a,"node")],"y")]<i[h(a,"centerY")]?D=i[h(a,"firstChild")]:D=i[h(a,"firstChild")]+t.ppr:n[l(i[h(a,"node")],"y")]<i[h(a,"centerY")]?D=i[h(a,"firstChild")]+t.ppr*2:D=i[h(a,"firstChild")]+t.ppr*3,i[h(a,"mass")]=n[l(i[h(a,"node")],"mass")],i[h(a,"massCenterX")]=n[l(i[h(a,"node")],"x")],i[h(a,"massCenterY")]=n[l(i[h(a,"node")],"y")],i[h(D,"node")]=i[h(a,"node")],i[h(a,"node")]=-1,n[l(f,"x")]<i[h(a,"centerX")]?n[l(f,"y")]<i[h(a,"centerY")]?B=i[h(a,"firstChild")]:B=i[h(a,"firstChild")]+t.ppr:n[l(f,"y")]<i[h(a,"centerY")]?B=i[h(a,"firstChild")]+t.ppr*2:B=i[h(a,"firstChild")]+t.ppr*3;if(D===B){a=D;continue}i[h(B,"node")]=f;break}}}if(t.settings.barnesHutOptimize){E=t.settings.scalingRatio;for(f=0;f<t.nodesLength;f+=t.ppn){a=0;for(;;){if(i[h(a,"firstChild")]>=0){C=Math.sqrt(Math.pow(n[l(f,"x")]-i[h(a,"massCenterX")],2)+Math.pow(n[l(f,"y")]-i[h(a,"massCenterY")],2));if(2*i[h(a,"size")]/C<t.settings.barnesHutTheta){S=n[l(f,"x")]-i[h(a,"massCenterX")],x=n[l(f,"y")]-i[h(a,"massCenterY")],t.settings.adjustSize?C>0?(L=E*n[l(f,"mass")]*i[h(a,"mass")]/C/C,n[l(f,"dx")]+=S*L,n[l(f,"dy")]+=x*L):C<0&&(L=-E*n[l(f,"mass")]*i[h(a,"mass")]/C,n[l(f,"dx")]+=S*L,n[l(f,"dy")]+=x*L):C>0&&(L=E*n[l(f,"mass")]*i[h(a,"mass")]/C/C,n[l(f,"dx")]+=S*L,n[l(f,"dy")]+=x*L);if(i[h(a,"nextSibling")]<0)break;a=i[h(a,"nextSibling")];continue}a=i[h(a,"firstChild")];continue}i[h(a,"node")]>=0&&i[h(a,"node")]!==f&&(S=n[l(f,"x")]-n[l(i[h(a,"node")],"x")],x=n[l(f,"y")]-n[l(i[h(a,"node")],"y")],C=Math.sqrt(S*S+x*x),t.settings.adjustSize?C>0?(L=E*n[l(f,"mass")]*n[l(i[h(a,"node")],"mass")]/C/C,n[l(f,"dx")]+=S*L,n[l(f,"dy")]+=x*L):C<0&&(L=-E*n[l(f,"mass")]*n[l(i[h(a,"node")],"mass")]/C,n[l(f,"dx")]+=S*L,n[l(f,"dy")]+=x*L):C>0&&(L=E*n[l(f,"mass")]*n[l(i[h(a,"node")],"mass")]/C/C,n[l(f,"dx")]+=S*L,n[l(f,"dy")]+=x*L));if(i[h(a,"nextSibling")]<0)break;a=i[h(a,"nextSibling")];continue}}}else{E=t.settings.scalingRatio;for(p=0;p<t.nodesLength;p+=t.ppn)for(d=0;d<p;d+=t.ppn)S=n[l(p,"x")]-n[l(d,"x")],x=n[l(p,"y")]-n[l(d,"y")],t.settings.adjustSize?(C=Math.sqrt(S*S+x*x)-n[l(p,"size")]-n[l(d,"size")],C>0?(L=E*n[l(p,"mass")]*n[l(d,"mass")]/C/C,n[l(p,"dx")]+=S*L,n[l(p,"dy")]+=x*L,n[l(d,"dx")]+=S*L,n[l(d,"dy")]+=x*L):C<0&&(L=100*E*n[l(p,"mass")]*n[l(d,"mass")],n[l(p,"dx")]+=S*L,n[l(p,"dy")]+=x*L,n[l(d,"dx")]-=S*L,n[l(d,"dy")]-=x*L)):(C=Math.sqrt(S*S+x*x),C>0&&(L=E*n[l(p,"mass")]*n[l(d,"mass")]/C/C,n[l(p,"dx")]+=S*L,n[l(p,"dy")]+=x*L,n[l(d,"dx")]-=S*L,n[l(d,"dy")]-=x*L))}g=t.settings.gravity/t.settings.scalingRatio,E=t.settings.scalingRatio;for(f=0;f<t.nodesLength;f+=t.ppn)L=0,S=n[l(f,"x")],x=n[l(f,"y")],C=Math.sqrt(Math.pow(S,2)+Math.pow(x,2)),t.settings.strongGravityMode?C>0&&(L=E*n[l(f,"mass")]*g):C>0&&(L=E*n[l(f,"mass")]*g/C),n[l(f,"dx")]-=S*L,n[l(f,"dy")]-=x*L;E=1*(t.settings.outboundAttractionDistribution?w:1);for(v=0;v<t.edgesLength;v+=t.ppe)p=r[c(v,"source")],d=r[c(v,"target")],m=r[c(v,"weight")],T=Math.pow(m,t.settings.edgeWeightInfluence),S=n[l(p,"x")]-n[l(d,"x")],x=n[l(p,"y")]-n[l(d,"y")],t.settings.adjustSizes?(C=Math.sqrt(Math.pow(S,2)+Math.pow(x,2)-n[l(p,"size")]-n[l(d,"size")]),t.settings.linLogMode?t.settings.outboundAttractionDistribution?C>0&&(L=-E*T*Math.log(1+C)/C/n[l(p,"mass")]):C>0&&(L=-E*T*Math.log(1+C)/C):t.settings.outboundAttractionDistribution?C>0&&(L=-E*T/n[l(p,"mass")]):C>0&&(L=-E*T)):(C=Math.sqrt(Math.pow(S,2)+Math.pow(x,2)),t.settings.linLogMode?t.settings.outboundAttractionDistribution?C>0&&(L=-E*T*Math.log(1+C)/C/n[l(p,"mass")]):C>0&&(L=-E*T*Math.log(1+C)/C):t.settings.outboundAttractionDistribution?(C=1,L=-E*T/n[l(p,"mass")]):(C=1,L=-E*T)),C>0&&(n[l(p,"dx")]+=S*L,n[l(p,"dy")]+=x*L,n[l(d,"dx")]-=S*L,n[l(d,"dy")]-=x*L);var F,I,q,R;if(t.settings.adjustSizes)for(f=0;f<t.nodesLength;f+=t.ppn)n[l(f,"fixed")]||(F=Math.sqrt(Math.pow(n[l(f,"dx")],2)+Math.pow(n[l(f,"dy")],2)),F>t.maxForce&&(n[l(f,"dx")]=n[l(f,"dx")]*t.maxForce/F,n[l(f,"dy")]=n[l(f,"dy")]*t.maxForce/F),I=n[l(f,"mass")]*Math.sqrt((n[l(f,"old_dx")]-n[l(f,"dx")])*(n[l(f,"old_dx")]-n[l(f,"dx")])+(n[l(f,"old_dy")]-n[l(f,"dy")])*(n[l(f,"old_dy")]-n[l(f,"dy")])),q=Math.sqrt((n[l(f,"old_dx")]+n[l(f,"dx")])*(n[l(f,"old_dx")]+n[l(f,"dx")])+(n[l(f,"old_dy")]+n[l(f,"dy")])*(n[l(f,"old_dy")]+n[l(f,"dy")]))/2,R=.1*Math.log(1+q)/(1+Math.sqrt(I)),n[l(f,"x")]=n[l(f,"x")]+n[l(f,"dx")]*(R/t.settings.slowDown),n[l(f,"y")]=n[l(f,"y")]+n[l(f,"dy")]*(R/t.settings.slowDown));else for(f=0;f<t.nodesLength;f+=t.ppn)n[l(f,"fixed")]||(I=n[l(f,"mass")]*Math.sqrt((n[l(f,"old_dx")]-n[l(f,"dx")])*(n[l(f,"old_dx")]-n[l(f,"dx")])+(n[l(f,"old_dy")]-n[l(f,"dy")])*(n[l(f,"old_dy")]-n[l(f,"dy")])),q=Math.sqrt((n[l(f,"old_dx")]+n[l(f,"dx")])*(n[l(f,"old_dx")]+n[l(f,"dx")])+(n[l(f,"old_dy")]+n[l(f,"dy")])*(n[l(f,"old_dy")]+n[l(f,"dy")]))/2,R=n[l(f,"convergence")]*Math.log(1+q)/(1+Math.sqrt(I)),n[l(f,"convergence")]=Math.min(1,Math.sqrt(R*(Math.pow(n[l(f,"dx")],2)+Math.pow(n[l(f,"dy")],2))/(1+Math.sqrt(I)))),n[l(f,"x")]=n[l(f,"x")]+n[l(f,"dx")]*(R/t.settings.slowDown),n[l(f,"y")]=n[l(f,"y")]+n[l(f,"dy")]*(R/t.settings.slowDown));t.iterations++}function y(e){for(var t=0;t<e;t++)m();g()}var t={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1}},n,r,i,u={x:0,y:1,dx:2,dy:3,old_dx:4,old_dy:5,mass:6,convergence:7,size:8,fixed:9},a={source:0,target:1,weight:2},f={node:0,centerX:1,centerY:2,size:3,nextSibling:4,firstChild:5,mass:6,massCenterX:7,massCenterY:8},g;typeof window!="undefined"&&window.document?g=function(){var e;document.createEvent?(e=document.createEvent("Event"),e.initEvent("newCoords",!0,!1)):(e=document.createEventObject(),e.eventType="newCoords"),e.eventName="newCoords",e.data={nodes:n.buffer},requestAnimationFrame(function(){document.dispatchEvent(e)})}:g=function(){self.postMessage({nodes:n.buffer},[n.buffer])};var b=function(e){switch(e.data.action){case"start":d(new Float32Array(e.data.nodes),new Float32Array(e.data.edges),e.data.config),y(t.settings.startingIterations);break;case"loop":n=new Float32Array(e.data.nodes),y(t.settings.iterationsPerRender);break;case"config":v(e.data.config);break;case"kill":o(t),n=null,r=null,i=null,self.removeEventListener("message",b);break;default:}};self.addEventListener("message",b)};if(inWebWorker)eval(getWorkerFn());else{if(typeof sigma=="undefined")throw"sigma is not declared";sigma.prototype.getForceAtlas2Worker=getWorkerFn}}.call(this),function(undefined){"use strict";function Supervisor(sigInst,options){var _this=this,workerFn=sigInst.getForceAtlas2Worker&&sigInst.getForceAtlas2Worker();options=options||{},_root.URL=_root.URL||_root.webkitURL,this.sigInst=sigInst,this.graph=this.sigInst.graph,this.ppn=10,this.ppe=3,this.config={},this.shouldUseWorker=options.worker===!1?!1:webWorkers,this.workerUrl=options.workerUrl,this.started=!1,this.running=!1;if(this.shouldUseWorker){if(!this.workerUrl){var blob=this.makeBlob(workerFn);this.worker=new Worker(URL.createObjectURL(blob))}else this.worker=new Worker(this.workerUrl);this.worker.postMessage=this.worker.webkitPostMessage||this.worker.postMessage}else eval(workerFn);this.msgName=this.worker?"message":"newCoords",this.listener=function(e){_this.nodesByteArray=new Float32Array(e.data.nodes),_this.running&&(_this.applyLayoutChanges(),_this.sendByteArrayToWorker(),_this.sigInst.refresh())},(this.worker||document).addEventListener(this.msgName,this.listener),this.graphToByteArrays(),sigInst.bind("kill",function(){sigInst.killForceAtlas2()})}if(typeof sigma=="undefined")throw"sigma is not declared";var _root=this,webWorkers="Worker"in _root;Supervisor.prototype.makeBlob=function(e){var t;try{t=new Blob([e],{type:"application/javascript"})}catch(n){_root.BlobBuilder=_root.BlobBuilder||_root.WebKitBlobBuilder||_root.MozBlobBuilder,t=new BlobBuilder,t.append(e),t=t.getBlob()}return t},Supervisor.prototype.graphToByteArrays=function(){var e=this.graph.nodes(),t=this.graph.edges(),n=e.length*this.ppn,r=t.length*this.ppe,i={},s,o,u;this.nodesByteArray=new Float32Array(n),this.edgesByteArray=new Float32Array(r);for(s=o=0,u=e.length;s<u;s++)i[e[s].id]=o,this.nodesByteArray[o]=e[s].x,this.nodesByteArray[o+1]=e[s].y,this.nodesByteArray[o+2]=0,this.nodesByteArray[o+3]=0,this.nodesByteArray[o+4]=0,this.nodesByteArray[o+5]=0,this.nodesByteArray[o+6]=1+this.graph.degree(e[s].id),this.nodesByteArray[o+7]=1,this.nodesByteArray[o+8]=e[s].size,this.nodesByteArray[o+9]=0,o+=this.ppn;for(s=o=0,u=t.length;s<u;s++)this.edgesByteArray[o]=i[t[s].source],this.edgesByteArray[o+1]=i[t[s].target],this.edgesByteArray[o+2]=t[s].weight||0,o+=this.ppe},Supervisor.prototype.applyLayoutChanges=function(){var e=this.graph.nodes(),t=0,n;for(var r=0,i=this.nodesByteArray.length;r<i;r+=this.ppn)e[t].x=this.nodesByteArray[r],e[t].y=this.nodesByteArray[r+1],t++},Supervisor.prototype.sendByteArrayToWorker=function(e){var t={action:e||"loop",nodes:this.nodesByteArray.buffer},n=[this.nodesByteArray.buffer];e==="start"&&(t.config=this.config||{},t.edges=this.edgesByteArray.buffer,n.push(this.edgesByteArray.buffer)),this.shouldUseWorker?this.worker.postMessage(t,n):_root.postMessage(t,"*")},Supervisor.prototype.start=function(){if(this.running)return;this.running=!0;var e,t;for(e in this.sigInst.cameras)t=this.sigInst.cameras[e],t.edgequadtree._enabled=!1;this.started?this.sendByteArrayToWorker():(this.sendByteArrayToWorker("start"),this.started=!0)},Supervisor.prototype.stop=function(){if(!this.running)return;var e,t,n;for(e in this.sigInst.cameras)t=this.sigInst.cameras[e],t.edgequadtree._enabled=!0,n=sigma.utils.getBoundaries(this.graph,t.readPrefix),t.settings("drawEdges")&&t.settings("enableEdgeHovering")&&t.edgequadtree.index(this.sigInst.graph,{prefix:t.readPrefix,bounds:{x:n.minX,y:n.minY,width:n.maxX-n.minX,height:n.maxY-n.minY}});this.running=!1},Supervisor.prototype.killWorker=function(){this.worker?this.worker.terminate():(_root.postMessage({action:"kill"},"*"),document.removeEventListener(this.msgName,this.listener))},Supervisor.prototype.configure=function(e){this.config=e;if(!this.started)return;var t={action:"config",config:this.config};this.shouldUseWorker?this.worker.postMessage(t):_root.postMessage(t,"*")},sigma.prototype.startForceAtlas2=function(e){return this.supervisor||(this.supervisor=new Supervisor(this,e)),e&&this.supervisor.configure(e),this.supervisor.start(),this},sigma.prototype.stopForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this):this},sigma.prototype.killForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this.supervisor.killWorker(),this.supervisor=null,this):this},sigma.prototype.configForceAtlas2=function(e){return this.supervisor||(this.supervisor=new Supervisor(this,e)),this.supervisor.configure(e),this},sigma.prototype.isForceAtlas2Running=function(e){return!!this.supervisor&&this.supervisor.running}}.call(this),function(undefined){"use strict";function crush(e){var t,n,r,i=["x","y","dx","dy","old_dx","old_dy","mass","convergence","size","fixed"],s=["source","target","weight"],o=["node","centerX","centerY","size","nextSibling","firstChild","mass","massCenterX","massCenterY"];for(n=0,r=o.length;n<r;n++)t=new RegExp("rp\\(([^,]*), '"+o[n]+"'\\)","g"),e=e.replace(t,n===0?"$1":"$1 + "+n);for(n=0,r=i.length;n<r;n++)t=new RegExp("np\\(([^,]*), '"+i[n]+"'\\)","g"),e=e.replace(t,n===0?"$1":"$1 + "+n);for(n=0,r=s.length;n<r;n++)t=new RegExp("ep\\(([^,]*), '"+s[n]+"'\\)","g"),e=e.replace(t,n===0?"$1":"$1 + "+n);return e}function getWorkerFn(){var e=crush?crush(Worker.toString()):Worker.toString();return";("+e+").call(this);"}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layouts");var _root=this,inWebWorker=!("document"in _root),Worker=function(e){function s(){var e,t,n={},r=arguments.length;for(e=r-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n}function o(e){var t;for(t in e)(!("hasOwnProperty"in e)||e.hasOwnProperty(t))&&delete e[t];return e}function u(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function a(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d;u=r-e,a=i-t,f=Math.sqrt(a*a+u*u);if(f>n+s)return!1;if(f<Math.abs(n-s))return!1;o=(n*n-s*s+f*f)/(2*f),p=e+u*o/f,d=t+a*o/f,l=Math.sqrt(n*n-o*o),c=-a*(l/f),h=u*(l/f);var v=p+c,m=p-c,g=d+h,y=d-h;return{xi:v,xi_prime:m,yi:g,yi_prime:y}}function f(e,t,n,r,i,s,o,u){var a,f,l,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return a=(u-s)*(n-e)-(o-i)*(r-t),a==0?p:(f=t-s,l=e-i,c=(o-i)*f-(u-s)*l,h=(n-e)*f-(r-t)*l,f=c/a,l=h/a,p.x=e+f*(n-e),p.y=t+f*(r-t),f>0&&f<1&&(p.onLine1=!0),l>0&&l<1&&(p.onLine2=!0),p)}function l(e,t,n,r,i){return(i-r)*(e-t)/(n-t)+r}function c(e){return Math.acos(e.x/Math.sqrt(e.x*e.x+e.y*e.y))}function h(e,t,n,r){return{xi:-(r-t),yi:n-e,xi_prime:r-t,yi_prime:-(n-e)}}function p(e,t){return{x:(e.xi_prime-e.xi)/t,y:(e.yi_prime-e.yi)/t}}function d(e,t,n,r,i){return{x:e+(n-e)*i,y:t+(r-t)*i}}function y(e,n){if(e%t.ppn!==0)throw new Error('Invalid argument in np: "i" is not correct ('+e+").");if(e!==parseInt(e))throw new TypeError('Invalid argument in np: "i" is not an integer.');if(n in v)return e+v[n];throw new Error("ForceLink.Worker - Inexistant node property given ("+n+").")}function b(e,n){if(e%t.ppe!==0)throw new Error('Invalid argument in ep: "i" is not correct ('+e+").");if(e!==parseInt(e))throw new TypeError('Invalid argument in ep: "i" is not an integer.');if(n in m)return e+m[n];throw new Error("ForceLink.Worker - Inexistant edge property given ("+n+").")}function w(e,n){if(e%t.ppr!==0)throw new Error('Invalid argument in rp: "i" is not correct ('+e+").");if(e!==parseInt(e))throw new TypeError('Invalid argument in rp: "i" is not an integer.');if(n in g)return e+g[n];throw new Error("ForceLink.Worker - Inexistant region property given ("+n+").")}function E(e){if(isNaN(e))throw new TypeError("NaN alert!")}function S(e,i,s){s=s||{};var o,u;n=e,r=i,t.nodesLength=n.length,t.edgesLength=r.length,x(s)}function x(e){t.settings=s(e,t.settings)}function T(){var e,s,o,a,f,v,m,g,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B;for(v=0;v<t.nodesLength;v+=t.ppn)n[y(v,"old_dx")]=n[y(v,"dx")],n[y(v,"old_dy")]=n[y(v,"dy")],n[y(v,"dx")]=0,n[y(v,"dy")]=0;if(t.settings.outboundAttractionDistribution){C=0;for(v=0;v<t.nodesLength;v+=t.ppn)C+=n[y(v,"mass")];C/=t.nodesLength}if(t.settings.barnesHutOptimize){var j=Infinity,F=-Infinity,I=Infinity,q=-Infinity,R,U,z,X,V;i=[];for(v=0;v<t.nodesLength;v+=t.ppn)j=Math.min(j,n[y(v,"x")]),F=Math.max(F,n[y(v,"x")]),I=Math.min(I,n[y(v,"y")]),q=Math.max(q,n[y(v,"y")]);i[w(0,"node")]=-1,i[w(0,"centerX")]=(j+F)/2,i[w(0,"centerY")]=(I+q)/2,i[w(0,"size")]=Math.max(F-j,q-I),i[w(0,"nextSibling")]=-1,i[w(0,"firstChild")]=-1,i[w(0,"mass")]=0,i[w(0,"massCenterX")]=0,i[w(0,"massCenterY")]=0,a=1;for(v=0;v<t.nodesLength;v+=t.ppn){f=0;for(;;){if(i[w(f,"firstChild")]>=0){n[y(v,"x")]<i[w(f,"centerX")]?n[y(v,"y")]<i[w(f,"centerY")]?R=i[w(f,"firstChild")]:R=i[w(f,"firstChild")]+t.ppr:n[y(v,"y")]<i[w(f,"centerY")]?R=i[w(f,"firstChild")]+t.ppr*2:R=i[w(f,"firstChild")]+t.ppr*3,i[w(f,"massCenterX")]=(i[w(f,"massCenterX")]*i[w(f,"mass")]+n[y(v,"x")]*n[y(v,"mass")])/(i[w(f,"mass")]+n[y(v,"mass")]),i[w(f,"massCenterY")]=(i[w(f,"massCenterY")]*i[w(f,"mass")]+n[y(v,"y")]*n[y(v,"mass")])/(i[w(f,"mass")]+n[y(v,"mass")]),i[w(f,"mass")]+=n[y(v,"mass")],f=R;continue}if(i[w(f,"node")]<0){i[w(f,"node")]=v;break}i[w(f,"firstChild")]=a*t.ppr,S=i[w(f,"size")]/2,x=i[w(f,"firstChild")],i[w(x,"node")]=-1,i[w(x,"centerX")]=i[w(f,"centerX")]-S,i[w(x,"centerY")]=i[w(f,"centerY")]-S,i[w(x,"size")]=S,i[w(x,"nextSibling")]=x+t.ppr,i[w(x,"firstChild")]=-1,i[w(x,"mass")]=0,i[w(x,"massCenterX")]=0,i[w(x,"massCenterY")]=0,x+=t.ppr,i[w(x,"node")]=-1,i[w(x,"centerX")]=i[w(f,"centerX")]-S,i[w(x,"centerY")]=i[w(f,"centerY")]+S,i[w(x,"size")]=S,i[w(x,"nextSibling")]=x+t.ppr,i[w(x,"firstChild")]=-1,i[w(x,"mass")]=0,i[w(x,"massCenterX")]=0,i[w(x,"massCenterY")]=0,x+=t.ppr,i[w(x,"node")]=-1,i[w(x,"centerX")]=i[w(f,"centerX")]+S,i[w(x,"centerY")]=i[w(f,"centerY")]-S,i[w(x,"size")]=S,i[w(x,"nextSibling")]=x+t.ppr,i[w(x,"firstChild")]=-1,i[w(x,"mass")]=0,i[w(x,"massCenterX")]=0,i[w(x,"massCenterY")]=0,x+=t.ppr,i[w(x,"node")]=-1,i[w(x,"centerX")]=i[w(f,"centerX")]+S,i[w(x,"centerY")]=i[w(f,"centerY")]+S,i[w(x,"size")]=S,i[w(x,"nextSibling")]=i[w(f,"nextSibling")],i[w(x,"firstChild")]=-1,i[w(x,"mass")]=0,i[w(x,"massCenterX")]=0,i[w(x,"massCenterY")]=0,a+=4,n[y(i[w(f,"node")],"x")]<i[w(f,"centerX")]?n[y(i[w(f,"node")],"y")]<i[w(f,"centerY")]?R=i[w(f,"firstChild")]:R=i[w(f,"firstChild")]+t.ppr:n[y(i[w(f,"node")],"y")]<i[w(f,"centerY")]?R=i[w(f,"firstChild")]+t.ppr*2:R=i[w(f,"firstChild")]+t.ppr*3,i[w(f,"mass")]=n[y(i[w(f,"node")],"mass")],i[w(f,"massCenterX")]=n[y(i[w(f,"node")],"x")],i[w(f,"massCenterY")]=n[y(i[w(f,"node")],"y")],i[w(R,"node")]=i[w(f,"node")],i[w(f,"node")]=-1,n[y(v,"x")]<i[w(f,"centerX")]?n[y(v,"y")]<i[w(f,"centerY")]?X=i[w(f,"firstChild")]:X=i[w(f,"firstChild")]+t.ppr:n[y(v,"y")]<i[w(f,"centerY")]?X=i[w(f,"firstChild")]+t.ppr*2:X=i[w(f,"firstChild")]+t.ppr*3;if(R===X){f=R;continue}i[w(X,"node")]=v;break}}}if(t.settings.barnesHutOptimize){k=t.settings.scalingRatio;for(v=0;v<t.nodesLength;v+=t.ppn){f=0;for(;;){if(i[w(f,"firstChild")]>=0){P=Math.sqrt((n[y(v,"x")]-i[w(f,"massCenterX")])*(n[y(v,"x")]-i[w(f,"massCenterX")])+(n[y(v,"y")]-i[w(f,"massCenterY")])*(n[y(v,"y")]-i[w(f,"massCenterY")]));if(2*i[w(f,"size")]/P<t.settings.barnesHutTheta){L=n[y(v,"x")]-i[w(f,"massCenterX")],A=n[y(v,"y")]-i[w(f,"massCenterY")],t.settings.adjustSize?P>0?(B=k*n[y(v,"mass")]*i[w(f,"mass")]/P/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B):P<0&&(B=-k*n[y(v,"mass")]*i[w(f,"mass")]/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B):P>0&&(B=k*n[y(v,"mass")]*i[w(f,"mass")]/P/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B);if(i[w(f,"nextSibling")]<0)break;f=i[w(f,"nextSibling")];continue}f=i[w(f,"firstChild")];continue}i[w(f,"node")]>=0&&i[w(f,"node")]!==v&&(L=n[y(v,"x")]-n[y(i[w(f,"node")],"x")],A=n[y(v,"y")]-n[y(i[w(f,"node")],"y")],P=Math.sqrt(L*L+A*A),t.settings.adjustSize?P>0?(B=k*n[y(v,"mass")]*n[y(i[w(f,"node")],"mass")]/P/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B):P<0&&(B=-k*n[y(v,"mass")]*n[y(i[w(f,"node")],"mass")]/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B):P>0&&(B=k*n[y(v,"mass")]*n[y(i[w(f,"node")],"mass")]/P/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B));if(i[w(f,"nextSibling")]<0)break;f=i[w(f,"nextSibling")];continue}}}else{k=t.settings.scalingRatio;for(m=0;m<t.nodesLength;m+=t.ppn)for(g=0;g<m;g+=t.ppn)L=n[y(m,"x")]-n[y(g,"x")],A=n[y(m,"y")]-n[y(g,"y")],t.settings.adjustSize?(P=Math.sqrt(L*L+A*A)-n[y(m,"size")]-n[y(g,"size")],P>0?(B=k*n[y(m,"mass")]*n[y(g,"mass")]/P/P,n[y(m,"dx")]+=L*B,n[y(m,"dy")]+=A*B,n[y(g,"dx")]+=L*B,n[y(g,"dy")]+=A*B):P<0&&(B=100*k*n[y(m,"mass")]*n[y(g,"mass")],n[y(m,"dx")]+=L*B,n[y(m,"dy")]+=A*B,n[y(g,"dx")]-=L*B,n[y(g,"dy")]-=A*B)):(P=Math.sqrt(L*L+A*A),P>0&&(B=k*n[y(m,"mass")]*n[y(g,"mass")]/P/P,n[y(m,"dx")]+=L*B,n[y(m,"dy")]+=A*B,n[y(g,"dx")]-=L*B,n[y(g,"dy")]-=A*B))}x=t.settings.gravity/t.settings.scalingRatio,k=t.settings.scalingRatio;for(v=0;v<t.nodesLength;v+=t.ppn)B=0,L=n[y(v,"x")],A=n[y(v,"y")],P=Math.sqrt(L*L+A*A),t.settings.strongGravityMode?P>0&&(B=k*n[y(v,"mass")]*x):P>0&&(B=k*n[y(v,"mass")]*x/P),n[y(v,"dx")]-=L*B,n[y(v,"dy")]-=A*B;k=1*(t.settings.outboundAttractionDistribution?C:1);for(E=0;E<t.edgesLength;E+=t.ppe)m=r[b(E,"source")],g=r[b(E,"target")],S=r[b(E,"weight")],_=Math.pow(S,t.settings.edgeWeightInfluence),L=n[y(m,"x")]-n[y(g,"x")],A=n[y(m,"y")]-n[y(g,"y")],t.settings.adjustSizes?(P=Math.sqrt(L*L+A*A-n[y(m,"size")]-n[y(g,"size")]),t.settings.linLogMode?t.settings.outboundAttractionDistribution?P>0&&(B=-k*_*Math.log(1+P)/P/n[y(m,"mass")]):P>0&&(B=-k*_*Math.log(1+P)/P):t.settings.outboundAttractionDistribution?P>0&&(B=-k*_/n[y(m,"mass")]):P>0&&(B=-k*_)):(P=Math.sqrt(L*L+A*A),t.settings.linLogMode?t.settings.outboundAttractionDistribution?P>0&&(B=-k*_*Math.log(1+P)/P/n[y(m,"mass")]):P>0&&(B=-k*_*Math.log(1+P)/P):t.settings.outboundAttractionDistribution?(P=1,B=-k*_/n[y(m,"mass")]):(P=1,B=-k*_)),P>0&&(n[y(m,"dx")]+=L*B,n[y(m,"dy")]+=A*B,n[y(g,"dx")]-=L*B,n[y(g,"dy")]-=A*B);var $,J,K,Q,G=0;if(t.settings.adjustSizes)for(v=0;v<t.nodesLength;v+=t.ppn)n[y(v,"fixed")]||($=Math.sqrt(n[y(v,"dx")]*n[y(v,"dx")]+n[y(v,"dy")]*n[y(v,"dy")]),$>t.maxForce&&(n[y(v,"dx")]=n[y(v,"dx")]*t.maxForce/$,n[y(v,"dy")]=n[y(v,"dy")]*t.maxForce/$),J=n[y(v,"mass")]*Math.sqrt((n[y(v,"old_dx")]-n[y(v,"dx")])*(n[y(v,"old_dx")]-n[y(v,"dx")])+(n[y(v,"old_dy")]-n[y(v,"dy")])*(n[y(v,"old_dy")]-n[y(v,"dy")])),K=Math.sqrt((n[y(v,"old_dx")]+n[y(v,"dx")])*(n[y(v,"old_dx")]+n[y(v,"dx")])+(n[y(v,"old_dy")]+n[y(v,"dy")])*(n[y(v,"old_dy")]+n[y(v,"dy")]))/2,Q=.1*Math.log(1+K)/(1+Math.sqrt(J)),O=n[y(v,"x")],M=n[y(v,"y")],n[y(v,"x")]=n[y(v,"x")]+n[y(v,"dx")]*(Q/t.settings.slowDown),n[y(v,"y")]=n[y(v,"y")]+n[y(v,"dy")]*(Q/t.settings.slowDown),L=n[y(v,"x")],A=n[y(v,"y")],P=Math.sqrt((L-O)*(L-O)+(A-M)*(A-M)),G+=P);else for(v=0;v<t.nodesLength;v+=t.ppn)n[y(v,"fixed")]||(J=n[y(v,"mass")]*Math.sqrt((n[y(v,"old_dx")]-n[y(v,"dx")])*(n[y(v,"old_dx")]-n[y(v,"dx")])+(n[y(v,"old_dy")]-n[y(v,"dy")])*(n[y(v,"old_dy")]-n[y(v,"dy")])),K=Math.sqrt((n[y(v,"old_dx")]+n[y(v,"dx")])*(n[y(v,"old_dx")]+n[y(v,"dx")])+(n[y(v,"old_dy")]+n[y(v,"dy")])*(n[y(v,"old_dy")]+n[y(v,"dy")]))/2,Q=n[y(v,"convergence")]*Math.log(1+K)/(1+Math.sqrt(J)),n[y(v,"convergence")]=Math.min(1,Math.sqrt(Q*(n[y(v,"dx")]*n[y(v,"dx")]+n[y(v,"dy")]*n[y(v,"dy")])/(1+Math.sqrt(J)))),O=n[y(v,"x")],M=n[y(v,"y")],n[y(v,"x")]=n[y(v,"x")]+n[y(v,"dx")]*(Q/t.settings.slowDown),n[y(v,"y")]=n[y(v,"y")]+n[y(v,"dy")]*(Q/t.settings.slowDown),L=n[y(v,"x")],A=n[y(v,"y")],P=Math.sqrt((L-O)*(L-O)+(A-M)*(A-M)),G+=P);t.iterations++;if(t.settings.autoStop){t.converged=t.iterations>t.settings.maxIterations||G/t.nodesLength<t.settings.avgDistanceThreshold;if(t.converged&&t.settings.alignNodeSiblings){var Y={},Z={},et,tt;for(E=0;E<t.edgesLength;E+=t.ppe){m=r[b(E,"source")],g=r[b(E,"target")];if(m===g)continue;Y[m]=Y[m]||{},Y[g]=Y[g]||{},Y[m][g]=!0,Y[g][m]=!0}Object.keys(Y).forEach(function(e){e=~~e,tt=Object.keys(Y[e]),tt.length==2&&(et=tt[0]+";"+tt[1],et in Z?Z[et].push(e):(et=tt[1]+";"+tt[0],Z[et]||(Z[et]=[~~tt[1],~~tt[0]]),Z[et].push(e)))});var nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt=t.settings.nodeSiblingsAngleMin;Object.keys(Z).forEach(function(e){rt=Z[e].shift(),it=Z[e].shift(),nt=Z[e].filter(function(e){return!n[y(e,"fixed")]});if(nt.length==1)return;ut=n[y(rt,"x")],at=n[y(rt,"y")],ft=n[y(it,"x")],lt=n[y(it,"y")],st=Object.keys(Y[rt]).length,ot=Object.keys(Y[it]).length,ct=l(st/(st+ot),0,1,.25,.75),pt=d(ut,at,ft,lt,ct),dt=h(ut,at,ft,lt),ht=u(ut,at,ft,lt),vt=p(dt,ht),mt=c(vt);if(2*gt>Math.PI)throw new Error("ForceLink.Worker - Invalid parameter: angleMin must be smaller than 2 PI.");if(gt>0)if(mt<gt||mt>Math.PI-gt&&mt<=Math.PI)vt={x:Math.cos(Math.PI-gt)*2,y:Math.sin(Math.PI-gt)*2};else if(mt>2*Math.PI-gt||mt>=Math.PI&&mt<Math.PI+gt)vt={x:Math.cos(gt)*2,y:Math.sin(gt)*2};var r=0,i=1,s=1;nt.length%2==1&&(s=0,r=1);for(var o=0;o<nt.length;o++)n[y(nt[o],"x")]=pt.x+i*vt.x*s*(r||o>=2?t.settings.nodeSiblingsScale:t.settings.nodeSiblingsScale*2/3),n[y(nt[o],"y")]=pt.y+i*vt.y*s*(r||o>=2?t.settings.nodeSiblingsScale:t.settings.nodeSiblingsScale*2/3),i=-i,s+=(o+r)%2})}}}function C(e){for(var t=0;t<e;t++)T();N()}var t={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1,maxIterations:1e3,avgDistanceThreshold:.01,autoStop:!1,alignNodeSiblings:!1,nodeSiblingsScale:1,nodeSiblingsAngleMin:0}},n,r,i,v={x:0,y:1,dx:2,dy:3,old_dx:4,old_dy:5,mass:6,convergence:7,size:8,fixed:9},m={source:0,target:1,weight:2},g={node:0,centerX:1,centerY:2,size:3,nextSibling:4,firstChild:5,mass:6,massCenterX:7,massCenterY:8},N;typeof window!="undefined"&&window.document?N=function(){if(!t.autoStop||t.converged){var e;document.createEvent?(e=document.createEvent("Event"),e.initEvent("newCoords",!0,!1)):(e=document.createEventObject(),e.eventType="newCoords"),e.eventName="newCoords",e.data={nodes:n.buffer,converged:t.converged},requestAnimationFrame(function(){document.dispatchEvent(e)})}}:N=function(){(!t.autoStop||t.converged)&&self.postMessage({nodes:n.buffer,converged:t.converged},[n.buffer])};var k=function(e){switch(e.data.action){case"start":S(new Float32Array(e.data.nodes),new Float32Array(e.data.edges),e.data.config),C(t.settings.startingIterations);break;case"loop":n=new Float32Array(e.data.nodes),C(t.settings.iterationsPerRender);break;case"config":x(e.data.config);break;case"kill":o(t),n=null,r=null,i=null,self.removeEventListener("message",k);break;default:}};self.addEventListener("message",k)};if(inWebWorker)eval(getWorkerFn());else{if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.layouts.getForceLinkWorker=getWorkerFn}}.call(this),function(undefined){"use strict";function Supervisor(e,t){_root.URL=_root.URL||_root.webkitURL,t=t||{},this.sigInst=e,this.graph=this.sigInst.graph,this.ppn=10,this.ppe=3,this.config={},this.worker=null,this.shouldUseWorker=null,this.workerUrl=null,this.runOnBackground=null,this.easing=null,this.randomize=null,this.configure(t),this.started=!1,this.running=!1,this.initWorker()}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layouts");var _root=this,webWorkers="Worker"in _root,eventEmitter={};sigma.classes.dispatcher.extend(eventEmitter),Supervisor.prototype.makeBlob=function(e){var t;try{t=new Blob([e],{type:"application/javascript"})}catch(n){_root.BlobBuilder=_root.BlobBuilder||_root.WebKitBlobBuilder||_root.MozBlobBuilder,t=new BlobBuilder,t.append(e),t=t.getBlob()}return t},Supervisor.prototype.graphToByteArrays=function(){var e=this.graph.nodes(),t=this.graph.edges(),n=e.length*this.ppn,r=t.length*this.ppe,i={},s,o,u;this.nodesByteArray=new Float32Array(n),this.edgesByteArray=new Float32Array(r);for(s=o=0,u=e.length;s<u;s++)i[e[s].id]=o,this.nodesByteArray[o]=this.randomize(e[s].x),this.nodesByteArray[o+1]=this.randomize(e[s].y),this.nodesByteArray[o+2]=0,this.nodesByteArray[o+3]=0,this.nodesByteArray[o+4]=0,this.nodesByteArray[o+5]=0,this.nodesByteArray[o+6]=1+this.graph.degree(e[s].id),this.nodesByteArray[o+7]=1,this.nodesByteArray[o+8]=e[s].size,this.nodesByteArray[o+9]=e[s].fixed||0,o+=this.ppn;for(s=o=0,u=t.length;s<u;s++)this.edgesByteArray[o]=i[t[s].source],this.edgesByteArray[o+1]=i[t[s].target],this.edgesByteArray[o+2]=t[s].weight||0,o+=this.ppe},Supervisor.prototype.applyLayoutChanges=function(e){var t=this.graph.nodes(),n=0,r;for(var i=0,s=this.nodesByteArray.length;i<s;i+=this.ppn)t[n].fixed||(e?(t[n].fa2_x=this.nodesByteArray[i],t[n].fa2_y=this.nodesByteArray[i+1]):(t[n].x=this.nodesByteArray[i],t[n].y=this.nodesByteArray[i+1])),n++},Supervisor.prototype.sendByteArrayToWorker=function(e){var t={action:e||"loop",nodes:this.nodesByteArray.buffer},n=[this.nodesByteArray.buffer];e==="start"&&(t.config=this.config||{},t.edges=this.edgesByteArray.buffer,n.push(this.edgesByteArray.buffer)),this.shouldUseWorker?this.worker.postMessage(t,n):_root.postMessage(t,"*")},Supervisor.prototype.start=function(){if(this.running)return;this.running=!0,this.started?this.sendByteArrayToWorker():(this.sendByteArrayToWorker("start"),this.started=!0,eventEmitter.dispatchEvent("start"))},Supervisor.prototype.stop=function(){if(!this.running)return;this.running=!1,eventEmitter.dispatchEvent("stop")},Supervisor.prototype.initWorker=function(){var _this=this,workerFn=sigma.layouts.getForceLinkWorker();if(this.shouldUseWorker){if(!this.workerUrl){var blob=this.makeBlob(workerFn);this.worker=new Worker(URL.createObjectURL(blob))}else this.worker=new Worker(this.workerUrl);this.worker.postMessage=this.worker.webkitPostMessage||this.worker.postMessage}else eval(workerFn);this.msgName=this.worker?"message":"newCoords",this.listener=function(e){_this.nodesByteArray=new Float32Array(e.data.nodes),_this.running&&(_this.applyLayoutChanges(_this.runOnBackground),_this.sendByteArrayToWorker(),_this.runOnBackground||_this.sigInst.refresh({skipIndexation:!0})),e.data.converged&&(_this.running=!1),_this.running||(_this.killWorker(),_this.runOnBackground&&_this.easing?(_this.applyLayoutChanges(!0),eventEmitter.dispatchEvent("interpolate"),_this.graph.nodes().filter(function(e){return e.fixed}).forEach(function(e){e.fa2_x=e.x,e.fa2_y=e.y}),sigma.plugins.animate(_this.sigInst,{x:"fa2_x",y:"fa2_y"},{easing:_this.easing,onComplete:function(){_this.sigInst.refresh(),eventEmitter.dispatchEvent("stop")}})):(_this.applyLayoutChanges(!1),_this.sigInst.refresh(),eventEmitter.dispatchEvent("stop")))},(this.worker||document).addEventListener(this.msgName,this.listener),this.graphToByteArrays(),_this.sigInst.bind("kill",function(){sigma.layouts.killForceLink()})},Supervisor.prototype.killWorker=function(){this.worker?this.worker.terminate():(_root.postMessage({action:"kill"},"*"),document.removeEventListener(this.msgName,this.listener))},Supervisor.prototype.configure=function(e){this.config=e,this.shouldUseWorker=e.worker===!1?!1:webWorkers,this.workerUrl=e.workerUrl,this.runOnBackground=e.background?!0:!1,this.easing=e.easing;switch(e.randomize){case"globally":this.randomize=function(t){return Math.random()*(e.randomizeFactor||1)};break;case"locally":this.randomize=function(t){return t+Math.random()*(e.randomizeFactor||1)};break;default:this.randomize=function(e){return e}}if(!this.started)return;var t={action:"config",config:this.config};this.shouldUseWorker?this.worker.postMessage(t):_root.postMessage(t,"*")};var supervisor=null;sigma.layouts.startForceLink=function(e,t){return supervisor?supervisor.running||(supervisor.killWorker(),supervisor.initWorker(),supervisor.started=!1):supervisor=new Supervisor(e,t),t&&supervisor.configure(t),supervisor.start(),eventEmitter},sigma.layouts.stopForceLink=function(){if(!supervisor)return;return supervisor.stop(),supervisor},sigma.layouts.killForceLink=function(){if(!supervisor)return;supervisor.stop(),supervisor.killWorker(),supervisor=null,eventEmitter={},sigma.classes.dispatcher.extend(eventEmitter)},sigma.layouts.configForceLink=function(e,t
){return supervisor?supervisor.running||(supervisor.killWorker(),supervisor.initWorker(),supervisor.started=!1):supervisor=new Supervisor(e,t),supervisor.configure(t),eventEmitter},sigma.layouts.isForceLinkRunning=function(){return!!supervisor&&supervisor.running}}.call(this),function(e){"use strict";function i(){var e=this;this.init=function(e,n){n=n||{},this.sigInst=e,this.config=sigma.utils.extend(n,t),this.easing=n.easing,this.duration=n.duration;if(!sigma.plugins||typeof sigma.plugins.animate=="undefined")throw new Error("sigma.plugins.animate is not declared");this.running=!1},this.atomicGo=function(){if(!this.running||this.iterCount<1)return!1;var t=this.sigInst.graph.nodes(),n=this.sigInst.graph.edges(),r,i,s,o,u,a,f,l,c,h=t.length,p=n.length;this.config.area=this.config.autoArea?h*h:this.config.area,this.iterCount--,this.running=this.iterCount>0;var d=Math.sqrt(this.config.area)/10,v=Math.sqrt(this.config.area/(1+h));for(r=0;r<h;r++){s=t[r],s.fr||(s.fr_x=s.x,s.fr_y=s.y,s.fr={dx:0,dy:0});for(i=0;i<h;i++)o=t[i],s.id!=o.id&&(a=s.fr_x-o.fr_x,f=s.fr_y-o.fr_y,l=Math.sqrt(a*a+f*f)+.01,l>0&&(c=v*v/l,s.fr.dx+=a/l*c,s.fr.dy+=f/l*c))}var m,g,y;for(r=0;r<p;r++)u=n[r],m=e.sigInst.graph.nodes(u.source),g=e.sigInst.graph.nodes(u.target),a=m.fr_x-g.fr_x,f=m.fr_y-g.fr_y,l=Math.sqrt(a*a+f*f)+.01,y=l*l/v,l>0&&(m.fr.dx-=a/l*y,m.fr.dy-=f/l*y,g.fr.dx+=a/l*y,g.fr.dy+=f/l*y);var b,w,E;for(r=0;r<h;r++)s=t[r],b=Math.sqrt(s.fr_x*s.fr_x+s.fr_y*s.fr_y),w=.01*v*e.config.gravity*b,s.fr.dx-=w*s.fr_x/b,s.fr.dy-=w*s.fr_y/b,s.fr.dx*=e.config.speed,s.fr.dy*=e.config.speed,s.fixed||(a=s.fr.dx,f=s.fr.dy,l=Math.sqrt(a*a+f*f),l>0&&(E=Math.min(d*e.config.speed,l),s.fr_x+=a/l*E,s.fr_y+=f/l*E));return this.running},this.go=function(){this.iterCount=this.config.iterations;while(this.running)this.atomicGo();this.stop()},this.start=function(){if(this.running)return;var t=this.sigInst.graph.nodes();this.running=!0;for(var n=0;n<t.length;n++)t[n].fr_x=t[n].x,t[n].fr_y=t[n].y,t[n].fr={dx:0,dy:0};r[e.sigInst.id].dispatchEvent("start"),this.go()},this.stop=function(){var t=this.sigInst.graph.nodes();this.running=!1;if(this.easing)r[e.sigInst.id].dispatchEvent("interpolate"),sigma.plugins.animate(e.sigInst,{x:"fr_x",y:"fr_y"},{easing:e.easing,onComplete:function(){e.sigInst.refresh();for(var n=0;n<t.length;n++)t[n].fr=null,t[n].fr_x=null,t[n].fr_y=null;r[e.sigInst.id].dispatchEvent("stop")},duration:e.duration});else{for(var n=0;n<t.length;n++)t[n].x=t[n].fr_x,t[n].y=t[n].fr_y;this.sigInst.refresh();for(var n=0;n<t.length;n++)t[n].fr=null,t[n].fr_x=null,t[n].fr_y=null;r[e.sigInst.id].dispatchEvent("stop")}},this.kill=function(){this.sigInst=null,this.config=null,this.easing=null}}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layouts.fruchtermanReingold");var t={autoArea:!0,area:1,gravity:10,speed:.1,iterations:1e3},n={},r={};sigma.layouts.fruchtermanReingold.configure=function(e,t){if(!e)throw new Error('Missing argument: "sigInst"');if(!t)throw new Error('Missing argument: "config"');return n[e.id]||(n[e.id]=new i,r[e.id]={},sigma.classes.dispatcher.extend(r[e.id]),e.bind("kill",function(){n[e.id].kill(),n[e.id]=null,r[e.id]=null})),n[e.id].init(e,t),r[e.id]},sigma.layouts.fruchtermanReingold.start=function(e,t){if(!e)throw new Error('Missing argument: "sigInst"');return t&&this.configure(e,t),n[e.id].start(),r[e.id]},sigma.layouts.fruchtermanReingold.isRunning=function(e){if(!e)throw new Error('Missing argument: "sigInst"');return!!n[e.id]&&n[e.id].running},sigma.layouts.fruchtermanReingold.progress=function(e){if(!e)throw new Error('Missing argument: "sigInst"');return(n[e.id].config.iterations-n[e.id].iterCount)/n[e.id].config.iterations}}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.neo4j"),sigma.utils.pkg("sigma.utils"),sigma.utils.pkg("sigma.parsers"),sigma.neo4j.send=function(e,t,n,r,i){var s=sigma.utils.xhr(),o,u,a;o=e,typeof e=="object"&&(o=e.url,u=e.user,a=e.password);if(!s)throw"XMLHttpRequest not supported, cannot load the file.";o+=t,s.open(n,o,!0),u&&a&&s.setRequestHeader("Authorization","Basic "+btoa(u+":"+a)),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.onreadystatechange=function(){s.readyState===4&&i(JSON.parse(s.responseText))},s.send(r)},sigma.neo4j.cypher_parse=function(e){var t={nodes:[],edges:[]},n={},r={},i;Array.isArray(e)||(e=e.results[0].data),e.forEach(function(e){e.graph.nodes.forEach(function(e){var t={id:e.id,label:e.id,x:Math.random(),y:Math.random(),size:1,neo4j_labels:e.labels,neo4j_data:e.properties};t.id in n||(n[t.id]=t)}),e.graph.relationships.forEach(function(e){var t={id:e.id,label:e.type,source:e.startNode,target:e.endNode,neo4j_type:e.type,neo4j_data:e.properties};t.id in r||(r[t.id]=t)})});for(i in n)t.nodes.push(n[i]);for(i in r)t.edges.push(r[i]);return t},sigma.neo4j.cypher=function(e,t,n,r){var i="/db/data/transaction/commit",s,o;s=JSON.stringify({statements:[{statement:t,resultDataContents:["graph"],includeStats:!1}]}),o=function(e){return function(t){if(t.errors.length>0)return e(null,t.errors);var r={nodes:[],edges:[]};r=sigma.neo4j.cypher_parse(t),n instanceof sigma?(n.graph.clear(),n.graph.read(r)):typeof n=="object"?(n=new sigma(n),n.graph.read(r),n.refresh()):typeof n=="function"&&(e=n,n=null),e&&e(n||r)}},sigma.neo4j.send(e,i,"POST",s,o(r))},sigma.neo4j.getLabels=function(e,t){sigma.neo4j.send(e,"/db/data/labels","GET",null,t)},sigma.neo4j.getTypes=function(e,t){sigma.neo4j.send(e,"/db/data/relationship/types","GET",null,t)}}.call(this),function(e){"use strict";function n(e){var t={id:e.id,label:e.label};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}function r(e){var t={id:e.id,type:e.type||"undirected",label:e.label||"",source:e.source,target:e.target,weight:+e.weight||1};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}function i(e){function o(){var e={};return i.els.meta?(e.lastmodifieddate=i.els.meta.getAttribute("lastmodifieddate"),t.nodeListEach(i.els.meta.childNodes,function(t){e[t.tagName.toLowerCase()]=t.textContent}),e):e}function u(e){var n=[];return i.els.model[e]&&t.nodeListEach(i.els.model[e],function(e){var r={id:e.getAttribute("id")||e.getAttribute("for"),type:e.getAttribute("type")||"string",title:e.getAttribute("title")||""},i=t.nodeListToArray(e.childNodes);i.length>0&&(r.defaultValue=i[0].textContent),n.push(r)}),n.length>0?n:!1}function a(e,n){var r={},i=n.getElementsByTagName("attvalue"),s=t.nodeListToHash(i,function(e){var n=t.namedNodeMapToObject(e.attributes),r=n.id||n["for"];return{key:r,value:n.value}});return e.map(function(e){r[e.id]=!(e.id in s)&&"defaultValue"in e?t.enforceType(e.type,e.defaultValue):t.enforceType(e.type,s[e.id])}),r}function f(e){var r=[];return t.nodeListEach(i.els.nodes,function(t){var s={id:t.getAttribute("id"),label:t.getAttribute("label")||""};e&&(s.attributes=a(e,t)),i.hasViz&&(s.viz=l(t)),r.push(n(s))}),r}function l(e){var n={},r=t.getFirstElementByTagNS(e,"viz","color");if(r){var i=["r","g","b","a"].map(function(e){return r.getAttribute(e)});n.color=t.getRGB(i)}var s=t.getFirstElementByTagNS(e,"viz","position");s&&(n.position={},["x","y","z"].map(function(e){n.position[e]=+s.getAttribute(e)}));var o=t.getFirstElementByTagNS(e,"viz","size");o&&(n.size=+o.getAttribute("value"));var u=t.getFirstElementByTagNS(e,"viz","shape");return u&&(n.shape=u.getAttribute("value")),n}function c(e,n){var s=[];return t.nodeListEach(i.els.edges,function(o){var u=t.namedNodeMapToObject(o.attributes);"type"in u||(u.type=n),e&&(u.attributes=a(e,o)),i.hasViz&&(u.viz=h(o)),s.push(r(u))}),s}function h(e){var n={},r=t.getFirstElementByTagNS(e,"viz","color");if(r){var i=["r","g","b","a"].map(function(e){return r.getAttribute(e)});n.color=t.getRGB(i)}var s=t.getFirstElementByTagNS(e,"viz","shape");s&&(n.shape=s.getAttribute("value"));var o=t.getFirstElementByTagNS(e,"viz","thickness");return o&&(n.thickness=+o.getAttribute("value")),n}var i={};i.els={root:e.getElementsByTagName("gexf")[0],graph:e.getElementsByTagName("graph")[0],meta:e.getElementsByTagName("meta")[0],nodes:e.getElementsByTagName("node"),edges:e.getElementsByTagName("edge"),model:t.getModelTags(e)},i.hasViz=!!t.getAttributeNS(i.els.root,"xmlns","viz"),i.version=i.els.root.getAttribute("version")||"1.0",i.mode=i.els.graph.getAttribute("mode")||"static";var s=i.els.graph.getAttribute("defaultedgetype");i.defaultEdgetype=s||"undirected";var p=u("node"),d=u("edge"),v={version:i.version,mode:i.mode,defaultEdgeType:i.defaultEdgetype,meta:o(),model:{},nodes:f(p),edges:c(d,i.defaultEdgetype)};return p&&(v.model.node=p),d&&(v.model.edge=d),v}function s(e,t){var n=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject){e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(t in e)try{return new ActiveXObject(e[t])}catch(n){}}return null}();if(!n)throw"XMLHttpRequest not supported, cannot load the file.";var r=typeof t=="function",i;return n.overrideMimeType?(n.overrideMimeType("text/xml"),i=function(e){return e.responseXML}):i=function(e){var t=new DOMParser;return t.parseFromString(e.responseText,"application/xml")},n.open("GET",e,r),r&&(n.onreadystatechange=function(){n.readyState===4&&t(i(n))}),n.send(),r?n:i(n)}function o(e){return i(e)}function u(e,t){return typeof t=="function"?s(e,function(e){t(i(e))}):i(s(e))}var t={getModelTags:function(e){var t=e.getElementsByTagName("attributes"),n={},r=t.length,i;for(i=0;i<r;i++)n[t[i].getAttribute("class")]=t[i].childNodes;return n},nodeListToArray:function(e){var t=[];for(var n=0,r=e.length;n<r;++n)e[n].nodeName!=="#text"&&t.push(e[n]);return t},nodeListEach:function(e,t){for(var n=0,r=e.length;n<r;++n)e[n].nodeName!=="#text"&&t(e[n])},nodeListToHash:function(e,t){var n={};for(var r=0;r<e.length;r++)if(e[r].nodeName!=="#text"){var i=t(e[r]);n[i.key]=i.value}return n},namedNodeMapToObject:function(e){var t={};for(var n=0;n<e.length;n++)t[e[n].name]=e[n].value;return t},getFirstElementByTagNS:function(e,t,n){var r=e.getElementsByTagName(t+":"+n)[0];return r||(r=e.getElementsByTagNameNS(t,n)[0]),r||(r=e.getElementsByTagName(n)[0]),r},getAttributeNS:function(t,n,r){var i=t.getAttribute(n+":"+r);return i===e&&(i=t.getAttributeNS(n,r)),i===e&&(i=t.getAttribute(r)),i},enforceType:function(e,t){switch(e){case"boolean":t=t==="true";break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[]}return t},getRGB:function(e){return e[3]?"rgba("+e.join(",")+")":"rgb("+e.slice(0,-1).join(",")+")"}};if(typeof this.gexf!="undefined")throw'gexf: error - a variable called "gexf" already exists in the global scope';this.gexf={parse:o,fetch:u,version:"0.1.1"},typeof exports!="undefined"&&this.exports!==exports&&(module.exports=this.gexf)}.call(this),function(e){"use strict";function n(){return"e"+t++}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.parsers");var t=0;sigma.parsers.gexf=function(e,t,r){function a(e){o=e.nodes;for(i=0,s=o.length;i<s;i++)u=o[i],u.id=u.id,u.viz&&typeof u.viz=="object"&&(u.viz.position&&typeof u.viz.position=="object"&&(u.x=u.viz.position.x,u.y=-u.viz.position.y),u.size=u.viz.size,u.color=u.viz.color);o=e.edges;for(i=0,s=o.length;i<s;i++)u=o[i],u.id=typeof u.id=="string"?u.id:n(),u.source=""+u.source,u.target=""+u.target,u.viz&&typeof u.viz=="object"&&(u.color=u.viz.color,u.size=u.viz.thickness),u.size=u.weight,u.direction=u.type,delete u.type;if(t instanceof sigma){t.graph.clear(),o=e.nodes;for(i=0,s=o.length;i<s;i++)t.graph.addNode(o[i]);o=e.edges;for(i=0,s=o.length;i<s;i++)t.graph.addEdge(o[i])}else typeof t=="object"?(t.graph=e,t=new sigma(t)):typeof t=="function"&&(r=t,t=null);if(r){r(t||e);return}return e}var i,s,o,u;if(typeof e=="string")gexf.fetch(e,a);else if(typeof e=="object")return a(gexf.parse(e))}}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.parsers"),sigma.utils.pkg("sigma.utils"),sigma.utils.xhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject){e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(t in e)try{return new ActiveXObject(e[t])}catch(n){}}return null},sigma.parsers.json=function(e,t,n){var r,i=sigma.utils.xhr();if(!i)throw"XMLHttpRequest not supported, cannot load the file.";i.open("GET",e,!0),i.onreadystatechange=function(){i.readyState===4&&(r=JSON.parse(i.responseText),t instanceof sigma?(t.graph.clear(),t.graph.read(r)):typeof t=="object"?(t.graph=r,t=new sigma(t)):typeof t=="function"&&(n=t,t=null),n&&n(t||r))},i.send()}}.call(this),function(){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";var e=function(e,t,n){var r=e!=undefined&&t!=undefined&&e.x!=undefined&&e.y!=undefined&&t.x!=undefined&&t.y!=undefined;return r?(n||0)+Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2)):undefined};sigma.classes.graph.addMethod("astar",function(t,n,r){var i=new sigma.classes.configurable({undirected:!1,pathLengthFunction:e,heuristicLengthFunction:undefined},r||{}),s=i("pathLengthFunction"),o=i("heuristicLengthFunction")||s,u=this.nodes(t),a=this.nodes(n),f={},l=[],c=function(e,t,n,r){var i=e.id,s={pathLength:n,heuristicLength:r,node:e,nodeId:i,previousNode:t};if(f[i]==undefined||f[i].pathLenth>n){f[i]=s;var o,u;for(u=0;u<l.length;u++){o=l[u];if(o.heuristicLength>r)break}l.splice(u,0,s)}};c(u,null,0,0);var h=!1,p;i("undirected")?p=this.allNeighborsIndex:p=this.outNeighborsIndex;var d,v,m,g,y,b;while(l.length>0){d=l.shift();if(d.nodeId==n){h=!0;break}v=Object.keys(p[d.nodeId]);for(b=0;b<v.length;b++)m=this.nodes(v[b]),g=s(d.node,m,d.pathLength),y=o(m,a,g),c(m,d.node,g,y)}if(h){var w=[],E=a;while(E)w.unshift(E),E=f[E.id].previousNode;return w}return undefined})}.call(window),function(e){"use strict";function a(){n=Object.create(null),r=Object.create(null),i=0,s=0}function f(){t!==null&&u&&t.dispatchEvent("activeNodes")}function l(){t!==null&&u&&t.dispatchEvent("activeEdges")}function c(e){t=this,o=e.graph,n===null&&(n=Object.create(null),i=0,o.nodes().forEach(function(e){e.active&&(n[e.id]=e,i++)})),r===null&&(r=Object.create(null),s=0,o.edges().forEach(function(e){e.active&&(r[e.id]=e,s++)})),sigma.classes.dispatcher.extend(this),e.bind("kill",function(){t.kill()})}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var t=null,n,r,i,s,o=null,u=!0;a(),sigma.classes.graph.attach("addNode","sigma.plugins.activeState.addNode",function(e){e.active&&(n[e.id]=this.nodesIndex[e.id],i++,f())}),sigma.classes.graph.attach("addEdge","sigma.plugins.activeState.addEdge",function(e){e.active&&(r[e.id]=this.edgesIndex[e.id],l())}),sigma.classes.graph.attachBefore("dropNode","sigma.plugins.activeState.dropNode",function(t){this.nodesIndex[t]!==e&&this.nodesIndex[t].active&&(delete n[t],i--,f())}),sigma.classes.graph.attachBefore("dropEdge","sigma.plugins.activeState.dropEdge",function(t){this.edgesIndex[t]!==e&&this.edgesIndex[t].active&&(delete r[t],s--,l())}),sigma.classes.graph.attachBefore("clear","sigma.plugins.activeState.clear",a),c.prototype.kill=function(){this.unbind(),n=null,r=null,i=0,s=0,o=null,t=null},c.prototype.addNodes=function(e){var t=i,r;arguments.length||o.nodes().forEach(function(e){e.hidden||(e.active=!0,n[e.id]=e)});if(arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if(typeof e=="string"||typeof e=="number")r=o.nodes(e),r.hidden||(r.active=!0,n[e]=r);else if(Array.isArray(e)){var s,u,a=[];for(s=0,u=e.length;s<u;s++){if(typeof e[s]!="string"&&typeof e[s]!="number")throw new TypeError("Invalid argument: a node id is not a string or a number, was "+e[s]);r=o.nodes(e[s]),r.hidden||(r.active=!0,n[e[s]]=r)}}return i=Object.keys(n).length,t!=i&&f(),this},c.prototype.addEdges=function(e){var t=s,n;arguments.length||o.edges().forEach(function(e){e.hidden||(e.active=!0,r[e.id]=e)});if(arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if(typeof e=="string"||typeof e=="number")n=o.edges(e),n.hidden||(n.active=!0,r[e]=n);else if(Array.isArray(e)){var i,u,a=[];for(i=0,u=e.length;i<u;i++){if(typeof e[i]!="string"&&typeof e[i]!="number")throw new TypeError("Invalid argument: an edge id is not a string or a number, was "+e[i]);n=o.edges(e[i]),n.hidden||(n.active=!0,r[e[i]]=n)}}return s=Object.keys(r).length,t!=s&&l(),this},c.prototype.dropNodes=function(e){var t=i;arguments.length||o.nodes().forEach(function(e){e.active=!1,delete n[e.id]});if(arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if(typeof e=="string"||typeof e=="number")o.nodes(e).active=!1,delete n[e];else if(Array.isArray(e)){var r,s;for(r=0,s=e.length;r<s;r++){if(typeof e[r]!="string"&&typeof e[r]!="number")throw new TypeError("Invalid argument: a node id is not a string or a number, was "+e[r]);o.nodes(e[r]).active=!1,delete n[e[r]]}}return i=Object.keys(n).length,t!=i&&f(),this},c.prototype.dropEdges=function(e){var t=s;arguments.length||o.edges().forEach(function(e){e.active=!1,delete r[e.id]});if(arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if(typeof e=="string"||typeof e=="number")o.edges(e).active=!1,delete r[e];else if(Array.isArray(e)){var n,i;for(n=0,i=e.length;n<i;n++){if(typeof e[n]!="string"&&typeof e[n]!="number")throw new TypeError("Invalid argument: an edge id is not a string or a number, was "+e[n]);o.edges(e[n]).active=!1,delete r[e[n]]}}return s=Object.keys(r).length,t!=s&&l(),this},c.prototype.addNeighbors=function(){if("adjacentNodes"in o){var e,t;e=Object.keys(n);if(e.length){for(t in n)o.adjacentNodes(t).forEach(function(t){t.hidden||e.push(t.id)});u=!1,this.dropNodes().dropEdges(),u=!0,this.addNodes(e)}return this}throw new Error("Missing method graph.adjacentNodes")},c.prototype.setNodesBy=function(e){var t=[];return o.nodes().forEach(function(n){e.call(o,n)&&(n.hidden||t.push(n.id))}),u=!1,this.dropNodes(),u=!0,this.addNodes(t),this},c.prototype.setEdgesBy=function(e){var t=[];return o.edges().forEach(function(n){e.call(o,n)&&(n.hidden||t.push(n.id))}),u=!1,this.dropEdges(),u=!0,this.addEdges(t),this},c.prototype.invertNodes=function(){var e=o.nodes().filter(function(e){return!e.hidden&&!e.active}).map(function(e){return e.id});return u=!1,this.dropNodes(),u=!0,e.length?this.addNodes(e):f(),this},c.prototype.invertEdges=function(){var e=o.edges().filter(function(e){return!e.hidden&&!e.active}).map(function(e){return e.id});return u=!1,this.dropEdges(),u=!0,e.length?this.addEdges(e):l(),this},c.prototype.nodes=function(){var e,t=[];for(e in n)t.push(n[e]);return t},c.prototype.edges=function(){var e,t=[];for(e in r)t.push(r[e]);return t},sigma.plugins.activeState=function(e){return t||(t=new c(e)),t},sigma.plugins.killActiveState=function(){t instanceof c&&(t.kill(),t=null)}}.call(this),function(){"use strict";function n(e){if(t[e])return t[e];var n=[0,0,0];return e.match(/^#/)?(e=(e||"").replace(/^#/,""),n=e.length===3?[parseInt(e.charAt(0)+e.charAt(0),16),parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)]:[parseInt(e.charAt(0)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)]):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),n=[+e[1],+e[2],+e[3]]),t[e]={r:n[0],g:n[1],b:n[2]},t[e]}function r(e,t,r){e=n(e),t=n(t);var i={r:e.r*(1-r)+t.r*r,g:e.g*(1-r)+t.g*r,b:e.b*(1-r)+t.b*r};return"rgb("+[i.r|0,i.g|0,i.b|0].join(",")+")"}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var e=0,t={};sigma.plugins.animate=function(t,n,i){function h(){var e=(sigma.utils.dateNow()-f)/u;e>=1?(l.forEach(function(e){for(var t in n)t in n&&n[t]in e&&(e[t]=e[n[t]])}),t.refresh({skipIndexation:!0}),typeof s.onComplete=="function"&&s.onComplete(),t.dispatchEvent("animate.end")):(e=a(e),l.forEach(function(t){for(var i in n)i in n&&n[i]in t&&(i.match(/color$/)?t[i]=r(c[t.id][i],t[n[i]],e):t[i]=t[n[i]]*e+c[t.id][i]*(1-e))}),t.refresh({skipIndexation:!0}),t.animations[o]=requestAnimationFrame(h))}var s=i||{},o=++e,u=s.duration||t.settings("animationsTime"),a=typeof s.easing=="string"?sigma.utils.easings[s.easing]:typeof s.easing=="function"?s.easing:sigma.utils.easings.quadraticInOut,f=sigma.utils.dateNow(),l,c;s.nodes&&s.nodes.length?typeof s.nodes[0]=="object"?l=s.nodes:l=t.graph.nodes(s.nodes):l=t.graph.nodes(),c=l.reduce(function(e,t){var r;e[t.id]={};for(r in n)r in t&&(e[t.id][r]=t[r]);return e},{}),t.animations=t.animations||Object.create({}),sigma.plugins.killAnimate(t),t.dispatchEvent("animate.start"),h()},sigma.plugins.killAnimate=function(e){for(var t in e.animations||{})cancelAnimationFrame(e.animations[t])}}.call(window),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins"),sigma.plugins.colorbrewer={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020"
,"#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}}}.call(this),function(undefined){"use strict";function strToObjectRef(e,t){return t.split(".").reduce(function(e,t){return e[t]},e)}function emptyObject(e){var t;for(t in e)(!("hasOwnProperty"in e)||e.hasOwnProperty(t))&&delete e[t];return e}function deepCopy(o){var copy=Object.create(null);for(var i in o)typeof o[i]=="object"&&o[i]!==null?copy[i]=deepCopy(o[i]):typeof o[i]=="function"&&o[i]!==null?eval(" copy[i] = "+o[i].toString()):copy[i]=o[i];return copy}function baseHistogram(e,t){var n,r,i,s,o={};return e.length?(n=e.map(function(e){return parseFloat(e)}).sort(function(e,t){return e-t}),r=n[0],i=n[n.length-1],i-r!==0?n.forEach(function(e){s=Math.floor(t*Math.abs(e-r)/Math.abs(i-r)),s-=s==t?1:0,o[e]=s}):n.forEach(function(e){o[e]=0}),o):o}function histogram(e,t){var n=[],r,i=0;if(e&&e[t]){Object.keys(e[t]).forEach(function(r){var i=e[t][r];n[i]=n[i]||[],n[i].push(+r)}),r=n.length!==1?n.length:7;for(var s=0;s<r;s++)n[s]&&(i=i>n[s].length?i:n[s].length);for(var s=0;s<r;s++)n[s]===undefined&&(n[s]=[]),n[s]={bin:s,values:n[s],ratio:n[s].length/i},n[s].values.length&&(n[s].min=Math.min.apply(null,n[s].values),n[s].max=Math.max.apply(null,n[s].values))}return n}function Vision(e,t,n,r){var i=this;this.visualVars=null,this.mappings=null,this.palette=r,this.idx=Object.create(null),this.histograms=Object.create(null),this.deprecated=Object.create(null),this.sigmaSettings=Object.create(null),this.dataTypes=Object.create(null),this.originalVisualVariable=Object.create(null);if(t==="nodes")this.visualVars=["color","size","label","type","icon","image"],this.mappings=n.nodes,this.dataset=function(){return e.graph.nodes()};else{if(t!=="edges")throw new Error('Invalid argument: "datasetName" is not "nodes" or "edges", was '+t);this.visualVars=["color","size","label","type"],this.mappings=n.edges,this.dataset=function(){return e.graph.edges()}}return this.update=function(e){function a(n,r){t.idx[e][n]===undefined&&(t.idx[e][n]={key:n,items:[],styles:Object.create(null)}),t.idx[e][n].items.push(r);if(o||o===undefined)o=typeof n=="number"}var t=this;if(e===undefined)throw new Error('Missing argument: "key".');if(typeof e!="string")throw new Error('Invalid argument: "key" is not a string, was '+e);var n,r,s,o=undefined,u=!0;r=function(e,t){return strToObjectRef(e,t)},s=function(e,t){return strToObjectRef(e,t)},this.idx[e]={},this.dataset().forEach(function(t){n=r(t,e),n!==undefined&&(u&&(u=Array.isArray(n)?u:!1),u?n.length===1?a(n[0],t):n.forEach(function(e){a(e,t)}):a(n,t))}),this.dataTypes[e]={sequential:o,array:u},this.deprecated[e]=!1;var f=0;for(n in this.idx[e])f=f<this.idx[e][n].items.length?this.idx[e][n].items.length:f;Object.keys(this.idx[e]).forEach(function(n){t.idx[e][n].ratio=parseFloat(t.idx[e][n].items.length/f)});var l,c,h,p,d,v,m,g,y,b=0;y=Object.keys(i.mappings).filter(function(t){return i.mappings[t]&&i.mappings[t].by!==undefined&&i.mappings[t].by.toString()==e}),y.forEach(function(n){switch(n){case"color":p=i.mappings.color.scheme;if(typeof p!="string")throw new Error('color.scheme "'+p+'" is not a string.');o&&(g=i.mappings.color.bins||7,t.histograms.color=t.histograms.color||{},t.histograms.color[e]=baseHistogram(Object.keys(t.idx[e]),g));break;case"label":l=i.mappings.label.format||function(e){return typeof e=="string"?e:e.label};if(typeof l!="function")throw new Error('label.format "'+l+'" is not a function.');break;case"size":if(!o)throw new Error('One value of the property "'+e+'" is not a number.');t.histograms.size=t.histograms.size||{},t.histograms.size[e]=baseHistogram(Object.keys(t.idx[e]),i.mappings.size.bins||7);break;case"type":d=i.mappings.type.scheme;if(typeof d!="string")throw new Error('type.scheme "'+d+'" is not a string.');break;case"icon":v=i.mappings.icon.scheme;if(typeof v!="string")throw new Error('icon.scheme "'+v+'" is not a string.');break;case"image":m=i.mappings.image.scheme;if(typeof m!="string")throw new Error('type.scheme "'+m+'" is not a string.')}}),Object.keys(this.idx[e]).forEach(function(n){y.forEach(function(u){switch(u){case"color":o?t.idx[e][n].styles.color=function(){var r=t.histograms.color[e][n];return s(i.palette,p)[g][r]}:t.idx[e][n].styles.color=function(){if(s(i.palette,p)===undefined)throw new Error("Wrong or undefined color scheme.");if(i.mappings.color.set>0){var e=s(i.palette,p)[i.mappings.color.set][b];return b=(b+1)%i.mappings.color.set,e}return s(i.palette,p)[n]};break;case"label":t.idx[e][n].styles.label=function(t){return l(r(t,e))};break;case"size":t.idx[e][n].styles.size=function(){return 1+t.histograms.size[e][n]};break;case"type":t.idx[e][n].styles.type=function(){if(s(i.palette,d)===undefined)throw new Error("Wrong or undefined type scheme.");return s(i.palette,d)[n]};break;case"icon":t.idx[e][n].styles.icon=function(){if(s(i.palette,v)===undefined)throw new Error("Wrong or undefined icon scheme.");return s(i.palette,v)[n]};break;case"image":t.idx[e][n].styles.image=function(){if(s(i.palette,m)===undefined)throw new Error("Wrong or undefined image scheme.");return s(i.palette,m)[n]}}})})},this.get=function(e){if(e===undefined)throw new TypeError('Missing argument: "key".');if(typeof e!="string")throw new TypeError('Invalid argument: "key" is not a string, was '+e);return this.deprecated[e]&&this.update(e),this.idx[e]===undefined&&this.update(e),this.idx[e]},this.applyStyle=function(n,r){if(r===undefined)throw new TypeError('Missing argument: "key"');if(typeof r!="string")throw new TypeError('Invalid argument: "key" is not a string, was '+r);if(this.visualVars.indexOf(n)==-1)throw new Error('Unknown style "'+n+'"');var i=this,o=this.get(r);n==="color"&&i.dataTypes[r].array&&(this.dataset().forEach(function(e){delete e.colors}),Object.keys(o).forEach(function(e){var t=o[e];t.items.forEach(function(e){e.colors=[]})})),Object.keys(o).forEach(function(e){var t=o[e];t.items.forEach(function(e){if(e!==undefined&&t.styles!==undefined&&typeof t.styles[n]=="function"){i.originalVisualVariable[e.id]||(i.originalVisualVariable[e.id]={}),n in i.originalVisualVariable[e.id]||Object.defineProperty(i.originalVisualVariable[e.id],n,{enumerable:!0,value:e[n]});var s=t.styles[n](e);n==="color"&&i.dataTypes[r].array?s!==undefined&&(e.color=s,e.colors.push(s)):s!==undefined&&(e[n]=s)}else if(typeof t.styles[n]=="function")throw new TypeError(t.styles+"."+n+"is not a function, was "+t.styles[n])})});if(n==="size")if(t==="nodes"){if(this.mappings.size.min>this.mappings.size.max)throw new RangeError("nodes.size.min must be lower or equal than nodes.size.max");this.mappings.size.min&&(this.sigmaSettings.minNodeSize||(this.sigmaSettings.minNodeSize=e.settings("minNodeSize")),e.settings("minNodeSize",this.mappings.size.min)),this.mappings.size.max&&(this.sigmaSettings.maxNodeSize||(this.sigmaSettings.maxNodeSize=e.settings("maxNodeSize")),e.settings("maxNodeSize",this.mappings.size.max))}else if(t==="edges"){if(this.mappings.size.min>this.mappings.size.max)throw new RangeError("edges.size.min must be lower or equal than edges.size.max");this.mappings.size.min&&(this.sigmaSettings.minEdgeSize||(this.sigmaSettings.minEdgeSize=e.settings("minEdgeSize")),e.settings("minEdgeSize",this.mappings.size.min)),this.mappings.size.max&&(this.sigmaSettings.maxEdgeSize||(this.sigmaSettings.maxEdgeSize=e.settings("maxEdgeSize")),e.settings("maxEdgeSize",this.mappings.size.max))}},this.resetStyle=function(n,r){if(r===undefined)throw new TypeError('Missing argument: "key"');if(typeof r!="string")throw new TypeError('Invalid argument: "key" is not a string, was '+r);if(this.visualVars.indexOf(n)==-1)throw new Error('Unknown style "'+n+'".');if(this.idx[r]===undefined)return;var i=this,o=this.get(r);n==="color"&&i.dataTypes[r].array&&Object.keys(o).forEach(function(e){var t=o[e];t.items.forEach(function(e){delete e.colors})}),Object.keys(o).forEach(function(e){var t=o[e];t.items.forEach(function(e){e!==undefined&&e[n]!==undefined&&(i.originalVisualVariable[e.id]===undefined||i.originalVisualVariable[e.id][n]===undefined?i.key==="edges"&&n==="size"?e.size=1:delete e[n]:e[n]=i.originalVisualVariable[e.id][n])})}),n==="size"&&(t==="nodes"?(this.sigmaSettings.minNodeSize&&e.settings("minNodeSize",this.sigmaSettings.minNodeSize),this.sigmaSettings.maxNodeSize&&e.settings("maxNodeSize",this.sigmaSettings.maxNodeSize)):t==="edges"&&(this.sigmaSettings.minEdgeSize&&e.settings("minEdgeSize",this.sigmaSettings.minEdgeSize),this.sigmaSettings.maxEdgeSize&&e.settings("maxEdgeSize",this.sigmaSettings.maxEdgeSize)))},this.clear=function(){this.visualVars.length=0,emptyObject(this.idx),emptyObject(this.histograms),emptyObject(this.deprecated),emptyObject(this.sigmaSettings),emptyObject(this.dataTypes),emptyObject(this.originalVisualVariable)},this}function design(e,t){function s(t,n,r){r?t[r]&&t[r].by&&(n.applyStyle(r,t[r].by),t[r].active=!0):Object.keys(t).forEach(function(e){t[e].active=!1,t[e]&&t[e].by&&(n.applyStyle(e,t[e].by),t[e].active=!0)}),e&&e.refresh({skipIndexation:!0})}function o(t,n,r){r?t[r]&&t[r].active&&(n.resetStyle(r,t[r].by),t[r].active=!1):Object.keys(t).forEach(function(e){t[e].active&&(n.resetStyle(e,t[e].by),t[e].active=!1)}),e&&e.refresh({skipIndexation:!0})}this.palette=(t||{}).palette||{},this.styles=sigma.utils.extend((t||{}).styles||{},{nodes:{},edges:{}});var n=this,r=new Vision(e,"nodes",this.styles,this.palette),i=new Vision(e,"edges",this.styles,this.palette);e.bind("kill",function(){sigma.plugins.killDesign(e)}),this.setStyles=function(e){return this.styles=sigma.utils.extend(e||{},{nodes:{},edges:{}}),r.mappings=this.styles.nodes,i.mappings=this.styles.edges,this.deprecate(),this},this.nodesBy=function(e,t){return this.styles=sigma.utils.extend(this.styles||{},{nodes:{},edges:{}}),this.styles.nodes[e]=t,r.mappings=this.styles.nodes,t.by&&this.deprecate("nodes",t.by),this},this.edgesBy=function(e,t){return this.styles=sigma.utils.extend(this.styles||{},{nodes:{},edges:{}}),this.styles.edges[e]=t,i.mappings=this.styles.edges,t.by&&this.deprecate("edges",t.by),this},this.setPalette=function(e){return this.palette=e,r.palette=this.palette,i.palette=this.palette,this.deprecate(),this},this.nodes=function(e){return r.get(e)},this.edges=function(e){return i.get(e)},this.inspect=function(){return{nodes:deepCopy(r),edges:deepCopy(i)}},this.apply=function(e,t){if(!this.styles)return;if(!e)return s(this.styles.nodes,r,t),s(this.styles.edges,i,t),this;switch(e){case"nodes":s(this.styles.nodes,r,t);break;case"edges":s(this.styles.edges,i,t);break;default:throw new Error('Invalid argument: "target" is not "nodes" or "edges", was '+e)}return this},this.reset=function(e,t){if(!this.styles)return;if(!e)return o(this.styles.nodes,r,t),o(this.styles.edges,i,t),this;switch(e){case"nodes":o(this.styles.nodes,r,t);break;case"edges":o(this.styles.edges,i,t);break;default:throw new Error('Invalid argument: "target" is not "nodes" or "edges", was '+e)}return this},this.deprecate=function(e,t){if(e){if(e!=="nodes"&&e!=="edges")throw new Error('Invalid argument: "target" is not "nodes" or "edges", was '+e);t?e==="nodes"?r.deprecated[t]=!0:e==="edges"&&(i.deprecated[t]=!0):e==="nodes"?Object.keys(r.deprecated).forEach(function(e){r.deprecated[e]=!0}):e==="edges"&&Object.keys(i.deprecated).forEach(function(e){i.deprecated[e]=!0})}else Object.keys(r.deprecated).forEach(function(e){r.deprecated[e]=!0}),Object.keys(i.deprecated).forEach(function(e){i.deprecated[e]=!0});return this},this.deletePropertyStylesFrom=function(e,t,n){if(t==null)throw new TypeError('Missing argument: "id".');if(e!=="nodes"&&e!=="edges")throw new Error('Invalid argument: "target" is not "nodes" or "edges", was '+e);if(n==null)throw new TypeError('Missing argument: "key".');var s,o,u,a;e==="nodes"?s=r.get(n):s=i.get(n);var f=Object.keys(s);for(var l=0;l<f.length;l++){o=s[f[l]],u=Object.keys(o.styles);for(var c=0;c<o.items.length;c++){a=o.items[c];if(a.id===t){for(var h=0;h<u.length;h++)u[h]!=="label"&&u[h]!=="size"?delete a[u[h]]:u[h]==="size"&&(a.size=1);return this.deprecate(e,n),this}}}return this},this.clear=function(){return this.reset(),this.styles={nodes:{},edges:{}},this.palette={},r.clear(),i.clear(),r=new Vision(e,"nodes",this.styles,this.palette),i=new Vision(e,"edges",this.styles,this.palette),e&&e.refresh({skipIndexation:!0}),this},this.kill=function(){delete this.styles,delete this.palette,r.clear(),i.clear()},this.utils={},this.utils.isSequential=function(e,t){if(!e)throw new TypeError('Missing argument: "target"');var n;switch(e){case"nodes":n=r;break;case"edges":n=i;break;default:throw new Error('Invalid argument: "target" is not "nodes" or "edges", was '+e)}if(t===undefined)throw new TypeError('Missing argument: "property"');if(typeof t!="string")throw new TypeError('Invalid argument: "property" is not a string, was '+t);if(!(t in n.dataTypes)||n.dataTypes[t].sequential===undefined){var s,o=!1,u=!0;n.dataset().forEach(function(e){s=strToObjectRef(e,t),s!==undefined&&(o=!0,u=typeof s=="number"?u:!1)}),o&&(n.dataTypes[t]={sequential:u})}return(n.dataTypes[t]||{}).sequential},this.utils.histogram=function(e,t,s){if(!e)throw new TypeError('Missing argument: "target"');var o;switch(e){case"nodes":o=r;break;case"edges":o=i;break;default:throw new Error('Invalid argument: "target" is not "nodes" or "edges", was '+e)}if(o.visualVars.indexOf(t)==-1)throw new Error('Unknown visual variable "'+t+'".');if(s===undefined)throw new TypeError('Missing argument: "property".');if(typeof s!="string")throw new TypeError('Invalid argument: "property" is not a string, was'+s);var u=this.isSequential(e,s);if(!u)throw new Error('The property "'+s+'" is not sequential.');var a=histogram(o.histograms[t],s);if(t==="color"){if(!n.styles[e].color)throw new Error('Missing key "color" in '+e+" palette.");var f=a.length,l=strToObjectRef(n.palette,n.styles[e].color.scheme);if(!l)throw new Error('Color scheme "'+n.styles[e].color.scheme+'" not in '+e+" palette.");if(u)for(var c=0;c<f;c++){if(!l[f])throw new Error('Missing key "'+f+'" in '+e+' palette " of color scheme '+n.styles[e].color.scheme+'".');a[c][t]=l[f][c]}}return a}}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var _instance={};sigma.plugins.design=function(e,t){return _instance[e.id]||(_instance[e.id]=new design(e,t)),_instance[e.id]},sigma.plugins.killDesign=function(e){_instance[e.id]instanceof design&&_instance[e.id].kill(),delete _instance[e.id]}}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw new Error("sigma not in scope.");sigma.utils.pkg("sigma.settings");var t={legendWidth:130,legendFontFamily:"Arial",legendFontSize:10,legendFontColor:"black",legendTitleFontFamily:"Arial",legendTitleFontSize:15,legendTitleFontColor:"black",legendTitleMaxLength:"30",legendTitleTextAlign:"left",legendShapeColor:"grey",legendBackgroundColor:"white",legendBorderColor:"black",legendBorderRadius:10,legendBorderWidth:1,legendInnerMargin:10,legendOuterMargin:5};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(e){"use strict";function t(e){var t=this,n=e.settings,i=window.devicePixelRatio||1;this._sigmaInstance=e,this._designPlugin=sigma.plugins.design(e),this._visualSettings={pixelRatio:i,legendWidth:n("legendWidth"),legendFontFamily:n("legendFontFamily"),legendFontSize:n("legendFontSize"),legendFontColor:n("legendFontColor"),legendTitleFontFamily:n("legendTitleFontFamily"),legendTitleFontSize:n("legendTitleFontSize"),legendTitleFontColor:n("legendTitleFontColor"),legendShapeColor:n("legendShapeColor"),legendBackgroundColor:n("legendBackgroundColor"),legendBorderColor:n("legendBorderColor"),legendBorderWidth:n("legendBorderWidth"),legendInnerMargin:n("legendInnerMargin"),legendOuterMargin:n("legendOuterMargin"),legendTitleMaxLength:n("legendTitleMaxLength"),legendTitleTextAlign:n("legendTitleTextAlign"),legendBorderRadius:n("legendBorderRadius")},u(this._visualSettings,function(e,n){typeof e=="number"&&(t._visualSettings[n]=e*i)}),l(this._visualSettings);var s=e.renderers[0];this._canvas=document.createElement("canvas"),this._canvas.style.position="absolute",this._canvas.style.pointerEvents="none",r(this._canvas,s.container.offsetWidth,s.container.offsetHeight,i),s.container.appendChild(this._canvas),window.addEventListener("resize",function(){r(t._canvas,s.container.offsetWidth,s.container.offsetHeight,i),h(t)}),this.textWidgetCounter=1,this.enoughSpace=!0,this.placement="bottom",this.visible=!0,this.widgets={},this.boundingBox={x:0,y:0,w:0,h:0},this.externalCSS=[],this.addWidget("node","size"),this.addWidget("node","color"),this.addWidget("node","icon"),this.addWidget("node","type"),this.addWidget("edge","size"),this.addWidget("edge","color"),this.addWidget("edge","type"),this.draw()}function n(e,t,n,r,i,s){this._canvas=e,this._sigmaInstance=t,this._designPlugin=n,this._legendPlugin=r,this.visualVar=s,this.elementType=i,this.x=0,this.y=0,this.text="",this.unit=null,this.img=new Image,this.pinned=!1}function r(e,t,n,r){e.setAttribute("width",t*r),e.setAttribute("height",n*r),e.style.width=t+"px",e.style.height=n+"px"}function i(e,t){return t==null?null:t.split(".").reduce(function(e,t){return e[t]},e)}function s(e){var t=";base64,";if(e.indexOf(t)==-1){var n=e.split(","),r=n[0].split(":")[1],i=decodeURIComponent(n[1]);return new Blob([i],{type:r})}var n=e.split(t),r=n[0].split(":")[1],i=window.atob(n[1]),s=i.length,o=new Uint8Array(s);for(var u=0;u<s;++u)o[u]=i.charCodeAt(u);return new Blob([o],{type:r})}function o(e,t,n){var r=null,i=null,o=null;window.Blob?(r=n?s(e):new Blob([e],{type:"text/xml"}),i=window.URL.createObjectURL(r)):o="data:text/xml;charset=UTF-8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>')+encodeURIComponent(e);if(navigator.msSaveBlob)navigator.msSaveBlob(r,t);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(r,t);else{var u=document.createElement("a");u.setAttribute("href",window.Blob?i:o),u.setAttribute("download",t),document.body.appendChild(u),u.click(),document.body.removeChild(u)}i&&setTimeout(function(){window.URL.revokeObjectURL(i)},0)}function u(t,n){for(var r in t){if(!t.hasOwnProperty(r)||t[r]===e)continue;n(t[r],r)}}function a(t,n,r,i,s){r=r||{};var o=document.createElement(n);for(var u in r){if(!r.hasOwnProperty(u))continue;var a=r[u];a!==e&&o.setAttribute(u,a)}if(i!==e||s){Object.prototype.toString.call(i)==="[object Object]"&&(i=JSON.stringify(i));var f=document.createTextNode(i);o.appendChild(f)}return t.appendChild(o),o}function f(e,t){if(!e.svg){t();return}var n="";n+='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+e.svg.width+'px" height="'+e.svg.height+'px">',n+=e.svg.innerHTML+"</svg>";var r="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)));e.img.src!==r?(e.img.onload=t,e.img.src=r):t()}function l(e){e.totalWidgetWidth=e.legendWidth+(e.legendBorderWidth+e.legendOuterMargin)*2}function c(e,t){var n=0,r=Object.keys(e.widgets).length;u(e.widgets,function(e){x(e,function(){++n,t&&n===r&&t()})})}function h(e){var t=e._visualSettings,n=e.placement,r=n==="top"||n==="bottom",i=e._canvas.height,s=e._canvas.width,o=g(e.widgets,"text"),a=g(e.widgets,"node"),f=g(e.widgets,"edge"),l=[o,a,f],c=r?y(e.widgets)+t.legendOuterMargin*2:i,h=Math.floor(s/t.totalWidgetWidth),v=p(r?h:1,t.legendOuterMargin*2),m=0,b=!0,w=!1;while(b&&!w)b=!1,m=0,u(l,function(e){var n=[],s,o;if(b||w)return;e.forEach(function(e){n.push(e)});for(;;){s=c-(v[m]?v[m].height:0),o=d(n,s),o.forEach(function(e){v[m].widgets.push(n[e]),v[m].height+=n[e].svg.height});for(var u=o.length-1;u>=0;--u)n.splice(o[u],1);if(!(n.length>0))break;if(r){if(m===h-1){v=p(h,t.legendOuterMargin*2),c+=30,b=!0,c>i&&(w=!0);break}++m}else{if(v.length===h){w=!0;break}v.push({widgets:[],height:t.legendOuterMargin*2}),++m}}});if(!w){n==="right"&&v.reverse();for(var S=0;S<v.length;++S){var x=n==="bottom"?c-v[S].height:0;for(var T=0;T<v[S].widgets.length;++T)v[S].widgets[T].x=t.totalWidgetWidth*S+(n==="right"?s-v.length*t.totalWidgetWidth:t.legendOuterMargin),n==="bottom"?v[S].widgets[T].y=i-c+x+t.legendOuterMargin*2:v[S].widgets[T].y=x+t.legendOuterMargin,x+=v[S].widgets[T].svg.height}var N=v.reduce(function(e,n){return e+(n.height>t.legendOuterMargin*2?1:0)},0),C=N*(t.totalWidgetWidth+t.legendOuterMargin)+t.legendOuterMargin,k=v.reduce(function(e,t){return e>t.height?e:t.height},0);e.boundingBox={w:C,h:k,x:e.placement==="right"?s-C:0,y:e.placement==="bottom"?i-k:0}}else e.boundingBox={x:0,y:0,w:0,h:0};E(e),e.enoughSpace=!w}function p(e,t){var n=[];for(var r=0;r<e;++r)n.push({widgets:[],height:t});return n}function d(e,t){var n={indexes:[],height:0},r=v(e.length,0);return r.forEach(function(r){var i=m(e,r);i>n.height&&i<=t&&(n.indexes=r,n.height=i)}),n.indexes}function v(e,t){if(t===e)return[];var n=[[t]],r=v(e,t+1);return r.forEach(function(e){n.push([t].concat(e))}),n=n.concat(r),n}function m(e,t){var n=0;return t.forEach(function(t){n+=e[t].svg.height}),n}function g(e,t){var n=[];return u(e,function(e){e.svg&&!e.pinned&&e.elementType===t&&n.push(e)}),n}function y(e){var t=0;return u(e,function(e){e.svg&&e.svg.height>t&&(t=e.svg.height)}),t}function b(e,t){return e+"_"+t}function w(e){var t=e._canvas.getContext("2d");t.clearRect(0,0,e._canvas.width,e._canvas.height)}function E(e){w(e),u(e.widgets,function(t){S(e,t)&&k(t)})}function S(t,n){return t.visible&&(t.enoughSpace||n.pinned)&&t.widgets[n.id]!==e&&n.svg!==null}function x(e,t){var n=e._legendPlugin._visualSettings;if(e.visualVar==="size")e.svg=_(n,e._sigmaInstance.graph,e._designPlugin,e.elementType,e.unit);else if(e.elementType!=="text")e.svg=D(n,e._sigmaInstance.graph,e._designPlugin,e.elementType,e.visualVar,e.unit);else{var r=N(n,e.text,n.legendWidth-2*n.legendInnerMargin),i=n.legendFontSize+1,s=r.length*i+n.legendInnerMargin*2,o=n.legendInnerMargin+i;e.svg=document.createElement("svg"),F(e.svg,n,s);for(var u=0;u<r.length;++u)B(n,e.svg,r[u],n.legendInnerMargin,o),o+=i;e.svg.width=n.totalWidgetWidth,e.svg.height=s+2*(n.legendBorderWidth+n.legendOuterMargin)}f(e,t)}function T(e){x(e,function(){h(e._legendPlugin)})}function N(e,t,n){var r=!1,i=K(" ",e.legendFontFamily,e.legendFontSize,r),s=t.split(" "),o=[{width:-i,words:[]}],u=0,a=[];for(var f=0;f<s.length;++f){var l=K(s[f]+" ",e.legendFontFamily,e.legendFontSize,r);o[u].width+l<=n?(o[u].words.push(s[f]+" "),o[u].width+=l):(o.push({width:l-i,words:[s[f]+" "]}),u++)}for(f=0;f<o.length;++f){var c="";for(var h=0;h<o[f].words.length;++h)c+=o[f].words[h];a.push(c)}return a}function C(e){var t=e.split(".");return t.length>2&&t[t.length-2]==="categories"||t.length>=1&&t[1]==="categories"?"Category":V(t[t.length-1])}function k(e){if(!e.img)return;var t=e._canvas.getContext("2d");t.drawImage(e.img,e.x,e.y),e.elementType==="node"&&e.visualVar==="icon"&&(t.textBaseline="middle",u(e.svg.icons,function(n,r){t.fillStyle=n.color,t.font=n.fontSize+"px "+n.font,t.fillText(r,e.x+n.x,e.y+n.y)}))}function L(e,t){var n=null,r=null;for(var s=1;s<e.length;++s){var o=i(e[s],t);if(typeof o!="number")continue;if(!n||o<n)n=o;if(!r||o>r)r=o}return{min:n?n:0,max:r?r:0}}function A(e,t){var n=[],r=e.max-e.min;for(var i=0;i<t+1;++i)n.push(e.min+r*(i/t));return n}function O(e,t){var n={};for(var r=0;r<e.length;++r){var s=i(e[r],t);s&&typeof s=="object"?u(s,function(e){n[e]=!0}):n[s]=!0}return n}function M(e,t){var n=0;return u(e,function(e,r){t[r]&&++n}),n}function _(e,t,n,r,i){var s=e,o=document.createElement("svg"),u=r==="node"?t.nodes():t.edges(),a=r==="node"?n.styles.nodes:n.styles.edges,f=s.legendTitleFontSize+s.legendInnerMargin+s.legendFontSize*1.5;if(!a.size)return null;var l=a.size.by,c=L(u,l),h=c.min,p=c.max,d=h%1===0&&p%1===0,v=d?Math.round((h+p)/2):(h+p)/2,m=a.size.max/a.size.min,g=s.legendFontSize*1.5,y=g/m,b=(g+y)/2,w;if(r==="node"){var E=2;w=f+g*2+10,F(o,s,w),X(s,o,C(a.size.by),i);var S=g*2+E+s.legendInnerMargin*2;B(s,o,Q(p,d),S,f+s.legendFontSize),B(s,o,Q(v,d),S,f+2*s.legendFontSize),B(s,o,Q(h,d),S,f+3*s.legendFontSize),j(o,g+s.legendInnerMargin,f+g,g,s.legendBackgroundColor,s.legendShapeColor,E),j(o,g+s.legendInnerMargin,f+g*2-b,b,s.legendBackgroundColor,s.legendShapeColor,E),j(o,g+s.legendInnerMargin,f+g*2-y,y,s.legendBackgroundColor,s.legendShapeColor,E)}else if(r==="edge"){var x=f+g*1.7,T=(s.legendWidth-s.legendInnerMargin*2)/3;w=x+s.legendFontSize,F(o,s,w),X(s,o,C(a.size.by),i),W(o,"rect",{x:s.legendInnerMargin,y:f+5,width:T,height:g/2,fill:s.legendShapeColor}),W(o,"rect",{x:s.legendInnerMargin+T,y:f+5+(g-b)/4,width:T,height:b/2,fill:s.legendShapeColor}),W(o,"rect",{x:s.legendInnerMargin+2*T,y:f+5+(g-y)/4,width:T,height:y/2,fill:s.legendShapeColor}),B(s,o,Q(p,d),s.legendInnerMargin+T*.5,x,"middle"),B(s,o,Q(v,d),s.legendInnerMargin+T*1.5,x,"middle"),B(s,o,Q(h,d),s.legendInnerMargin+T*2.5,x,"middle")}return o.width=s.totalWidgetWidth,o.height=w+(s.legendBorderWidth+s.legendOuterMargin)*2,o}function D(e,t,n,r,s,o){var a=e,f=document.createElement("svg"),l=r==="node"?t.nodes():t.edges(),c=r==="node"?n.styles.nodes:n.styles.edges;if(!c[s])return null;var h=n.palette,p=a.legendFontSize*1.5,d=a.legendTitleFontSize+a.legendInnerMargin+p*.8,v=s==="color"&&c.color.bins,m=r==="edge"&&s==="type",g=v?i(h,c.color.scheme)[c.color.bins]:i(h,c[s].scheme),y=O(l,c[s].by),b=v?Object.keys(g).length:M(g,y),w=p*b+d+(m?p:0),E=a.legendWidth/3,S=d,x=r==="edge"?E:a.legendFontSize*1.5+a.legendInnerMargin,T,N,k,_,D;return v&&(T=L(l,c.color.by),N=A(T,c.color.bins),k=T.min%1==0&&T.max%1==0),f.icons={},F(f,a,w),X(a,f,C(c[s].by),o),r==="edge"&&s==="type"&&(_="source node to target node",D=$(_,a.legendFontFamily,a.legendFontSize,a.legendWidth-a.legendInnerMargin*2),B(a,f,_,a.legendInnerMargin,S,"left",a.legendFontColor,a.legendFontFamily,D),S+=p),u(g,function(e,t){if(!v&&!y[t])return;s==="color"?(v&&(e=g[g.length-t-1]),r==="edge"?W(f,"rect",{x:a.legendInnerMargin,y:S-p/8,width:E-a.legendInnerMargin*2,height:p/4,fill:e}):j(f,a.legendInnerMargin+a.legendFontSize/2,S,a.legendFontSize/2,e)):s==="icon"?f.icons[e.content]={font:e.font,fontSize:a.legendFontSize,color:a.legendFontColor,x:a.legendInnerMargin,y:S}:s==="type"&&(r==="edge"?I(a,f,e,a.legendInnerMargin,E-a.legendInnerMargin,S,a.legendFontSize/3):R(a,f,e,a.legendInnerMargin+a.legendFontSize/2
,S,a.legendFontSize/2));var n=2;if(v)_=Q(N[b-t-1],k)+" - "+Q(N[b-parseInt(t)],k),B(a,f,_,E,S+n,"left",null,null,null,"middle");else{var i=P(V(t),a.legendWidth-a.legendInnerMargin-x,a.legendFontFamily,a.legendFontSize);B(a,f,i,x,S+n,"left",null,null,null,"middle")}S+=p}),f.width=a.totalWidgetWidth,f.height=w+(a.legendBorderWidth+a.legendOuterMargin)*2,f}function P(e,t,n,r){var i=K(e,n,r,!1),s=!1;while(i>t){s=!0;var o=t/i,e=e.substr(0,e.length*o);i=K(e,n,r,!1)}return s&&(e+="..."),e}function H(e,t,n,r){var i=a(e,"image",{x:n,y:r,"xlink:href":t})}function B(e,t,n,r,i,s,o,u,f,l){a(t,"text",{x:r,y:i,"text-anchor":s?s:"left",fill:o?o:e.legendFontColor,"font-size":f?f:e.legendFontSize,"font-family":u?u:e.legendFontFamily,"alignment-baseline":l?l:"auto"},n)}function j(e,t,n,r,i,s,o){a(e,"circle",{cx:t,cy:n,r:r,fill:i,stroke:s,"stroke-width":o})}function F(e,t,n){W(e,"rect",{x:t.legendBorderWidth,y:t.legendBorderWidth,width:t.legendWidth,height:n,stroke:t.legendBorderColor,"stroke-width":t.legendBorderWidth,fill:t.legendBackgroundColor,rx:t.legendBorderRadius,ry:t.legendBorderRadius})}function I(e,t,n,r,i,s,o){var u=o*2.5,a=o*3,f=Math.sqrt(3)/2*u;if(n==="arrow")z(t,r,s,i-f+1,s,e.legendShapeColor,o),U(t,[i,s,i-f,s-u/2,i-f,s+u/2],e.legendShapeColor);else if(n==="parallel")o*=.8,z(t,r,s-o,i,s-o,e.legendShapeColor,o),z(t,r,s+o,i,s+o,e.legendShapeColor,o);else if(n==="curve")q(t,r,s,(r+i)/2,s-a,i,s,e.legendShapeColor,o);else if(n==="curvedArrow"){var l,c=i-r;c<40?l=35:c<60?l=33:l=30,q(t,r,s,(r+i)/2,s-a,i-u/2,s-o,e.legendShapeColor,o),U(t,[i,s,i-f,s-u/2,i-f,s+u/2],e.legendShapeColor,{angle:l,cx:i,cy:s})}else if(n==="dashed"){var h="8 3";z(t,r,s,i,s,e.legendShapeColor,o,h)}else if(n==="dotted"){var p="2";z(t,r,s,i,s,e.legendShapeColor,o,p)}else n==="tapered"&&U(t,[r,s+o,r,s-o,i,s],e.legendShapeColor)}function q(e,t,n,r,i,s,o,u,f){var l="M "+t+" "+n+" Q "+r+" "+i+" "+s+" "+o;a(e,"path",{d:l,stroke:u,"stroke-width":f,fill:"none"})}function R(e,t,n,r,i,s){var o=[],u;if(n==="diamond")s*=1.3,o=[r-s,i,r,i-s,r+s,i,r,i+s];else if(n==="star"){s*=1.7,u=-Math.PI/2;for(var a=0;a<5;++a)o[a*2]=Math.cos(u),o[a*2+1]=Math.sin(u),u+=Math.PI*4/5}else if(n==="equilateral"){s*=1.3;var f=5;u=-Math.PI/2;for(var a=0;a<f;++a)o[a*2]=Math.cos(u),o[a*2+1]=Math.sin(u),u+=Math.PI*2/f}else n==="square"&&(o=[r-s,i-s,r+s,i-s,r+s,i+s,r-s,i+s]);if(n==="star"||n==="equilateral")for(var a=0;a<o.length;a+=2)o[a]=r+o[a]*s,o[a+1]=i+o[a+1]*s;if(n!=="cross")U(t,o,e.legendShapeColor);else{s*=1.2;var l=2*window.devicePixelRatio;z(t,r-s,i,r+s,i,e.legendShapeColor,l),z(t,r,i-s,r,i+s,e.legendShapeColor,l)}}function U(e,t,n,r){var i=t[0]+","+t[1];for(var s=2;s<t.length;s+=2)i+=" "+t[s]+","+t[s+1];var o={points:i,fill:n};r&&(o.transform="rotate("+r.angle+", "+r.cx+", "+r.cy+")"),a(e,"polygon",o)}function z(e,t,n,r,i,s,o,u){a(e,"line",{x1:t,y1:n,x2:r,y2:i,stroke:s,"stroke-width":o,"stroke-dasharray":u})}function W(e,t,n){a(e,t,n)}function X(e,t,n,r){var i=(n.length>e.legendTitleMaxLength?n.substring(0,e.legendTitleMaxLength):n)+(r?" ("+r+")":""),s=$(i,e.legendTitleFontFamily,e.legendTitleFontSize,e.legendWidth-e.legendInnerMargin),o=e.legendTitleTextAlign==="middle"?e.legendWidth/2:e.legendInnerMargin;B(e,t,i,o,e.legendFontSize+e.legendInnerMargin,e.legendTitleTextAlign,e.legendTitleFontColor,e.legendTitleFontFamily,s)}function V(e){return e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")}function $(e,t,n,r){while(K(e,t,n,!1)>r)n-=n>15?2:1;return n}function K(e,t,n,r){return r?.45*n*e.length:(J.font=n+"px "+t,J.measureText(e).width)}function Q(e,t){var n=["K","M","G","T","P","E","Z","Y"];if(e>9999){var r=0;while(r<n.length&&e>999)e/=1e3,++r;return Math.ceil(e)+n[r-1]}return t?Math.round(e).toString():e<10?(Math.round(e*1e3)/1e3).toString():e<100?(Math.round(e*100)/100).toString():e<1e3?(Math.round(e*10)/10).toString():Math.round(e).toString()}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var J=document.createElement("canvas").getContext("2d"),G={};sigma.plugins.legend=function(e){return G[e.id]||(G[e.id]=new t(e),e.bind("kill",function(){sigma.plugins.killLegend(e)})),G[e.id]},sigma.plugins.killLegend=function(t){var n=G[t.id];n&&(u(n.widgets,function(t,r){n.widgets[r]=e}),G[t.id]=e)},t.prototype.draw=function(e){var t=this,n=this._visualSettings.pixelRatio;c(this,function(){h(t),e&&e()})},t.prototype.setVisibility=function(e){this.visible=e,h(this)},t.prototype.setPlacement=function(e){if(["top","bottom","right","left"].indexOf(e)===-1)return;this.placement=e,h(this)},t.prototype.addWidget=function(e,t,r){var i=this.widgets[b(e,t)];return i||(i=new n(this._canvas,this._sigmaInstance,this._designPlugin,this,e,t),i.id=b(e,t),this.widgets[i.id]=i),i.unit=r,T(i),i},t.prototype.getWidget=function(e,t){return this.widgets[b(e,t)]},t.prototype.addTextWidget=function(e){var t=new n(this._canvas,this._sigmaInstance,this._designPlugin,this,"text");return t.text=e,t.id="text"+this.textWidgetCounter++,this.widgets[t.id]=t,T(t),t},t.prototype.removeWidget=function(t,r){var i=t instanceof n?t.id:b(t,r);this.widgets[i]&&(this.widgets[i]=e,h(this))},t.prototype.removeAllWidgets=function(){this.widgets={},h(this)},n.prototype.unpin=function(){this.pinned=!1,h(this._legendPlugin)},n.prototype.setPosition=function(e,t){this.pinned=!0,this.x=e,this.y=t,h(this._legendPlugin)},n.prototype.setText=function(e){this.text=e,T(this)},n.prototype.setUnit=function(e){this.unit=e,T(this)},t.prototype.setExternalCSS=function(e){this.externalCSS=e},t.prototype.exportPng=function(e){var t=this.visible,n=this;n.visible=!0,n.draw(function(){var r=document.createElement("canvas"),i=r.getContext("2d"),s=n.boundingBox;r.width=s.w,r.height=s.h,i.drawImage(n._canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),n.setVisibility(t),o(r.toDataURL(),e?e:"legend.png",!0)})},t.prototype.exportSvg=function(e){var t=this;this.draw(function(){var n=t._visualSettings,r=t.boundingBox,i="";(t.externalCSS||[]).forEach(function(e){i+='<?xml-stylesheet type="text/css" href="'+e+'" ?>\n'}),i+='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+r.w+'px" height="'+r.h+'px">',u(t.widgets,function(e){if(e.svg===null)return;i+='<g transform="translate('+(e.x+ -r.x)+" "+(e.y-r.y)+')">',i+=e.svg.innerHTML;if(e.visualVar==="icon"){var t=document.createElement("svg");u(e.svg.icons,function(e,r){B(n,t,r,e.x,e.y,"left",n.legendFontColor,e.font,n.legendFontSize,"central")}),i+=t.innerHTML}i+="</g>"}),i+="</svg>",o(i,e?e:"legend.svg")})}}.call(this),function(){"use strict";function e(e,t,n){function b(e){var t=window.getComputedStyle(e),n=function(e){return parseInt(t.getPropertyValue(e).replace("px",""))||0};return{left:e.getBoundingClientRect().left+n("padding-left"),top:e.getBoundingClientRect().top+n("padding-top")}}function w(e){d=!1,o.removeEventListener("mousemove",N),o.removeEventListener("mouseup",T),h.length?setTimeout(function(){l=h[h.length-1],a.addEventListener("mousedown",x)},0):l=null}function E(e){if(e.data.enter.nodes.length==0)return;var t=e.data.enter.nodes[0];if(p[t.id])return;h.push(t),p[t.id]=!0,d||(l=h[h.length-1],a.addEventListener("mousedown",x))}function S(e){if(e.data.leave.nodes.length==0)return;var t=e.data.leave.nodes[0],n=h.map(function(e){return e}).indexOf(t);h.splice(n,1),delete p[t.id],h.length&&!d?l=h[h.length-1]:a.removeEventListener("mousedown",x)}function x(e){if(!y||e.which==3)return;d=!0,l&&i.graph.nodes().length>0&&(g=!0,a.removeEventListener("mousedown",x),o.addEventListener("mousemove",N),o.addEventListener("mouseup",T),u.settings({mouseEnabled:!1,enableHovering:!1}),r.dispatchEvent("startdrag",{node:l,captor:e,renderer:u}))}function T(e){d=!1,a.addEventListener("mousedown",x),o.removeEventListener("mousemove",N),o.removeEventListener("mouseup",T),u.settings({mouseEnabled:!0,enableHovering:!0});if(m){r.dispatchEvent("drop",{node:l,captor:e,renderer:u});if(s){var t=s.nodes();for(var n=0;n<t.length;n++)delete t[n].alphaX,delete t[n].alphaY}i.refresh()}r.dispatchEvent("dragend",{node:l,captor:e,renderer:u}),m=!1,l=null}function N(e){function n(){var t=b(u.container),n=e.clientX-t.left,o=e.clientY-t.top,a=Math.cos(u.camera.angle),h=Math.sin(u.camera.angle),p=i.graph.nodes(),d=[],v,w,E,S,x,T,N;if(!y||p.length<2)return;N=sigma.utils.getDistance(n,o,l[f+"x"],l[f+"y"]);if(g&&N<l[f+"size"])return;g=!1;for(var C=0;;C++){if(!y)break;S=p[C],S&&(x={x:S.x*a+S.y*h,y:S.y*a-S.x*h,renX:S[f+"x"],renY:S[f+"y"]},d.push(x));if(C==p.length-1)break;if(C>0){if(d[0].x!=d[1].x&&d[0].y!=d[1].y)break;d.pop()}}var k=d[0],L=d[1],A=L.renX-k.renX;A===0&&(A=1);var O=L.renY-k.renY;O===0&&(O=1),n=(n-k.renX)/A*(L.x-k.x)+k.x,o=(o-k.renY)/O*(L.y-k.y)+k.y,v=n*a-o*h,w=o*a+n*h;if(s){E=s.nodes(),T=-1<E.map(function(e){return e.id}).indexOf(l.id);if(T)for(var C=0;C<E.length;C++){c!=l&&(E[C].alphaX=null,E[C].alphaY=null);if(!E[C].alphaX||!E[C].alphaY)E[C].alphaX=E[C].x-n,E[C].alphaY=E[C].y-o;E[C].x=l.x+E[C].alphaX,E[C].y=l.y+E[C].alphaY}}l.x=v,l.y=w,i.refresh({skipIndexation:!0}),m=!0,r.dispatchEvent("drag",{node:l,captor:e,renderer:u}),c=l}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){clearTimeout(t);var t=setTimeout(n,0)}else n()}sigma.classes.dispatcher.extend(this);if(sigma.renderers.webgl&&t instanceof sigma.renderers.webgl)throw new Error("The sigma.plugins.dragNodes is not compatible with the WebGL renderer");var r=this,i=e,s=n,o=document.body,u=t,a=t.container.lastChild,f=t.options.prefix,l=null,c=null,h=[],p={},d=!1,v=!1,m=!1,g=!0,y=!0;t instanceof sigma.renderers.svg&&(a=t.container.firstChild),t.bind("hovers",E),t.bind("hovers",S),t.bind("click",w),this.enable=function(){y=!0},this.disable=function(){y=!1,l=null,c=null,h=[],p={},d=!1,v=!1,m=!1,g=!0},this.unbindAll=function(){a.removeEventListener("mousedown",x),o.removeEventListener("mousemove",N),o.removeEventListener("mouseup",T),u.unbind("hovers",E),u.unbind("hovers",S)}}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t={};sigma.plugins.dragNodes=function(n,r,i){return t[n.id]||(t[n.id]=new e(n,r,i)),n.bind("kill",function(){sigma.plugins.killDragNodes(n)}),n.bind("animate.start",function(){t[n.id].disable()}),n.bind("animate.end",function(){t[n.id].enable()}),t[n.id]},sigma.plugins.killDragNodes=function(n){t[n.id]instanceof e&&(t[n.id].unbindAll(),delete t[n.id])}}.call(window),function(undefined){"use strict";function deepCopy(o){var copy=Object.create(null);for(var i in o)typeof o[i]=="object"&&o[i]!==null?copy[i]=deepCopy(o[i]):typeof o[i]=="function"&&o[i]!==null?eval(" copy[i] = "+o[i].toString()):copy[i]=o[i];return copy}function find(e){var t,n,r;if(t=this.siblingEdgesIndex[e]){n=this.allNeighborsIndex[t.source][t.target];if(Object.keys(n).length===1){r=this.edges(Object.keys(n)[0]);if(r.type!=="parallel")throw new Error('The sibling container must be of type "parallel", was '+r.type);if(r.siblings===undefined)throw new Error('The sibling container has no "siblings" key.');if(Object.keys(r.siblings).length<2)throw new Error("The sibling container must have more than one sibling, had "+Object.keys(r.siblings).length);if(r.siblings[e]===undefined)throw new Error("Sibling container found but the edge sibling is missing.");return r}if(Object.keys(n).length>1){var i;for(i in n){r=this.edges(i);if(r.type==="parallel"&&r.siblings!==undefined){if(!Object.keys(r.siblings).length)throw new Error("Edge sibling found but its container is missing.");if(r.siblings[e]!==undefined)return r}}throw new Error("Edge sibling found but its container is missing.")}throw new Error("Edge sibling found but its container is missing.")}return this.edgesIndex[e]}function get(e){if(!arguments.length||e===undefined)return this.edgesArray.slice(0);if(arguments.length>1)throw new Error("Too many arguments. Use an array instead.");if(typeof e=="number"||typeof e=="string")return find.call(this,e);if(Array.isArray(e)){var t,n,r=[];for(t=0,n=e.length;t<n;t++){if(typeof e[t]!="number"&&typeof e[t]!="string")throw new Error("Invalid argument: an edge id is not a string or a number, was "+e[t]);r.push(find.call(this,e[t]))}return r}throw new Error('Invalid argument: "v" is not a string or an array, was '+e)}function add(e,t){if(!e.siblings){var n=deepCopy(e);e.siblings={},e.siblings[e.id]=n,delete e.color,delete e.label,e.size=1,e.type="parallel",this.siblingEdgesIndex[n.id]=n}e.siblings[t.id]=t,this.siblingEdgesIndex[t.id]=t}function drop(e,t){delete e.siblings[t],delete this.siblingEdgesIndex[t];if(Object.keys(e.siblings).length===1){var n=e.siblings[Object.keys(e.siblings)[0]];this.dropEdge(e.id),this.addEdge(n),delete this.siblingEdgesIndex[e.id],delete this.siblingEdgesIndex[n.id]}}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins"),sigma.classes.graph.hasMethod("edgeSiblings")||sigma.classes.graph.addMethod("edgeSiblings",function(e){return get.call(this,e)}),sigma.classes.graph.hasMethod("addEdgeSibling")||sigma.classes.graph.addMethod("addEdgeSibling",function(e){if(arguments.length==0)throw new TypeError("Missing argument.");if(Object(e)!==e)throw new TypeError('Invalid argument: "edge" is not an object, was '+e);if(typeof e.id!="number"&&typeof e.id!="string")throw new TypeError('Invalid argument key: "edge.id" is not a string or a number, was '+e.id);if(typeof e.source!="number"&&typeof e.source!="string"||!this.nodesIndex[e.source])throw new Error('Invalid argument key: "edge.source" is not an existing node id, was '+e.source);if(typeof e.target!="number"&&typeof e.target!="string"||!this.nodesIndex[e.target])throw new Error('Invalid argument key: "edge.target" is not an existing node id, was '+e.target);if(this.edgesIndex[e.id])throw new Error('Invalid argument: an edge of id "'+e.id+'" already exists.');if(this.siblingEdgesIndex[e.id])throw new Error('Invalid argument: an edge sibling of id "'+e.id+'" already exists.');var t=this.allNeighborsIndex[e.source][e.target];if(t!==undefined&&Object.keys(t).length){var n=this.edges(t[Object.keys(t)[0]].id);add.call(this,n,e)}else this.addEdge(e);return this}),sigma.classes.graph.hasMethod("dropEdgeSibling")||sigma.classes.graph.addMethod("dropEdgeSibling",function(e){if(arguments.length==0)throw new TypeError("Missing argument.");if(typeof e!="number"&&typeof e!="string")throw new TypeError('Invalid argument: "id" is not a string or a number, was '+e);if(this.siblingEdgesIndex[e]){var t=find.call(this,e);drop.call(this,t,e)}else this.dropEdge(e);return this}),sigma.classes.graph.hasMethod("readWithSiblings")||sigma.classes.graph.addMethod("readWithSiblings",function(e){var t,n,r;n=e.nodes||[];for(t=0,r=n.length;t<r;t++)this.addNode(n[t]);n=e.edges||[];for(t=0,r=n.length;t<r;t++)this.addEdgeSibling(n[t]);return this}),sigma.classes.graph.addIndex("siblingEdgesIndex",{constructor:function(){this.siblingEdgesIndex=Object.create(null)}})}.call(this),function(undefined){"use strict";function deepCopy(o){var copy=Object.create(null);for(var i in o)typeof o[i]=="object"&&o[i]!==null?copy[i]=deepCopy(o[i]):typeof o[i]=="function"&&o[i]!==null?eval(" copy[i] = "+o[i].toString()):copy[i]=o[i];return copy}function cloneChain(e){var t=e.slice(0);for(var n=0,r=t.length;n<r;n++)t[n]=deepCopy(t[n]);return t}function strToObjectRef(e,t){return t.split(".").reduce(function(e,t){return e[t]},e)}function Filter(s){function register(e,t,n,r){arguments[3]===undefined&&typeof arguments[2]!="object"&&(r=n,n=null);if(r!==undefined&&typeof r!="number"&&typeof r!="string")throw new TypeError('Invalid argument: "key" is not a number or a string, was '+r);if(r!==undefined&&typeof r=="string"&&!r.length)throw new TypeError('Invalid argument: "key" is an empty string.');if(typeof e!="string")throw new TypeError('Invalid argument: "processor" is not a string, was '+e);if("undo"===r)throw new Error('Invalid argument: "key" has value "undo", which is a reserved keyword.');if(_keysIndex[r])throw new Error('Invalid argument: the filter of key "'+r+'" already exists.');r&&(_keysIndex[r]=!0),_chain.push({key:r,processor:e,predicate:t,options:n||{}})}function unregister(e){_chain=_chain.filter(function(t){return!(t.key in e)});for(var t in e)delete _keysIndex[t]}var _self=this,_s=s,_g=s.graph,_chain=[],_keysIndex=Object.create(null);this.has=function(e){return _keysIndex[e]},this.nodesBy=function(e,t,n){return register("nodes",e,t,n),this},this.edgesBy=function(e,t,n){return register("edges",e,t,n),this},this.neighborsOf=function(e,t,n){if(typeof e!="number"&&typeof e!="string")throw new TypeError("Invalid argument: id is not a string or a number, was "+e);if(typeof e=="string"&&!e.length)throw new TypeError("Invalid argument: id is an empty string.");return register("neighbors",e,t,n),this},this.apply=function(){for(var e=0,t=_chain.length;e<t;++e)switch(_chain[e].processor){case"nodes":Processors.nodes(_g,_chain[e].predicate,_chain[e].options);break;case"edges":Processors.edges(_g,_chain[e].predicate,_chain[e].options);break;case"neighbors":Processors.neighbors(_g,_chain[e].predicate);break;case"undo":Processors.undo(_g,_chain[e].predicate);break;default:throw new Error("Unknown processor "+_chain[e].processor)}return _chain[0]&&"undo"===_chain[0].key&&_chain.shift(),_s&&_s.refresh(),this},this.undo=function(e){var t=Object.create(null),n=arguments.length;if(n===1)if(Object.prototype.toString.call(e)==="[object Array]")for(var r=0,i=e.length;r<i;r++)t[e[r]]=!0;else t[e]=!0;else if(n>1)for(var r=0;r<n;r++)t[arguments[r]]=!0;else this.clear();return unregister(t),_chain.unshift({key:"undo",processor:"undo"}),this},this.clear=function(){return _chain.length=0,_keysIndex=Object.create(null),this},this.kill=function(){return this.clear(),delete _instance[_s.id],_g=null,_s=null,this},this.serialize=function(){var e=cloneChain(_chain);for(var t=0,n=e.length;t<n;t++)e[t].predicate=e[t].predicate.toString().replace(/\s+/g," ").replace(/"use strict"; /,"");return e},this.load=function(chain){if(chain===undefined)throw new TypeError("Missing argument.");if(!Array.isArray(chain))throw new TypeError('Invalid argument: "chain" is not an array, was '+chain);this.clear();var copy=cloneChain(chain);for(var i=0,len=copy.length;i<len;i++){if(copy[i].predicate===undefined)throw new TypeError('Missing filter key: "predicate".');if(copy[i].processor===undefined)throw new TypeError('Missing filter key: "processor".');if(copy[i].key!=undefined&&typeof copy[i].key!="string")throw new TypeError('Invalid filter key: "key" is not a string, was '+copy[i].key.toString());typeof copy[i].predicate=="string"&&eval(" copy[i].predicate = "+copy[i].predicate);if(typeof copy[i].predicate!="function")throw new TypeError('Invalid filter key: "predicate" of key "'+copy[i].key+'" is not a function.');if(typeof copy[i].processor!="string")throw new TypeError('Invalid filter key: "processor" of key "'+copy[i].key+'" is not a string.');copy[i].key&&(_keysIndex[copy[i].key]=!0)}return _chain=copy,this}}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var _instance={};sigma.classes.graph.hasMethod("adjacentNodes")||sigma.classes.graph.addMethod("adjacentNodes",function(e){if(typeof e!="number"&&typeof e!="string")throw new TypeError('Invalid argument: "id" is not a string or a number, was '+e);var t,n=[];for(t in this.allNeighborsIndex[e])n.push(this.nodesIndex[t]);return n}),sigma.classes.graph.hasMethod("adjacentEdges")||sigma.classes.graph.addMethod("adjacentEdges",function(e){if(typeof e!="number"&&typeof e!="string")throw new TypeError('Invalid argument: "id" is not a string or a number, was '+e);var t=this.allNeighborsIndex[e],n,r,i=[];for(r in t)for(n in t[r])i.push(t[r][n]);return i});var Processors={};Processors.nodes=function(e,t,n){if(!e)return;var r=e.nodes(),i=r.length,s=e.edges(),o=s.length;while(i--)r[i].hidden=!t.call({graph:e,get:strToObjectRef},r[i],n)||r[i].hidden;while(o--)if(e.nodes(s[o].source).hidden||e.nodes(s[o].target).hidden)s[o].hidden=!0},Processors.edges=function(e,t,n){if(!e)return;var r=e.edges(),i=r.length;while(i--)r[i].hidden=!t.call({graph:e,get:strToObjectRef},r[i],n)||r[i].hidden},Processors.neighbors=function(e,t){if(!e)return;var n=e.nodes(),r=n.length,i=e.edges(),s=i.length,o=e.adjacentNodes(t),u=o.length,a={};while(u--)a[o[u].id]=!0;while(r--)n[r].id!==t&&!(n[r].id in a)&&(n[r].hidden=!0);while(s--)if(e.nodes(i[s].source).hidden||e.nodes(i[s].target).hidden)i[s].hidden=!0},Processors.undo=function(e){if(!e)return;var t=e.nodes(),n=t.length,r=e.edges(),i=r.length;while(n--)t[n].hidden=!1;while(i--)r[i].hidden=!1},sigma.plugins.filter=function(e){return _instance[e.id]||(_instance[e.id]=new Filter(e),e.bind("kill",function(){sigma.plugins.killFilter(e)})),_instance[e.id]},sigma.plugins.killFilter=function(e){_instance[e.id]instanceof Filter&&_instance[e.id].kill(),delete _instance[e.id]}}.call(this),function(e){"use strict";function r(){!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement?t.container.requestFullscreen?t.container.requestFullscreen():t.container.msRequestFullscreen?t.container.msRequestFullscreen():t.container.mozRequestFullScreen?t.container.mozRequestFullScreen():t.container.webkitRequestFullscreen&&t.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function i(e){t=this,n=null,e?(n=document.getElementById(e.id),n.removeEventListener("click",r),n.addEventListener("click",r)):r()}function s(){r(),t=null,n&&n.removeEventListener("click",r)}if(typeof sigma=="undefined")throw"sigma is not declared";var t=null,n=null;sigma.renderers.canvas.prototype.fullScreen=i,sigma.renderers.webgl.prototype.fullScreen=i,sigma.renderers.canvas.prototype.killFullScreen=s,sigma.renderers.webgl.prototype.killFullScreen=s}.call(this),function(e){"use strict";function t(e){return e===e&&Object.prototype.toString.call(e)==="[object Number]"}function n(e){return typeof e=="object"&&!!e}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins"),sigma.plugins.generators={},sigma.plugins.generators.random=function(e){if(!e)throw new Error("Missing argument: options");if(!n(e))throw new TypeError("Invalid argument: options is not an object, was "+e);if(!t(e.nbNodes)||e.nbNodes<1)throw new TypeError("Invalid argument: options.nbNodes is not a positive number, was "+e.nbNodes);if(!t(e.nbEdges)||e.nbEdges<1)throw new TypeError("Invalid argument: options.nbEdges is not a number, was "+e.nbEdges);var r,i=e.nbNodes,s=e.nbEdges,o={nodes:[],edges:[]};for(r=0;r<i;r++)o.nodes.push({id:"n"+r,label:"Node "+r,x:Math.random(),y:Math.random(),size:1});for(r=0;r<s;r++)o.edges.push({id:"e"+r,label:"Edge "+r,source:"n"+(Math.random()*i|0),target:"n"+(Math.random()*i|0)});return o},sigma.plugins.generators.balancedTree=function(e){if(!e)throw new Error("Missing argument: options");if(!n(e))throw new TypeError("Invalid argument: options is not an object, was "+e);if(!t(e.nbChildren)||e.nbChildren<1)throw new TypeError("Invalid argument: options.nbChildren is not a positive number, was "+e.nbChildren);if(!t(e.height)||e.height<1)throw new TypeError("Invalid argument: options.height is not a positive number, was "+e.height);var r=0,i=0,s=e.nbChildren,o=e.height,u={nodes:[{id:"n0",label:"Node 0",x:Math.random(),y:Math.random(),size:1,index:0}],edges:[]},a=[],f,l,c,h,p;for(f=0;f<s;f++)h={id:"n"+ ++r,label:"Node "+r,x:Math.random(),y:Math.random(),size:1,index:r-1},u.nodes.push(h),a.push(h),u.edges.push({id:"e"+i++,label:"Edge "+i,source:"n0",target:"n"+r});for(c=1;c<o;c++){p=a,a=[];for(l=0;l<p.length;l++)for(f=0;f<s;f++)h={id:"n"+ ++r,label:"Node "+r,x:Math.random(),y:Math.random(),size:1,index:r-1},a.push(h),u.nodes.push(h),u.edges.push({id:"e"+i++,label:"Edge "+i,source:"n"+p[l].index,target:"n"+r})}return u},sigma.plugins.generators.erdosRenyi=function(e){if(!e)throw new Error("Missing argument: options");if(!n(e))throw new TypeError("Invalid argument: options is not an object, was "+e);if(!t(e.nbNodes)||e.nbNodes<1)throw new TypeError("Invalid argument: options.nbNodes is not a positive number, was "+e.nbNodes);if(e.nbNodes<3)throw new TypeError("Invalid argument: options.nbNodes is smaller than 3, was "+e.nbNodes);if("nbEdges"in e&&"p"in e)throw new TypeError("Invalid argument: choose between options.nbEdges and options.p");var r={nodes:[],edges:[]},i,s,o,u=0,a=e.nbNodes,f=e.p;if(e.p>=0){if(!t(e.p)||e.p<0)throw new TypeError("Invalid argument: options.p is not a positive number, was "+e.p);for(s=0;s<a;s++){r.nodes.push({id:"n"+s,label:"Node "+s,x:Math.random(),y:Math.random(),size:1});for(o=0;o<s;o++)Math.random()<f&&r.edges.push({id:"e"+u++,label:"Edge "+u,source:"n"+s,target:"n"+o})}}else{if(!t(e.nbEdges)||e.nbEdges<1)throw new TypeError("Invalid argument: options.nbEdges is not a positive number, was "+e.nbEdges);var l=[],c=e.nbEdges,u;for(s=0;s<a;s++){r.nodes.push({id:"n"+s,label:"Node "+s,x:Math.random(),y:Math.random(),size:1});for(o=s+1;o<a;o++)l.push({source:"n"+s,target:"n"+o})}u=l.length-1;for(s=0;s<c;s++)i=l.splice(Math.floor(Math.random()*u),1)[0],i.id="e"+s,i.label="Edge "+s,r.edges.push(i),u--}return r},sigma.plugins.generators.barabasiAlbert=function(e){if(!e)throw new Error("Missing argument: options");if(!n(e))throw new TypeError("Invalid argument: options is not an object, was "+e);if(!t(e.nbNodes)||e.nbNodes<1)throw new TypeError("Invalid argument: options.nbNodes is not a positive number, was "+e.nbNodes);if(e.nbNodes<3)throw new TypeError("Invalid argument: options.nbNodes is smaller than 3, was "+e.nbNodes);if(!t(e.m0)||e.m0<=0)throw new TypeError("Invalid argument: options.m0 is not a positive number, was "+e.m0);if(!t(e.m)||e.m<=0)throw new TypeError("Invalid argument: options.m is not a positive number, was "+e.m);if(e.m0>=e.nbNode)throw new TypeError("Invalid argument: options.m0 is greater than options.nbNodes, was "+e.m0);if(e.m>e.m0)throw new TypeError("Invalid argument: options.m is strictly greater than options.m0, was "+e.m);var r={nodes:[],edges:[]},i={},s=[],o,u,a,f,l,c,h,p,d=0,v=e.nbNodes,m=e.m0,g=e.m;for(o=0;o<m;o++)r.nodes.push({id:"n"+o,label:"node "+o,x:Math.random(),y:Math.random(),size:1}),s[o]=0;for(o=0;o<m;o++)for(u=o+1;u<m;u++)a={id:"e"+d++,label:"Edge "+d,source:"n"+o,target:"n"+u},i[a.source+"-"+a.target]=a,r.edges.push(a),s[o]++,s[u]++;for(o=m;o<v;o++){r.nodes.push({id:"n"+o,label:"node "+o,x:Math.random(),y:Math.random(),size:1}),s[o]=0,f=0;for(u=0;u<o;u++)f+=s[u];l=0;for(c=0;c<g;c++){h=Math.random(),p=0;for(u=0;u<o;u++){if(i[o+"-"+u]||i[u+"-"+o])continue;o==1?p=1:p+=s[u]/f+l/(o-c);if(h<=p){l+=s[u]/f,a={id:"e"+d++,label:"Edge "+d,source:"n"+o,target:"n"+u},i[a.source+"-"+a.target]=a,r.edges.push(a),s[o]++,s[u]++;break}}}}return r},sigma.plugins.generators.wattsStrogatz=function(e){function c(t,n){if(t==n||a[t+"-"+n])return 0;var r=h(t,n);return r>=l?1:r===0?p:Math.pow(r/l,e.alpha)*(1-p)+p}function h(e,t){var n=0,r;for(r=0;r<f;r++)r!=e&&r!=t&&a[e+"-"+r]&&a[t+"-"+r]&&n++;return n}if(!e)throw new Error("Missing argument: options");if(!n(e))throw new TypeError("Invalid argument: options is not an object, was "+e);if(!t(e.nbNodes)||e.nbNodes<1)throw new TypeError("Invalid argument: options.nbNodes is not a positive number, was "+e.nbNodes);if(e.nbNodes<3)throw new TypeError("Invalid argument: options.nbNodes is smaller than 3, was "+e.nbNodes);if(!t(e.k)||e.k%2!=0)throw new TypeError("Invalid argument: options.k is not an even integer, was "+e.k);var r={nodes:[],edges:[]},i,s,o=0,u,a={},f=e.nbNodes,l=e.k;if("alpha"in e){if(!t(e.alpha)||e.alpha<0||e.alpha>1)throw new TypeError("Invalid argument: options.alpha is not a number between [0,1], was "+e.alpha);var p=Math.pow(10,-10),d=0,v=[],m=f*l/2,g,y,b,w;for(i=0;i<f;i++)r.nodes.push({id:"n"+i,label:"Node "+i,x:Math.random(),y:Math.random(),size:1}),u={id:"e"+o++,label:"Edge "+o,source:"n"+i,target:"n"+(i+1)%f},a[u.source+"-"+u.target]=u,r.edges.push(u),d++;while(d<m){for(i=0;i<f;i++)v.push(i);while(d<m&&v.length>0){i=v.splice(Math.floor(Math.random()*v.length),1)[0],g=[],y=0;for(s=0;s<f;s++)g[s]=c(i,s),y+=g[s];b=Math.random(),w=0;for(s=0;s<f;s++)i!=s&&(w+=g[s]/y,b<=w&&(u={id:"e"+o++,label:"Edge "+o,source:"n"+i,target:"n"+s},r.edges.push(u),d++,a[u.source+"-"+u.target]=u))}}}else{if(!t(e.beta)||e.beta<0||e.beta>1)throw new TypeError("Invalid argument: options.beta is not a number between [0,1], was "+e.beta);var E;l>>=1;for(i=0;i<f;i++){r.nodes.push({id:"n"+i,label:"node "+i,x:Math.random(),y:Math.random(),size:1});for(s=1;s<=l;s++)u={id:"e"+o++,label:"Edge "+o,source:"n"+i,target:"n"+(i+s)%f},a[u.source+"-"+u.target]=u,r.edges.push(u)}for(i=0;i<f;i++)for(s=1;s<=l;s++)if(Math.random()<=e.beta){do E=Math.floor(Math.random()*(f-1));while(E==i||a["n"+i+"-n"+E]);var S=(i+s)%f;a["n"+i+"-n"+S].target="n"+E,a["n"+i+"-n"+E]=a["n"+i+"-n"+S],delete a["n"+i+"-n"+S]}}return r},sigma.plugins.generators.path=function(e){if(!e||e<0)throw new TypeError('Invalid argument: "length" is not a positive number, was '+e);var t={nodes:[{id:"n0",label:"Node 0",x:Math.random(),y:Math.random(),size:1}],edges:[]};for(var n=1;n<e;++n)t.nodes.push({id:"n"+n,label:"Node "+n,x:Math.random(),y:Math.random(),size:1}),t.edges.push({id:"e"+n,label:"Edge "+n,source:"n"+(n-1),target:"n"+n});return t},sigma.plugins.generators.grid=function(e,t){if(e<1)throw new TypeError('Invalid argument: "n" is not a positive integer, was '+e);if(t<1)throw new TypeError('Invalid argument: "m" is not a positive integer, was '+t);var n={nodes:[],edges:[]},r,i,s=0,o=[],u,a;o.length=e*t;if(e===1&&t===1)return n.nodes.push({id:"n0",label:"Node 0",x:Math.random(),y:Math.random(),size:1}),n;for(r=0;r<e;++r)for(i=0;i<t;++i)u=r+i*e,o[u]||(n.nodes.push({id:"n"+u,label:"Node "+u,x:Math.random(),y:Math.random(),size:1}),o[u]=!0),r>0&&(a=r-1+i*e,o[a]||(n.nodes.push({id:"n"+a,label:"Node "+a,x:Math.random(),y:Math.random(),size:1}),o[a]=!0),n.edges.push({id:"e"+s++,label:"Edge "+s,source:"n"+u,target:"n"+a})),i>0&&(a=r+(i-1)*e,o[a]||(n.nodes.push({id:"n"+a,label:"Node "+a,x:Math.random(),y:Math.random(),size:1}),o[a]=!0),n.edges.push({id:"e"+s++,label:"Edge "+s,source:"n"+u,target:"n"+a}));return n}}.call(this),function(e){"use strict";function r(e,n,r){function s(t){var n=Math.max(e.settings("zoomMin"),Math.min(e.settings("zoomMax"),e.camera.ratio*(t.ratio||1)));sigma.misc.animation.camera(e.camera,{x:e.camera.x+(t.x||0),y:e.camera.y+(t.y||0),ratio:n},{duration:t.duration})}function o(){s({x:-r.displacement,duration:r.duration})}function u(){s({y:-r.displacement,duration:r.duration})}function a(){s({x:r.displacement,duration:r.duration})}function f(){s({y:r.displacement,duration:r.duration})}function l(){s({ratio:1/r.zoomingRatio,duration:r.duration})}function c(){s({ratio:r.zoomingRatio,duration:r.duration})}r=sigma.utils.extend(r,t),r.zoomingRatio=r.zoomingRatio||e.settings("zoomingRatio"),r.duration=r.duration||e.settings("mouseZoomDuration"),this.domElt=n.container,this.keys={},this.currentEvents=null;var i=this;sigma.classes.dispatcher.extend(this),this.keyDown=function(e){e.which!==9&&e.which!==18&&e.which!==20&&!i.keys[e.which]&&(i.keys[e.which]=!0,i.currentEvents=Object.keys(i.keys).join("+"),i.dispatchEvent(i.currentEvents))},this.keyUp=function(e){delete i.keys[e.which],i.currentEvents=null},this.focus=function(e){return i.domElt.focus(),!0},this.blur=function(e){return i.domElt.blur(),i.keys={},i.currentEvents=null,!0},this.domElt.tabIndex=r.tabIndex,r.autofocus&&(this.domElt.focus(),this.domElt.addEventListener("mouseover",this.focus,!1),this.domElt.addEventListener("mouseout",this.blur,!1)),this.domElt.addEventListener("keydown",this.keyDown,!1),this.domElt.addEventListener("keyup",this.keyUp,!1),this.bind("37 18+37",o),this.bind("38 18+38",u),this.bind("39 18+39",a),this.bind("40 18+40",f),this.bind("32+38 18+32+38",l),this.bind("32+40 18+32+40",c)}if(typeof sigma=="undefined")throw"sigma.plugins.keyboard: sigma is not declared";sigma.utils.pkg("sigma.plugins");var t={displacement:100,duration:200,zoomingRatio:1.7,autofocus:!0,tabIndex:-1},n={};sigma.plugins.keyboard=function(e,t,i){return n[e.id]||(n[e.id]=new r(e,t,i),e.bind("kill",function(){sigma.plugins.killKeyboard(e)})),n[e.id]},sigma.plugins.killKeyboard=function(e){n[e.id]instanceof r&&(n[e.id].unbind(),n[e.id].domElt.removeEventListener("mouseover",n[e.id].focus,!1),n[e.id].domElt.removeEventListener("mouseout",n[e.id].blur,!1),n[e.id].domElt.removeEventListener("keydown",n[e.id].keyDown,!1),n[e.id].domElt.removeEventListener("keyup",n[e.id].keyUp,!1
),n[e.id].domElt=null,n[e.id].keys={},n[e.id].currentEvents=null,delete n[e.id])}}.call(this),function(e){"use strict";function r(n,r,i){sigma.classes.dispatcher.extend(this);if(sigma.renderers.webgl&&r instanceof sigma.renderers.webgl)throw new Error("The sigma.plugins.lasso is not compatible with the WebGL renderer");this.sigmaInstance=n,this.renderer=r,this.drawingCanvas=e,this.drawingContext=e,this.drewPoints=[],this.selectedNodes=[],this.isActive=!1,this.isDrawing=!1,t=document.body,this.settings=new sigma.classes.configurable({strokeStyle:"black",lineWidth:2,fillWhileDrawing:!1,fillStyle:"rgba(200, 200, 200, 0.25)",cursor:"crosshair"},i||{})}function o(e){var t=this.drawingCanvas.getBoundingClientRect();this.isActive&&(this.isDrawing=!0,this.drewPoints=[],this.selectedNodes=[],this.sigmaInstance.refresh(),this.drewPoints.push({x:e.clientX-t.left,y:e.clientY-t.top}),this.drawingCanvas.style.cursor=this.settings("cursor"),e.stopPropagation())}function u(e){if(this.isActive&&this.isDrawing){var t=0,n=0,r=this.drawingCanvas.getBoundingClientRect();switch(e.type){case"touchmove":t=e.touches[0].clientX,n=e.touches[0].clientY;break;default:t=e.clientX,n=e.clientY}this.drewPoints.push({x:t-r.left,y:n-r.top}),this.drawingContext.lineWidth=this.settings("lineWidth"),this.drawingContext.strokeStyle=this.settings("strokeStyle"),this.drawingContext.fillStyle=this.settings("fillStyle"),this.drawingContext.lineJoin="round",this.drawingContext.lineCap="round",this.drawingContext.clearRect(0,0,this.drawingContext.canvas.width,this.drawingContext.canvas.height);var i=this.drewPoints[0],s=this.drewPoints[1],o=this.drewPoints.length,u=function(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}};this.drawingContext.beginPath(),this.drawingContext.moveTo(i.x,i.y);for(var a=1;a<o;a++){var f=u(i,s);this.drawingContext.quadraticCurveTo(i.x,i.y,f.x,f.y),i=this.drewPoints[a],s=this.drewPoints[a+1]}this.drawingContext.lineTo(i.x,i.y),this.drawingContext.stroke(),this.settings("fillWhileDrawing")&&this.drawingContext.fill(),e.stopPropagation()}}function a(e){if(this.isActive&&this.isDrawing){this.isDrawing=!1;var t=this.renderer.nodesOnScreen,n=t.length,r=0,i=this.renderer.options.prefix||"";while(n--){var s=t[n],o=s[i+"x"],u=s[i+"y"];this.drawingContext.isPointInPath(o,u)&&!s.hidden&&this.selectedNodes.push(s)}this.dispatchEvent("selectedNodes",this.selectedNodes),this.drawingContext.clearRect(0,0,this.drawingCanvas.width,this.drawingCanvas.height),this.drawingCanvas.style.cursor=this.settings("cursor"),e.stopPropagation()}}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t=e,n={};r.prototype.clear=function(){return this.deactivate(),this.sigmaInstance=e,this.renderer=e,this},r.prototype.activate=function(){return this.sigmaInstance&&!this.isActive&&(this.isActive=!0,this.renderer.domElements.lasso||(this.renderer.initDOM("canvas","lasso"),this.drawingCanvas=this.renderer.domElements.lasso,this.drawingCanvas.width=this.renderer.container.offsetWidth,this.drawingCanvas.height=this.renderer.container.offsetHeight,this.renderer.container.appendChild(this.drawingCanvas),this.drawingContext=this.drawingCanvas.getContext("2d"),this.drawingCanvas.style.cursor=this.settings("cursor")),i.apply(this)),this},r.prototype.deactivate=function(){return this.sigmaInstance&&this.isActive&&(this.isActive=!1,this.isDrawing=!1,s.apply(this),this.renderer.domElements.lasso&&(this.renderer.container.removeChild(this.renderer.domElements.lasso),delete this.renderer.domElements.lasso,this.drawingCanvas.style.cursor="",this.drawingCanvas=e,this.drawingContext=e,this.drewPoints=[])),this};var i=function(){this.drawingCanvas.addEventListener("mousedown",o.bind(this)),t.addEventListener("mousemove",u.bind(this)),t.addEventListener("mouseup",a.bind(this)),this.drawingCanvas.addEventListener("touchstart",o.bind(this)),t.addEventListener("touchmove",u.bind(this)),t.addEventListener("touchcancel",a.bind(this)),t.addEventListener("touchleave",a.bind(this)),t.addEventListener("touchend",a.bind(this))},s=function(){this.drawingCanvas.removeEventListener("mousedown",o.bind(this)),t.removeEventListener("mousemove",u.bind(this)),t.removeEventListener("mouseup",a.bind(this)),this.drawingCanvas.removeEventListener("touchstart",o.bind(this)),this.drawingCanvas.removeEventListener("touchmove",u.bind(this)),t.removeEventListener("touchcancel",a.bind(this)),t.removeEventListener("touchleave",a.bind(this)),t.removeEventListener("touchend",a.bind(this))};r.prototype.getSelectedNodes=function(){return this.selectedNodes},sigma.plugins.lasso=function(e,t,i){return n[e.id]||(n[e.id]=new r(e,t,i)),e.bind("kill",function(){n[e.id]instanceof r&&(n[e.id].clear(),delete n[e.id])}),n[e.id]}}.call(this),function(){"use strict";function n(e){var t=e.settings("autoRescale");return t?Array.isArray(t)?t.indexOf("nodePosition")!==-1:!0:!1}function r(e,t){var n,r,i=-Infinity,s=Infinity,o=Infinity,u=-Infinity,a=-Infinity;for(n=0,r=e.length;n<r;n++)i=Math.max(e[n][t+"size"],i),u=Math.max(e[n][t+"x"],u),s=Math.min(e[n][t+"x"],s),a=Math.max(e[n][t+"y"],a),o=Math.min(e[n][t+"y"],o);return i=i||1,{sizeMax:i,minX:s,minY:o,maxX:u,maxY:a}}function i(t,i){function o(e){var t,r,i,o,u,a,f;t=(e.minX+e.maxX)*.5,r=(e.minY+e.maxY)*.5;if(n(s.s)){var l,c,h,p,d;d=s.s.camera.getRectangle(e.maxX-e.minX,e.maxY-e.minY),o=d.x2-d.x1||1,u=d.height||1,l=sigma.utils.getBoundaries(s.s.graph,s.s.camera.readPrefix),c=s.s.camera.getRectangle(l.maxX-l.minX,l.maxY-l.minY),h=c.x2-c.x1||1,p=c.height||1,a=h-s.settings.padding.left-s.settings.padding.right,f=p-s.settings.padding.top-s.settings.padding.bottom,i=Math.max(o/a,u/f)}else o=e.maxX-e.minX+e.sizeMax*2,u=e.maxY-e.minY+e.sizeMax*2,a=s.s.renderers[0].width-s.settings.padding.left-s.settings.padding.right,f=s.s.renderers[0].height-s.settings.padding.top-s.settings.padding.bottom,i=Math.max(o/a,u/f);return i=Math.max(s.s.settings("zoomMin"),Math.min(s.s.settings("zoomMax"),i)),t+=(s.settings.padding.right-s.settings.padding.left)*i*.5,r+=(s.settings.padding.bottom-s.settings.padding.top)*i*.5,{x:t,y:r,ratio:i}}var s=this;this.s=t,this.settings=sigma.utils.extend(i,e),this.settings.zoomDef=this.settings.zoomDef||this.s.settings("zoomMax"),this.s.bind("kill",function(){sigma.plugins.killLocate(s.s)}),this.nodes=function(e,i){if(arguments.length<1)throw new TypeError("Too few arguments.");if(arguments.length===3&&typeof i!="object")throw new TypeError('Invalid argument: "options" is not an object, was '+i);var u,a,f=sigma.utils.extend(i,s.settings.animation.node),l=s.s.camera.ratio,c=n(s.s);if(typeof e=="string"||typeof e=="number"){a=s.s.graph.nodes(e);if(a===undefined)throw new Error('Invalid argument: the node of id "'+e+'" does not exist.');u={x:a[s.s.camera.readPrefix+"x"],y:a[s.s.camera.readPrefix+"y"],ratio:c?s.s.settings("zoomMin"):s.settings.zoomDef}}else{if(!Array.isArray(e))throw new TypeError('Invalid argument: "v" is not a string, a number, or an array, was '+e);var h=r(e.map(function(e){return s.s.graph.nodes(e)}),s.s.camera.readPrefix);u=o(h)}return s.settings.focusOut&&c?sigma.misc.animation.camera(t.camera,{x:(s.s.camera.x+u.x)*.5,y:(s.s.camera.y+u.y)*.5,ratio:s.settings.zoomDef},{duration:f.duration,onComplete:function(){sigma.misc.animation.camera(s.s.camera,u,f)}}):sigma.misc.animation.camera(s.s.camera,u,f),s},this.edges=function(e,i){if(arguments.length<1)throw new TypeError("Too few arguments.");if(arguments.length===3&&typeof i!="object")throw new TypeError('Invalid argument: "options" is not an object, was '+i);var u,a,f,l=sigma.utils.extend(i,s.settings.animation.edge),c=s.s.camera.ratio,h=n(s.s);if(typeof e=="string"||typeof e=="number"){a=s.s.graph.edges(e);if(a===undefined)throw new Error('Invalid argument: the edge of id "'+e+'" does not exist.');f=r([s.s.graph.nodes(a.source),s.s.graph.nodes(a.target)],s.s.camera.readPrefix),u=o(f)}else{if(!Array.isArray(e))throw new TypeError('Invalid argument: "v" is not a string or a number, or an array, was '+e);var p,d,v=[];for(p=0,d=e.length;p<d;p++)a=s.s.graph.edges(e[p]),v.push(s.s.graph.nodes(a.source)),v.push(s.s.graph.nodes(a.target));f=r(v,s.s.camera.readPrefix),u=o(f)}return s.settings.focusOut&&h?sigma.misc.animation.camera(t.camera,{x:(s.s.camera.x+u.x)*.5,y:(s.s.camera.y+u.y)*.5,ratio:s.settings.zoomDef},{duration:l.duration,onComplete:function(){sigma.misc.animation.camera(s.s.camera,u,l)}}):sigma.misc.animation.camera(s.s.camera,u,l),s},this.center=function(e,t){var n=sigma.utils.extend(t,s.settings.animation.center);return s.s.graph.nodes().length?s.nodes(s.s.graph.nodes().map(function(e){return e.id}),n):sigma.misc.animation.camera(s.s.camera,{x:0,y:0,ratio:e},n),s},this.setPadding=function(e){return s.settings.padding=sigma.utils.extend(e,s.settings.padding),s},this.kill=function(){s.settings=null,s.s=null}}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var e={animation:{node:{duration:300},edge:{duration:300},center:{duration:300}},padding:{top:0,right:0,bottom:0,left:0},focusOut:!1,zoomDef:null},t={};sigma.plugins.locate=function(e,n){return t[e.id]||(t[e.id]=new i(e,n)),t[e.id]},sigma.plugins.killLocate=function(e){t[e.id]instanceof i&&t[e.id].kill(),delete t[e.id]}}.call(window),function(){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.classes.graph.addMethod("neighborhood",function(e){var t,n,r,i,s,o={},u={},a={nodes:[],edges:[]};if(!this.nodes(e))return a;i=this.nodes(e),s={},s.center=!0;for(t in i)s[t]=i[t];o[e]=!0,a.nodes.push(s);for(t in this.allNeighborsIndex[e]){o[t]||(o[t]=!0,a.nodes.push(this.nodesIndex[t]));for(n in this.allNeighborsIndex[e][t])u[n]||(u[n]=!0,a.edges.push(this.edgesIndex[n]))}for(t in o)if(t!==e)for(n in o)if(n!==e&&t!==n&&this.allNeighborsIndex[t][n])for(r in this.allNeighborsIndex[t][n])u[r]||(u[r]=!0,a.edges.push(this.edgesIndex[r]));return a}),sigma.utils.pkg("sigma.plugins"),sigma.plugins.neighborhoods=function(){var e=!1,t=[],n=new sigma.classes.graph;this.neighborhood=function(e){return n.neighborhood(e)},this.load=function(e,t){var r=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject){e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(t in e)try{return new ActiveXObject(e[t])}catch(n){}}return null}();if(!r)throw"XMLHttpRequest not supported, cannot load the data.";return r.open("GET",e,!0),r.onreadystatechange=function(){r.readyState===4&&(n.clear().read(JSON.parse(r.responseText)),t&&t())},r.send(),this},this.read=function(e){n.clear().read(e)}}}.call(window),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma.plugins.poweredBy: sigma not in scope.";sigma.utils.pkg("sigma.settings");var t={poweredByHTML:"Powered by Linkurious.js",poweredByURL:"https://github.com/Linkurious/linkurious.js",poweredByPingURL:""};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(e){function t(e){e=e||{};var t=this,n,r=e.html||this.settings("poweredByHTML"),i=e.url||this.settings("poweredByURL"),s=e.pingURL||this.settings("poweredByPingURL");if(!document.getElementsByClassName("sigma-poweredby").length){i?n=['<a href="'+i+'" target="_blank" style="font-family:Lato,sans-serif;font-size:11px;color:#333;text-decoration:none;">'+r+"</a>"]:n=[r];if(s){var o=new Image;o.src=s}var u=document.createElement("div");u.setAttribute("class","sigma-poweredby"),u.innerHTML=n.join(""),u.style.position="absolute",u.style.bottom="2px",u.style.right="1px",u.style.zIndex="1000",u.style.background="rgba(255, 255, 255, 0.8)",this.container.appendChild(u)}}sigma.renderers.canvas.prototype.poweredBy=t,sigma.renderers.webgl.prototype.poweredBy=t}.call(this),function(e){"use strict";function o(e,t){var n=e?e.length:0;if(!n)return[];var r=-1,i=[],s=t.length;e:while(++r<n){var o=e[r];if(o===o){var u=s;while(u--)if(t[u]===o)continue e;i.push(o)}else t.indexOf(o)<0&&i.push(o)}return i}function u(e){i=e.which===32,n.removeEventListener("keydown",u,!1),n.addEventListener("keyup",a,!1)}function a(e){i=!1,n.addEventListener("keydown",u,!1),n.removeEventListener("keyup",a,!1)}function f(e,t,a){function d(){t.dropEdges(),t.nodes().length===e.graph.nodes().length?t.dropNodes():t.addNodes(),e.refresh({skipIndexation:!0})}function v(){c++}function m(){c=0,l.container.lastChild.addEventListener("mousemove",v)}function g(){setTimeout(function(){c=0;var e=t.nodes()[0];e&&r===null&&(r=e.id)},1),l.container.lastChild.removeEventListener("mousemove",v)}function y(){t.dropEdges(),t.dropNodes(),e.refresh({skipIndexation:!0})}function b(){var n=t.nodes().map(function(e){return e.id}),r=t.edges().map(function(e){return e.id});t.dropEdges(r),t.dropNodes(n),n.length==e.graph.nodes().length?e.graph.clear():(e.graph.dropEdges(r),e.graph.dropNodes(n)),e.refresh()}function w(){t.addNeighbors(),e.refresh({skipIndexation:!0})}function E(){t.dropEdges(),t.setNodesBy(function(t){return e.graph.degree(t.id)===0}),e.refresh({skipIndexation:!0})}function S(){t.dropEdges(),t.setNodesBy(function(t){return e.graph.adjacentNodes(t.id).length===1}),e.refresh({skipIndexation:!0})}function x(e){var n=e.data;n.length?(t.dropEdges(),t.addNodes(n.map(function(e){return e.id})),r=t.nodes()[0].id):(t.dropNodes(),r=null)}var f=this,l=a||e.renderers[0],c=0,h=null,p=null;n=n||document.getElementsByTagName("body")[0],l.container.lastChild.addEventListener("mousedown",m),l.container.lastChild.addEventListener("mouseup",g),this.init=function(){var e=t.nodes();e.length&&(r=e[0].id)},this.clickNodesHandler=function(n){if(c>1)return;var u=n.data.node.map(function(e){return e.id}),a=t.nodes().map(function(e){return e.id}),f=o(u,a);t.dropEdges();if(i){var l=o(u,f);t.dropNodes(l)}else{a.length>1&&t.addNodes(u);var h=t.nodes()[0];h!=null&&(r===h.id?f.length?(t.dropNodes(),r=null):setTimeout(function(){s||(t.dropNodes(),r=null,e.refresh({skipIndexation:!0}))},e.settings("doubleClickTimeout")):r=h.id)}t.addNodes(f),e.refresh({skipIndexation:!0})},this.doubleClickNodesHandler=function(t){s=!0,setTimeout(function(){s=!1},100+e.settings("doubleClickTimeout"))},this.clickEdgesHandler=function(n){if(c>1)return;var r=n.data.edge.map(function(e){return e.id}),s=t.edges().map(function(e){return e.id}),u=o(r,s);t.dropNodes();if(i){var a=o(r,u);t.dropEdges(a)}else t.dropEdges(),s.length>1&&t.addEdges(r);t.addEdges(u),e.refresh({skipIndexation:!0})},e.bind("clickNodes",this.clickNodesHandler),e.bind("doubleClickNodes",this.doubleClickNodesHandler),e.bind("clickEdges",this.clickEdgesHandler),n.addEventListener("keydown",u,!1),this.bindKeyboard=function(e){if(!e)throw new Error('Missing argument: "keyboard"');return h=e,h.bind("32+65 18+32+65",d),h.bind("32+85 18+32+85",y),h.bind("32+46 18+32+46",b),h.bind("32+69 18+32+69",w),h.bind("32+73 18+32+73",E),h.bind("32+76 18+32+76",S),this},this.unbindKeyboard=function(){return h&&(h.unbind("32+65 18+32+65",d),h.unbind("32+85 18+32+85",y),h.unbind("32+46 18+32+46",b),h.unbind("32+69 18+32+69",w),h.unbind("32+73 18+32+73",E),h.unbind("32+76 18+32+76",S),h=null),this},this.bindLasso=function(e){if(!e)throw new Error('Missing argument: "lassoInstance"');p=e,p.bind("selectedNodes",x)},this.unbindLasso=function(){p&&p.unbind("selectedNodes",x)},this.clear=function(){e.unbind("clickNodes",f.clickNodesHandler),e.unbind("doubleClickNodes",f.doubleClickNodesHandler),e.unbind("clickEdges",f.clickEdgesHandler),f.unbindKeyboard(),f.unbindLasso(),l.container.lastChild.removeEventListener("mousedown",m),l.container.lastChild.removeEventListener("mouseup",g),l.container.lastChild.removeEventListener("mousemove",v),l=null,h=null}}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t={},n=null,r=null,i=!1,s=!1;sigma.plugins.select=function(e,n,r){return t[e.id]||(t[e.id]=new f(e,n),e.bind("kill",function(){sigma.plugins.killSelect(e)})),t[e.id]},sigma.plugins.killSelect=function(e){t[e.id]instanceof f&&(t[e.id].clear(),delete t[e.id]),!t.length&&n&&(n.removeEventListener("keydown",u,!1),n.removeEventListener("keyup",a,!1),n=null)}}.call(this),function(){"use strict";function t(t,n,r){function p(e){e.preventDefault()}function d(){a&&a.parentNode&&(a.parentNode.removeChild(a),a=null)}function v(){clearTimeout(f),clearTimeout(l),f=!1,l=!1,d()}function m(e){clearTimeout(f),clearTimeout(l),f=!1,l=setTimeout(function(){c||d()},e)}var i=this,s=sigma.utils.extend(r.stage,e.stage),o=sigma.utils.extend(r.node,e.node),u=sigma.utils.extend(r.edge,e.edge),a,f,l,c=!1,h=!1;sigma.classes.dispatcher.extend(this),t.bind("kill",function(){sigma.plugins.killTooltips(t)}),this.open=function(e,r,i,s,o){d(),a=document.createElement("div");if(r.renderer){var u=Object.create(null),f,l,h;for(h in e)u[h]=e[h];f=r.renderer.call(t.graph,u,r.template),l=typeof f;if(l==="undefined")return;l==="string"?a.innerHTML=f:a.appendChild(f)}else a.innerHTML=r.template;var p=window.getComputedStyle(n.container).position;if(p!=="static"){a.style.position="absolute";var v=n.container.getBoundingClientRect();i=~~(i-v.left),s=~~(s-v.top)}a.className=r.cssClass,r.position!=="css"&&(p==="static"&&(a.style.position="absolute"),a.style.left=i+"px",a.style.top=s+"px"),a.addEventListener("mouseenter",function(){c=!0},!1),a.addEventListener("mouseleave",function(){c=!1},!1),setTimeout(function(){if(!a)return;n.container.appendChild(a);var e=document.body.getBoundingClientRect(),t=a.getBoundingClientRect(),u=t.top-e.top,f=e.bottom-t.bottom,l=t.left-e.left,c=e.right-t.right;r.position==="top"?(a.className=r.cssClass+" top",a.style.left=i-t.width/2+"px",a.style.top=s-t.height+"px"):r.position==="bottom"?(a.className=r.cssClass+" bottom",a.style.left=i-t.width/2+"px",a.style.top=s+"px"):r.position==="left"?(a.className=r.cssClass+" left",a.style.left=i-t.width+"px",a.style.top=s-t.height/2+"px"):r.position==="right"&&(a.className=r.cssClass+" right",a.style.left=i+"px",a.style.top=s-t.height/2+"px");if(r.autoadjust){t=a.getBoundingClientRect(),u=t.top-e.top,f=e.bottom-t.bottom,l=t.left-e.left,c=e.right-t.right;if(f<0){a.className=r.cssClass;if(r.position==="top"||r.position==="bottom")a.className=r.cssClass+" top";a.style.top=s-t.height+"px"}else if(u<0){a.className=r.cssClass;if(r.position==="top"||r.position==="bottom")a.className=r.cssClass+" bottom";a.style.top=s+"px"}if(c<0){a.className=r.cssClass;if(r.position==="left"||r.position==="right")a.className=r.cssClass+" left";a.style.left=i-t.width+"px"}else if(l<0){a.className=r.cssClass;if(r.position==="left"||r.position==="right")a.className=r.cssClass+" right";a.style.left=i+"px"}}o&&o()},0)},this.close=function(){return v(),this.dispatchEvent("hidden"),this},this.kill=function(){this.unbindEvents(),clearTimeout(f),clearTimeout(l),a=null,f=null,l=null,h=!1},this.unbindEvents=function(){r.stage&&(t.unbind(s.show),t.unbind(s.hide),s.show!=="doubleClickStage"&&t.unbind("doubleClickStage")),r.node&&(t.unbind(o.show),t.unbind(o.hide),o.show!=="doubleClickNode"&&t.unbind("doubleClickNode")),r.edge&&(t.unbind(u.show),t.unbind(u.hide),u.show!=="doubleClickEdge"&&t.unbind("doubleClickEdge")),(o.show==="rightClickNode"||u.show==="rightClickEdge")&&n.container.removeEventListener("contextmenu",p)};if(r.stage){if(r.stage.renderer!==undefined&&typeof r.stage.renderer!="function")throw new TypeError('"options.stage.renderer" is not a function, was '+r.stage.renderer);if(r.stage.position!==undefined&&r.stage.position!=="top"&&r.stage.position!=="bottom"&&r.stage.position!=="left"&&r.stage.position!=="right"&&r.stage.position!=="css")throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+r.position);t.bind(s.show,function(e){if(s.show!=="doubleClickStage"&&h)return;var t=e.data.captor.clientX,n=e.data.captor.clientY;clearTimeout(f),f=setTimeout(function(){i.open(null,s,t,n,i.dispatchEvent.bind(i,"shown",e.data))},s.delay)}),t.bind(s.hide,function(t){var n=a;m(e.stage.hideDelay),n&&i.dispatchEvent("hidden",t.data)}),s.show!=="doubleClickStage"&&t.bind("doubleClickStage",function(t){v(),h=!0,i.dispatchEvent("hidden",t.data),setTimeout(function(){h=!1},e.doubleClickDelay)})}if(r.node){if(r.node.renderer!==undefined&&typeof r.node.renderer!="function")throw new TypeError('"options.node.renderer" is not a function, was '+r.node.renderer);if(r.node.position!==undefined&&r.node.position!=="top"&&r.node.position!=="bottom"&&r.node.position!=="left"&&r.node.position!=="right"&&r.node.position!=="css")throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+r.position);t.bind(o.show,function(e){if(o.show!=="doubleClickNode"&&h)return;var t=e.data.node;!t&&e.data.enter&&(t=e.data.enter.nodes[0]);if(t==undefined)return;var n=e.data.captor.clientX,r=e.data.captor.clientY;clearTimeout(f),f=setTimeout(function(){i.open(t,o,n,r,i.dispatchEvent.bind(i,"shown",e.data))},o.delay)}),t.bind(o.hide,function(t){if(t.data.leave&&t.data.leave.nodes.length==0)return;var n=a;m(e.node.hideDelay),n&&i.dispatchEvent("hidden",t.data)}),o.show!=="doubleClickNode"&&t.bind("doubleClickNode",function(t){v(),h=!0,i.dispatchEvent("hidden",t.data),setTimeout(function(){h=!1},e.doubleClickDelay)})}if(r.edge){if(r.edge.renderer!==undefined&&typeof r.edge.renderer!="function")throw new TypeError('"options.edge.renderer" is not a function, was '+r.edge.renderer);if(r.edge.position!==undefined&&r.edge.position!=="top"&&r.edge.position!=="bottom"&&r.edge.position!=="left"&&r.edge.position!=="right"&&r.edge.position!=="css")throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+r.position);t.bind(u.show,function(e){if(u.show!=="doubleClickEdge"&&h)return;var t=e.data.edge;!t&&e.data.enter&&(t=e.data.enter.edges[0]);if(t==undefined)return;var n=e.data.captor.clientX,r=e.data.captor.clientY;clearTimeout(f),f=setTimeout(function(){i.open(t,u,n,r,i.dispatchEvent.bind(i,"shown",e.data))},u.delay)}),t.bind(u.hide,function(t){if(t.data.leave&&t.data.leave.edges.length==0)return;var n=a;m(e.edge.hideDelay),n&&i.dispatchEvent("hidden",t.data)}),u.show!=="doubleClickEdge"&&t.bind("doubleClickEdge",function(t){v(),h=!0,i.dispatchEvent("hidden",t.data),setTimeout(function(){h=!1},e.doubleClickDelay)})}(o.show==="rightClickNode"||u.show==="rightClickEdge")&&n.container.addEventListener("contextmenu",p)}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var e={stage:{show:"rightClickStage",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},node:{show:"clickNode",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},edge:{show:"clickEdge",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},doubleClickDelay:800},n={};sigma.plugins.tooltips=function(e,r,i){return n[e.id]||(n[e.id]=new t(e,r,i)),n[e.id]},sigma.plugins.killTooltips=function(e){n[e.id]instanceof t&&n[e.id].kill(),delete n[e.id]}}.call(window),function(){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var e=0,t={};sigma.plugins.relativeSize=function(e,t){var n=e.graph.nodes();for(var r=0;r<n.length;r++){var i=e.graph.degree(n[r].id);n[r].size=t*Math.sqrt(i)}e.refresh()}}.call(window),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dashed=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel");if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}r.setLineDash([8,3]),r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dotted=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel");if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}r.setLineDash([2]),r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.parallel=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel"),h=t[o+"x"],p=t[o+"y"],d=n[o+"x"],v=n[o+"y"],m,g,y=sigma.utils.getDistance(h,p,d,v);if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),m=sigma.utils.getCircleIntersection(h,p,u,d,v,y),g=sigma.utils.getCircleIntersection(d,v,u,h,p,y),r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(m.xi,m.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.stroke(),r.beginPath(),r.moveTo(m.xi_prime,m.yi_prime),r.lineTo(g.xi,g.yi),r.closePath(),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.tapered=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),o=i("prefix")||"",f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel"),h=t[o+"x"],p=t[o+"y"],d=n[o+"x"],v=n[o+"y"],m=sigma.utils.getDistance(h,p,d,v);if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio");var g=sigma.utils.getCircleIntersection(h,p,u,d,v,m);r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}r.globalAlpha=.65,r.fillStyle=s,r.beginPath(),r.moveTo(d,v),r.lineTo(g.xi,g.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.fill(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dashed=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level;if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}e.active?r.strokeStyle=i("edgeActiveColor")==="edge"?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.setLineDash([8,3]),r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dotted=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level;if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}e.active?r.strokeStyle=i("edgeActiveColor")==="edge"?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.setLineDash([2]),r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.parallel=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level,h=t[o+"x"],p=t[o+"y"],d=n[o+"x"],v=n[o+"y"],m,g,y=sigma.utils.getDistance(h,p,d,v);if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}m=sigma.utils.getCircleIntersection(h,p,u,d,v,y),g=sigma.utils.getCircleIntersection(d,v,u,h,p,y),r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}e.active?r.strokeStyle=i("edgeActiveColor")==="edge"?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(m.xi,m.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.stroke(),r.beginPath(),r.moveTo(m.xi_prime,m.yi_prime),r.lineTo(g.xi,g.yi),r.closePath(),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.tapered=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),o=
i("prefix")||"",f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level,h=t[o+"x"],p=t[o+"y"],d=n[o+"x"],v=n[o+"y"],m=sigma.utils.getDistance(h,p,d,v);if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}var g=sigma.utils.getCircleIntersection(h,p,u,d,v,m);r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}e.active?r.fillStyle=i("edgeActiveColor")==="edge"?s||l:i("defaultEdgeActiveColor"):r.fillStyle=s,r.globalAlpha=.65,r.beginPath(),r.moveTo(d,v),r.lineTo(g.xi,g.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.fill(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var t={defaultEdgeLabelColor:"#000",defaultEdgeLabelActiveColor:"#000",defaultEdgeLabelSize:10,edgeLabelSize:"fixed",edgeLabelAlignment:"auto",edgeLabelSizePowRatio:1,edgeLabelThreshold:1,defaultEdgeHoverLabelBGColor:"#fff",edgeLabelHoverBGColor:"default",edgeLabelHoverShadow:"default",edgeLabelHoverShadowColor:"#000"};sigma.settings=sigma.utils.extend(sigma.settings||{},t),sigma.settings.drawEdgeLabels=!0}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curve=function(e,t,n,r,i){function x(e,t,n,r,s,o,u){var a=Math.round(sigma.utils.canvas.getTextWidth(t,i("approximateLabelWidth"),n,s)+r+1.5+n/3),f=n+4;t.save(),t.beginPath(),t.translate(o,u),t.rotate(e),t.rect(-a/2,-f-r/2,a,f),t.closePath(),t.fill(),t.restore()}if(typeof e.label!="string")return;var s=i("prefix")||"",o=e[s+"size"]||1;if(o<i("edgeLabelThreshold")&&!e.hover)return;if(0===i("edgeLabelSizePowRatio"))throw new Error('Invalid setting: "edgeLabelSizePowRatio" is equal to 0.');var u,a=t[s+"size"],f=t[s+"x"],l=t[s+"y"],c=n[s+"x"],h=n[s+"y"],p=c-f,d=h-l,v=f<c?1:-1,m={},g,y=0,b=.5,w=e.hover?i("hoverFontStyle")||i("fontStyle"):i("fontStyle");t.id===n.id?(m=sigma.utils.getSelfLoopControlPoints(f,l,a),g=sigma.utils.getPointOnBezierCurve(b,f,l,c,h,m.x1,m.y1,m.x2,m.y2)):(m=sigma.utils.getQuadraticControlPoint(f,l,c,h,e.cc),g=sigma.utils.getPointOnQuadraticCurve(b,f,l,c,h,m.x,m.y)),u=i("edgeLabelSize")==="fixed"?i("defaultEdgeLabelSize"):i("defaultEdgeLabelSize")*o*Math.pow(o,-1/i("edgeLabelSizePowRatio")),r.save(),e.active?r.font=[i("activeFontStyle")||i("fontStyle"),u+"px",i("activeFont")||i("font")].join(" "):r.font=[w,u+"px",i("font")].join(" "),r.textAlign="center",r.textBaseline="alphabetic";if("auto"===i("edgeLabelAlignment"))if(t.id===n.id)y=Math.atan2(1,1);else{var E=sigma.utils.canvas.getTextWidth(r,i("approximateLabelWidth"),u,e.label),S=sigma.utils.getDistance(t[s+"x"],t[s+"y"],n[s+"x"],n[s+"y"]);S=S-t[s+"size"]-n[s+"size"]-10,E<S&&(y=Math.atan2(d*v,p*v))}e.hover&&(r.fillStyle=i("edgeLabelHoverBGColor")==="edge"?e.color||i("defaultEdgeColor"):i("defaultEdgeHoverLabelBGColor"),i("edgeLabelHoverShadow")&&(r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=8,r.shadowColor=i("edgeLabelHoverShadowColor")),x(y,r,u,o,e.label,g.x,g.y),i("edgeLabelHoverShadow")&&(r.shadowBlur=0,r.shadowColor="#000")),e.active?r.fillStyle=i("edgeActiveColor")==="edge"?e.active_color||i("defaultEdgeActiveColor"):i("defaultEdgeLabelActiveColor"):r.fillStyle=i("edgeLabelColor")==="edge"?e.color||i("defaultEdgeColor"):i("defaultEdgeLabelColor"),r.translate(g.x,g.y),r.rotate(y),r.fillText(e.label,0,-o/2-3),r.restore()}}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curvedArrow=function(e,t,n,r,i){sigma.canvas.edges.labels.curve(e,t,n,r,i)}}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.def=function(e,t,n,r,i,s){function b(e,t,n,r,s,o,u){var a=Math.round(sigma.utils.canvas.getTextWidth(t,i("approximateLabelWidth"),n,s)+r+1.5+n/3),f=n+4;t.save(),t.beginPath(),t.translate(o,u),t.rotate(e),t.rect(-a/2,-f-r/2,a,f),t.closePath(),t.fill(),t.restore()}if(typeof e.label!="string"||t==n)return;var o=i("prefix")||"",u=e[o+"size"]||1;if(u<i("edgeLabelThreshold")&&!e.hover)return;if(0===i("edgeLabelSizePowRatio"))throw new Error('Invalid setting: "edgeLabelSizePowRatio" is equal to 0.');var a,f=0,l=e.hover?i("hoverFontStyle")||i("fontStyle"):i("fontStyle"),c=(t[o+"x"]+n[o+"x"])/2,h=(t[o+"y"]+n[o+"y"])/2,p,d,v;a=i("edgeLabelSize")==="fixed"?i("defaultEdgeLabelSize"):i("defaultEdgeLabelSize")*u*Math.pow(u,-1/i("edgeLabelSizePowRatio"));var m=[l,a+"px",i("font")].join(" ");e.active&&(m=[i("activeFontStyle")||i("fontStyle"),a+"px",i("activeFont")||i("font")].join(" ")),s&&s.ctx.font!=m?(r.font=m,s.ctx.font=m):r.font=m,r.textAlign="center",r.textBaseline="alphabetic";if("auto"===i("edgeLabelAlignment")){var g=sigma.utils.canvas.getTextWidth(r,i("approximateLabelWidth"),a,e.label),y=sigma.utils.getDistance(t[o+"x"],t[o+"y"],n[o+"x"],n[o+"y"]);y=y-t[o+"size"]-n[o+"size"]-10,g<y&&(p=n[o+"x"]-t[o+"x"],d=n[o+"y"]-t[o+"y"],v=t[o+"x"]<n[o+"x"]?1:-1,f=Math.atan2(d*v,p*v))}e.hover&&(r.fillStyle=i("edgeLabelHoverBGColor")==="edge"?e.color||i("defaultEdgeColor"):i("defaultEdgeHoverLabelBGColor"),i("edgeLabelHoverShadow")&&(r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=8,r.shadowColor=i("edgeLabelHoverShadowColor")),b(f,r,a,u,e.label,c,h),i("edgeLabelHoverShadow")&&(r.shadowBlur=0,r.shadowColor="#000")),e.active?r.fillStyle=i("edgeActiveColor")==="edge"?e.active_color||i("defaultEdgeActiveColor"):i("defaultEdgeLabelActiveColor"):r.fillStyle=i("edgeLabelColor")==="edge"?e.color||i("defaultEdgeColor"):i("defaultEdgeLabelColor"),r.translate(c,h),r.rotate(f),r.fillText(e.label,0,-u/2-3),r.rotate(-f),r.translate(-c,-h)}}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma.renderers.glyphs: sigma not in scope.";sigma.utils.pkg("sigma.settings");var t={glyphScale:.5,glyphFillColor:"white",glyphTextColor:"black",glyphStrokeColor:"black",glyphLineWidth:2,glyphFont:"Arial",glyphFontStyle:"normal",glyphFontScale:1,glyphTextThreshold:7,glyphStrokeIfText:!1,glyphThreshold:1,drawGlyphs:!0};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(e){"use strict";function t(e){return e*Math.PI/180}function n(e,t){return typeof e=="function"?e.call(t):e}function r(e){function C(e,t){if(e.draw&&e.x&&e.y&&e.radius>e.threshold){var n=e.x,r=e.y;switch(e.position){case"top-right":n+=e.nodeSize*T,r+=e.nodeSize*N;break;case"top-left":n+=e.nodeSize*S,r+=e.nodeSize*x;break;case"bottom-left":n+=e.nodeSize*w,r+=e.nodeSize*E;break;case"bottom-right":n+=e.nodeSize*y,r+=e.nodeSize*b}t.fillStyle=e.fillColor,e.strokeColor!==t.strokeStyle&&(t.strokeStyle=e.strokeColor),t.beginPath(),t.arc(n,r,e.radius,2*Math.PI,!1),t.closePath(),(!e.strokeIfText||e.radius>e.textThreshold)&&t.stroke(),t.fill();if(e.radius>e.textThreshold){var i=Math.round(e.fontScale*e.radius),s=e.fontStyle+" "+i+"px "+e.font;s!==t.font&&(t.font=s),t.fillStyle=e.textColor,t.fillText(e.content,n,r)}}}e=e||{};var r=e.font||this.settings("glyphFont"),i=e.fontStyle||this.settings("glyphFontStyle"),s=e.fontScale||this.settings("glyphFontScale"),o=e.strokeColor||this.settings("glyphStrokeColor"),u=e.lineWidth||this.settings("glyphLineWidth"),a=e.fillColor||this.settings("glyphFillColor"),f=e.scale||this.settings("glyphScale"),l=e.textColor||this.settings("glyphTextColor"),c=e.textThreshold||this.settings("glyphTextThreshold"),h="strokeIfText"in e?e.strokeIfText:this.settings("glyphStrokeIfText"),p=e.threshold||this.settings("glyphThreshold"),d="draw"in e?e.draw:this.settings("drawGlyphs");if(!d)return;this.domElements.glyphs||(this.initDOM("canvas","glyphs"),this.domElements.glyphs.width=this.container.offsetWidth,this.domElements.glyphs.height=this.container.offsetHeight,this.container.insertBefore(this.domElements.glyphs,this.domElements.glyphs.previousSibling)),this.drawingContext=this.domElements.glyphs.getContext("2d"),this.drawingContext.textAlign="center",this.drawingContext.textBaseline="middle",this.drawingContext.lineWidth=u,this.drawingContext.strokeStyle=o;var v=this,m=this.nodesOnScreen||[],g=this.options.prefix||"",y=Math.cos(t(45)),b=Math.sin(t(45)),w=Math.cos(t(135)),E=Math.sin(t(135)),S=Math.cos(t(225)),x=Math.sin(t(225)),T=Math.cos(t(315)),N=Math.sin(t(315)),k;m.forEach(function(e){e.glyphs&&e.glyphs.forEach(function(t){k=!e.hidden,k&&"draw"in t&&(k=t.draw),C({x:e[g+"x"],y:e[g+"y"],nodeSize:e[g+"size"]||0,position:t.position,radius:t.size||e[g+"size"]*f,content:(t.content||"").toString()||"",lineWidth:t.lineWidth||u,fillColor:n(t.fillColor,e)||a,textColor:n(t.textColor,e)||l,strokeColor:n(t.strokeColor,e)||o,strokeIfText:"strokeIfText"in t?t.strokeIfText:h,fontStyle:t.fontStyle||i,font:t.font||r,fontScale:t.fontScale||s,threshold:t.threshold||p,textThreshold:t.textThreshold||c,draw:k},v.drawingContext)})})}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.renderers.canvas.prototype.glyphs=r}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw new Error("sigma not in scope.");sigma.utils.pkg("sigma.settings");var t={nodeHaloColor:"#fff",nodeHaloStroke:!1,nodeHaloStrokeColor:"#000",nodeHaloStrokeWidth:.5,nodeHaloSize:50,nodeHaloClustering:!1,nodeHaloClusteringMaxRadius:1e3,edgeHaloColor:"#fff",edgeHaloSize:10,drawHalo:!0};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(e){"use strict";function t(){var e=[],t=-1,n=arguments.length;while(++t<n){var r=arguments[t];e.push(r)}var i=e[0],s=-1,o=i?i.length:0,u=[];e:while(++s<o){r=i[s];if(u.indexOf(r)<0){var t=n;while(--t)if(e[t].indexOf(r)<0)continue e;u.push(r)}}return u}function n(e,t,n){for(var r=0;r<e.length;r++){if(e[r]==null)continue;t.beginPath(),t.arc(e[r].x,e[r].y,e[r].radius,0,Math.PI*2,!0),t.closePath(),n?t.stroke():t.fill()}}function r(e,t,n){n=n||Number.POSITIVE_INFINITY;if(e.length>1){var r=!0,i,s,o;while(r){r=!1;for(var u=0;u<e.length;u++){if(e[u]===null)continue;for(var a=u+1;a<e.length;a++){if(e[a]===null)continue;s=sigma.utils.getDistance(e[u].x,e[u].y,e[a].x,e[a].y);if(s<n&&s<e[u].radius+e[a].radius){r=!0,o=[{x:e[u].x,y:e[u].y,radius:e[u].radius},{x:e[a].x,y:e[a].y,radius:e[a].radius}],e[u].points&&(o=o.concat(e[u].points)),e[a].points&&(o=o.concat(e[a].points)),i={x:0,y:0};for(var f=0;f<o.length;f++)i.x+=o[f].x,i.y+=o[f].y;i.x/=o.length,i.y/=o.length,i.radius=Math.max.apply(null,o.map(function(e){return t+sigma.utils.getDistance(i.x,i.y,e.x,e.y)})),e.push({x:i.x,y:i.y,radius:i.radius,points:o}),e[u]=e[a]=null;break}}}}}return e}function i(e){e=e||{},this.domElements.background||(this.initDOM("canvas","background"),this.domElements.background.width=this.container.offsetWidth,this.domElements.background.height=this.container.offsetHeight,this.container.insertBefore(this.domElements.background,this.container.firstChild));var i=this,s=i.contexts.background,o=this instanceof sigma.renderers.webgl,u=i.options.prefix,a=o?u.substr(5):u,f=e.nodeHaloClustering||i.settings("nodeHaloClustering"),l=e.nodeHaloClusteringMaxRadius||i.settings("nodeHaloClusteringMaxRadius"),c=e.nodeHaloColor||i.settings("nodeHaloColor"),h=e.nodeHaloSize||i.settings("nodeHaloSize"),p=e.nodeHaloStroke||i.settings("nodeHaloStroke"),d=e.nodeHaloStrokeColor||i.settings("nodeHaloStrokeColor"),v=e.nodeHaloStrokeWidth||i.settings("nodeHaloStrokeWidth"),m=i.settings("borderSize")||0,g=i.settings("outerBorderSize")||0,y=e.edgeHaloColor||i.settings("edgeHaloColor"),b=e.edgeHaloSize||i.settings("edgeHaloSize"),w=e.drawHalo||i.settings("drawHalo"),E=e.nodes||[],S=e.edges||[],x,T,N,C,k,L,A,O,M,_;if(!w)return;E=o?E:t(e.nodes,i.nodesOnScreen),S=o?S:t(e.edges,i.edgesOnScreen),s.clearRect(0,0,s.canvas.width,s.canvas.height),s.save(),s.strokeStyle=y,S.forEach(function(e){x=i.graph.nodes(e.source),T=i.graph.nodes(e.target),s.lineWidth=(e[u+"size"]||1)+b,s.beginPath(),N={},C=x[a+"size"],k=x[a+"x"],L=x[a+"y"],A=T[a+"x"],O=T[a+"y"],s.moveTo(k,L),e.type==="curve"||e.type==="curvedArrow"?e.source===e.target?(N=sigma.utils.getSelfLoopControlPoints(k,L,C),s.bezierCurveTo(N.x1,N.y1,N.x2,N.y2,A,O)):(N=sigma.utils.getQuadraticControlPoint(k,L,A,O,e.cc),s.quadraticCurveTo(N.x,N.y,A,O)):(s.moveTo(k,L),s.lineTo(A,O)),s.stroke(),s.closePath()}),s.fillStyle=c,p&&(s.lineWidth=v,s.strokeStyle=d),M=m+g+h,_=E.filter(function(e){return!e.hidden}).map(function(e){return{x:e[a+"x"],y:e[a+"y"],radius:e[a+"size"]+M}}),f&&(_=r(_,M,l)),p&&n(_,s,!0),n(_,s),s.restore()}if(typeof sigma=="undefined")throw new Error("sigma not in scope.");sigma.renderers.canvas.prototype.halo=i,sigma.renderers.webgl.prototype.halo=i}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=i("edgeColor"),a=i("defaultNodeColor"),f=i("defaultEdgeColor"),l=i("edgeHoverLevel"),c=e[o+"size"]||1,h=n[o+"size"],p=t[o+"x"],d=t[o+"y"],v=n[o+"x"],m=n[o+"y"];c=e.hover?i("edgeHoverSizeRatio")*c:c;var g=c*2.5,y=Math.sqrt(Math.pow(v-p,2)+Math.pow(m-d,2)),b=p+(v-p)*(y-g-h)/y,w=d+(m-d)*(y-g-h)/y,E=(v-p)*g/y,S=(m-d)*g/y;if(l){r.shadowOffsetX=0;switch(l){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}if(!s)switch(u){case"source":s=t.color||a;break;case"target":s=n.color||a;break;default:s=f}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,r.strokeStyle=s,r.lineWidth=c,r.beginPath(),r.moveTo(p,d),r.lineTo(b,w),r.stroke(),r.fillStyle=s,r.beginPath(),r.moveTo(b+E,w+S),r.lineTo(b+S*.6,w-E*.6),r.lineTo(b-S*.6,w+E*.6),r.lineTo(b+E,w+S),r.closePath(),r.fill(),l&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),sigma.canvas.edges.labels.arrow&&(e.hover=!0,sigma.canvas.edges.labels.arrow(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=i("edgeHoverSizeRatio")*(e[o+"size"]||1),a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel"),h={},p=t[o+"size"],d=t[o+"x"],v=t[o+"y"],m=n[o+"x"],g=n[o+"y"];h=t.id===n.id?sigma.utils.getSelfLoopControlPoints(d,v,p):sigma.utils.getQuadraticControlPoint(d,v,m,g,e.cc);if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(d,v),t.id===n.id?r.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,m,g):r.quadraticCurveTo(h.x,h.y,m,g),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),sigma.canvas.edges.labels.curve&&(e.hover=!0,sigma.canvas.edges.labels.curve(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=i("edgeColor"),a=i("defaultNodeColor"),f=i("defaultEdgeColor"),l=i("edgeHoverLevel"),c={},h=i("edgeHoverSizeRatio")*(e[o+"size"]||1),p=n[o+"size"],d=t[o+"x"],v=t[o+"y"],m=n[o+"x"],g=n[o+"y"],y,b,w,E,S,x;c=t.id===n.id?sigma.utils.getSelfLoopControlPoints(d,v,p):sigma.utils.getQuadraticControlPoint(d,v,m,g,e.cc),t.id===n.id?(y=Math.sqrt(Math.pow(m-c.x1,2)+Math.pow(g-c.y1,2)),b=h*2.5,w=c.x1+(m-c.x1)*(y-b-p)/y,E=c.y1+(g-c.y1)*(y-b-p)/y,S=(m-c.x1)*b/y,x=(g-c.y1)*b/y):(y=Math.sqrt(Math.pow(m-c.x,2)+Math.pow(g-c.y,2)),b=h*2.5,w=c.x+(m-c.x)*(y-b-p)/y,E=c.y+(g-c.y)*(y-b-p)/y,S=(m-c.x)*b/y,x=(g-c.y)*b/y);if(l){r.shadowOffsetX=0;switch(l){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}if(!s)switch(u){case"source":s=t.color||a;break;case"target":s=n.color||a;break;default:s=f}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,r.strokeStyle=s,r.lineWidth=h,r.beginPath(),r.moveTo(d,v),t.id===n.id?r.bezierCurveTo(c.x2,c.y2,c.x1,c.y1,w,E):r.quadraticCurveTo(c.x,c.y,w,E),r.stroke(),r.fillStyle=s,r.beginPath(),r.moveTo(w+S,E+x),r.lineTo(w+x*.6,E-S*.6),r.lineTo(w-x*.6,E+S*.6),r.lineTo(w+S,E+x),r.closePath(),r.fill(),l&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000");if(sigma.canvas.edges.labels.curvedArrow){e.hover=!0;var T=sigma.canvas.edges.labels.curvedArrow;(T.render||T)(e,t,n,r,i),e.hover=!1}}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dashed=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel");if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}r.setLineDash([8,3]),r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel");if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),sigma.canvas.edges.labels.def&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dotted=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel");if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}r.setLineDash([2]),r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore();if(sigma.canvas.edges.labels){e.hover=!0;var h=sigma.canvas.edges.labels.def;(h.render||h)(e,t,n,r,i),e.hover=!1}}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.parallel=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel"),h=t[o+"x"],p=t[o+"y"],d=n[o+"x"],v=n[o+"y"],m,g,y=sigma.utils.getDistance(h,p,d,v);if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),m=sigma.utils.getCircleIntersection(h,p,u,d,v,y),g=sigma.utils.getCircleIntersection(d,v,u,h,p,y),r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(m.xi,m.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.stroke(),r.beginPath(),r.moveTo(m.xi_prime,m.yi_prime),r.lineTo(g.xi,g.yi),r.closePath(),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.tapered=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),o=i("prefix")||"",f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel"),h=t[o+"x"],p=t[o+"y"],d=n[o+"x"],v=n[o+"y"],m=sigma.utils.getDistance(h,p,d,v);if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}i("edgeHoverColor")==="edge"?s=e.hover_color||s:s=e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio");var g=sigma.utils.getCircleIntersection(h,p,u,d,v,m);r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}r.globalAlpha=.65,r.fillStyle=s,r.beginPath(),r.moveTo(d,v),r.lineTo(g.xi,g.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.fill(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=i("edgeColor"),a=i("defaultNodeColor"),f=i("defaultEdgeColor"),l=e.active?i("edgeActiveLevel"):e.level,c=e[o+"size"]||1,h=n[o+"size"],p=t[o+"x"],d=t[o+"y"],v=n[o+"x"],m=n[o+"y"],g=c*2.5,y=Math.sqrt(Math.pow(v-p,2)+Math.pow(m-d,2)),b=p+(v-p)*(y-g-h)/y,w=d+(m-d)*(y-g-h)/y,E=(v-p)*g/y,S=(m-d)*g/y;if(l){r.shadowOffsetX=0;switch(l){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}if(!s)switch(u){case"source":s=t.color||a;break;case"target":s=n.color||a;break;default:s=f}e.active?r.strokeStyle=i("edgeActiveColor")==="edge"?s||f:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.lineWidth=c,r.beginPath(),r.moveTo(p,d),r.lineTo(b,w),r.stroke(),r.fillStyle=s,r.beginPath(),r.moveTo(b+E,w+S),r.lineTo(b+S*.6,w-E*.6),r.lineTo(b-S*.6,w+E*.6),r.lineTo(b+E,w+S),r.closePath(),r.fill(),l&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges");var e=function(e,t,n,r){if(r){var i=e*t/n;return{y:i?i:Number.POSITIVE_INFINITY}}var s=e/(t/2),i=e-s*n;return{y:i?1/i:t}};sigma.canvas.edges.autoCurve=function(t){var n,r=t.settings("autoCurveRatio"),i=t.settings("autoCurveSortByDirection"),s=t.settings("defaultEdgeType"),o=t.graph.edges(),u={key:function(e){var t=e.source+","+e.target;if(this[t])return t;if(!i){t=e.target+","+e.source;if(this[t])return t}return this[t]={i:0,n:0},t},inc:function(e){this[this.key(e)].n++}};o.forEach(function(e){u.inc(e)}),o.forEach(function(t){n=u.key(t),u[n].n>1?(t.type==="arrow"||t.type==="tapered"||s==="arrow"||s==="tapered"?(t.cc_prev_type||(t.cc_prev_type=t.type),t.type="curvedArrow"):(t.cc_prev_type||(t.cc_prev_type=t.type),t.type="curve"),t.cc=e(r,u[n].n,u[n].i++,i)):t.cc&&(t.type=t.cc_prev_type,t.cc_prev_type=null,t.cc=null)})}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level,h={},p=t[o+"size"],d=t[o+"x"],v=t[o+"y"],m=n[o+"x"],g=n[o+"y"];h=t.id===n.id?sigma.utils.getSelfLoopControlPoints(d,v,p):sigma.utils.getQuadraticControlPoint(d,v,m,g,e.cc);if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}e.active?r.strokeStyle=i("edgeActiveColor")==="edge"?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(d,v),t.id===n.id?r.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,m,g):r.quadraticCurveTo(h.x,h.y,m,g),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=i("edgeColor"),a=i("defaultNodeColor"),f=i("defaultEdgeColor"),l=e.active?i("edgeActiveLevel"):e.level,c={},h=e[o+"size"]||1,p=n[o+"size"],d=t[o+"x"],v=t[o+"y"],m=n[o+"x"],g=n[o+"y"],y,b,w,E,S,x;c=t.id===n.id?sigma.utils.getSelfLoopControlPoints(d,v,p):sigma.utils.getQuadraticControlPoint(d,v,m,g,e.cc),t.id===n.id?(y=Math.sqrt(Math.pow(m-c.x1,2)+Math.pow(g-c.y1,2)),b=h*2.5,w=c.x1+(m-c.x1)*(y-b-p)/y,E=c.y1+(g-c.y1)*(y-b-p)/y,S=(m-c.x1)*b/y,x=(g-c.y1)*b/y):(y=Math.sqrt(Math.pow(m-c.x,2)+Math.pow(g-c.y,2)),b=h*2.5,w=c.x+(m-c.x)*(y-b-p)/y,E=c.y+(g-c.y)*(y-b-p)/y,S=(m-c.x)*b/y,x=(g-c.y)*b/y);if(l){r.shadowOffsetX=0;switch(l){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}if(!s)switch(u){case"source":s=t.color||a;break;case"target":s=n.color||a;break;default:s=f}e.active?r.strokeStyle=i("edgeActiveColor")==="edge"?s||f:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.lineWidth=h,r.beginPath(),r.moveTo(d,v),t.id===n.id?r.bezierCurveTo(c.x2,c.y2,c.x1,c.y1,w,E):r.quadraticCurveTo(c.x,c.y,w,E),r.stroke(),r.fillStyle=s,r.beginPath(),r.moveTo(w+S,E+x),r.lineTo(w+x*.6,E-S*.6),r.lineTo(w-x*.6,E+S*.6),r.lineTo(w+S,E+x),r.closePath(),r.fill(),l&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dashed=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level;if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}e.active?r.strokeStyle=i("edgeActiveColor")==="edge"?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.setLineDash([8,3]),r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level;if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}e.active?r.strokeStyle=i("edgeActiveColor")==="edge"?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dotted=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level;if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}r.save();if(c){r.shadowOffsetX=0;switch(c){
case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}e.active?r.strokeStyle=i("edgeActiveColor")==="edge"?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.setLineDash([2]),r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.parallel=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level,h=t[o+"x"],p=t[o+"y"],d=n[o+"x"],v=n[o+"y"],m,g,y=sigma.utils.getDistance(h,p,d,v);if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}m=sigma.utils.getCircleIntersection(h,p,u,d,v,y),g=sigma.utils.getCircleIntersection(d,v,u,h,p,y),r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}e.active?r.strokeStyle=i("edgeActiveColor")==="edge"?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(m.xi,m.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.stroke(),r.beginPath(),r.moveTo(m.xi_prime,m.yi_prime),r.lineTo(g.xi,g.yi),r.closePath(),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.tapered=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),o=i("prefix")||"",f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level,h=t[o+"x"],p=t[o+"y"],d=n[o+"x"],v=n[o+"y"],m=sigma.utils.getDistance(h,p,d,v);if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}var g=sigma.utils.getCircleIntersection(h,p,u,d,v,m);r.save();if(c){r.shadowOffsetX=0;switch(c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}}e.active?r.fillStyle=i("edgeActiveColor")==="edge"?s||l:i("defaultEdgeActiveColor"):r.fillStyle=s,r.globalAlpha=.65,r.beginPath(),r.moveTo(d,v),r.lineTo(g.xi,g.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.fill(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(e,t,n,r,i){(sigma.canvas.hovers[t.type]||sigma.canvas.hovers.def)(t,r,i),(sigma.canvas.hovers[n.type]||sigma.canvas.hovers.def)(n,r,i)}}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,n){function x(t){t.font=(a?a+" ":"")+d+"px "+(n("hoverFont")||n("font")),t.beginPath(),t.fillStyle=n("labelHoverBGColor")==="node"?e.color||c:n("defaultHoverLabelBGColor"),e.label&&n("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=n("labelHoverShadowColor"))}function T(e,t,r,i){var s=Math.round(i[f+"x"]),o=Math.round(i[f+"y"]),u=sigma.utils.canvas.getTextWidth(t,n("approximateLabelWidth"),r,i.label),a=Math.round(u+4),c=r+4,p=Math.round(l+r*.25);if(i.label&&typeof i.label=="string")switch(e){case"constrained":case"center":o=Math.round(i[f+"y"]-r*.5-2),t.rect(s-a*.5,o,a,c);break;case"left":s=Math.round(i[f+"x"]+r*.5+2),o=Math.round(i[f+"y"]-r*.5-2),a+=l*.5+r*.5,t.moveTo(s,o+p),t.arcTo(s,o,s-p,o,p),t.lineTo(s-a-h-p,o),t.lineTo(s-a-h-p,o+c),t.lineTo(s-p,o+c),t.arcTo(s,o+c,s,o+c-p,p),t.lineTo(s,o+p);break;case"top":t.rect(s-a*.5,o-p-c,a,c);break;case"bottom":t.rect(s-a*.5,o+p,a,c);break;case"inside":if(u<=p*2)break;case"right":default:s=Math.round(i[f+"x"]-r*.5-2),o=Math.round(i[f+"y"]-r*.5-2),a+=l*.5+r*.5,t.moveTo(s,o+p),t.arcTo(s,o,s+p,o,p),t.lineTo(s+a+h+p,o),t.lineTo(s+a+h+p,o+c),t.lineTo(s+p,o+c),t.arcTo(s,o+c,s,o+c-p,p),t.lineTo(s,o+p)}t.closePath(),t.fill(),t.shadowOffsetY=0,t.shadowBlur=0}var r,i,s,o,u,a=n("hoverFontStyle")||n("fontStyle"),f=n("prefix")||"",l=e[f+"size"]||1,c=n("defaultNodeColor"),h=e.border_size||n("borderSize"),p=n("labelAlignment"),d=n("labelSize")==="fixed"?n("defaultLabelSize"):n("labelSizeRatio")*l,v=n("nodeHoverColor")==="node"?e.color||c:n("defaultNodeHoverColor"),m=n("nodeBorderColor")==="default"?n("defaultNodeBorderColor"):e.border_color||c,g=n("nodeHoverLevel");p!=="center"&&(x(t),T(p,t,d,e));if(g){t.shadowOffsetX=0;switch(g){case 1:t.shadowOffsetY=1.5,t.shadowBlur=4,t.shadowColor="rgba(0,0,0,0.36)";break;case 2:t.shadowOffsetY=3,t.shadowBlur=12,t.shadowColor="rgba(0,0,0,0.39)";break;case 3:t.shadowOffsetY=6,t.shadowBlur=12,t.shadowColor="rgba(0,0,0,0.42)";break;case 4:t.shadowOffsetY=10,t.shadowBlur=20,t.shadowColor="rgba(0,0,0,0.47)";break;case 5:t.shadowOffsetY=15,t.shadowBlur=24,t.shadowColor="rgba(0,0,0,0.52)"}}h>0&&(t.beginPath(),t.fillStyle=n("nodeBorderColor")==="node"?m:n("defaultNodeBorderColor"),t.arc(e[f+"x"],e[f+"y"],l+h,0,Math.PI*2,!0),t.closePath(),t.fill());var y=sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def;y(e,t,n,{color:v}),g&&(t.shadowOffsetY=0,t.shadowBlur=0),p==="center"&&(x(t),T(p,t,d,e));if(typeof e.label=="string"){t.fillStyle=n("labelHoverColor")==="node"?e.color||c:n("defaultLabelHoverColor");var b=0,w=d/3,E=!0,S;t.textAlign="center";switch(p){case"bottom":w=+l+4*d/3;break;case"center":break;case"left":t.textAlign="right",b=-l-h-n("outerBorderSize")-3-S;break;case"top":w=-l-2*d/3;break;case"constrained":S=sigma.utils.canvas.getTextWidth(e.label),S>(l+d/3)*2&&(E=!1);break;case"inside":S=sigma.utils.canvas.getTextWidth(e.label);if(S<=(l+d/3)*2)break;case"right":default:b=l+h+n("outerBorderSize")+3,t.textAlign="left"}E&&t.fillText(e.label,Math.round(e[f+"x"]+b),Math.round(e[f+"y"]+w))}}}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,t,n,r){var i,s=n("prefix")||"",o=e[s+"size"]||1,u=e.active?n("activeFontStyle"):n("fontStyle"),a=e.active?n("borderSize")+n("outerBorderSize"):0,f,l,c,h=!0,p=n("labelAlignment"),d=n("labelMaxLength")?n("labelMaxLength"):-1;if(o<=n("labelThreshold"))return;if(!e.label||typeof e.label!="string")return;i=n("labelSize")==="fixed"?n("defaultLabelSize"):n("labelSizeRatio")*o;var v=(u?u+" ":"")+i+"px "+(e.active?n("activeFont")||n("font"):n("font"));r&&r.ctx.font!=v?(t.font=v,r.ctx.font=v):t.font=v,e.active?t.fillStyle=n("labelActiveColor")==="node"?e.active_color||n("defaultNodeActiveColor"):n("defaultLabelActiveColor"):t.fillStyle=n("labelColor")==="node"?e.color||n("defaultNodeColor"):n("defaultLabelColor"),l=0,c=i/3,t.textAlign="center";switch(p){case"bottom":c=+o+4*i/3;break;case"center":break;case"left":t.textAlign="right",l=-o-a-3;break;case"top":c=-o-2*i/3;break;case"constrained":f=sigma.utils.canvas.getTextWidth(t,n("approximateLabelWidth"),i,e.label),f>(o+i/3)*2&&(h=!1);break;case"inside":f=sigma.utils.canvas.getTextWidth(t,n("approximateLabelWidth"),i,e.label);if(f<=(o+i/3)*2)break;case"right":default:l=o+a+3,t.textAlign="left"}h&&t.fillText(d>0?e.label.trunc(d):e.label,Math.round(e[s+"x"]+l),Math.round(e[s+"y"]+c))}}.call(this),String.prototype.trunc=String.prototype.trunc||function(e){return this.length>e?this.substr(0,e-1)+"...":this},function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e=function(e,t,n,r,i){var s=e.cross&&e.cross.lineWeight||1;i.moveTo(t-r,n-s),i.lineTo(t-r,n+s),i.lineTo(t-s,n+s),i.lineTo(t-s,n+r),i.lineTo(t+s,n+r),i.lineTo(t+s,n+s),i.lineTo(t+r,n+s),i.lineTo(t+r,n-s),i.lineTo(t+s,n-s),i.lineTo(t+s,n-r),i.lineTo(t-s,n-r),i.lineTo(t-s,n-s)};sigma.canvas.nodes.cross=function(t,n,r,i){var s=i||{},o=r("prefix")||"",u=t[o+"size"]||1,a=t[o+"x"],f=t[o+"y"],l=r("defaultNodeColor"),c=r("imgCrossOrigin")||"anonymous",h=t.border_size||r("borderSize"),p=r("outerBorderSize"),d=s.color||t.color||l,v=r("nodeBorderColor")==="default"?r("defaultNodeBorderColor"):s.borderColor||t.border_color||l,m=t.active?r("nodeActiveLevel"):t.level;sigma.utils.canvas.setLevel(m,n),t.active&&(r("nodeActiveColor")==="node"?d=t.active_color||d:d=r("defaultNodeActiveColor")||d),t.active&&p>0&&(n.beginPath(),n.fillStyle=r("nodeOuterBorderColor")==="node"?d||l:r("defaultNodeOuterBorderColor"),e(t,a,f,u+h+p,n),n.closePath(),n.fill()),h>0&&(n.beginPath(),n.fillStyle=r("nodeBorderColor")==="node"?v:r("defaultNodeBorderColor"),e(t,a,f,u+h,n),n.closePath(),n.fill()),n.fillStyle=d,n.beginPath(),e(t,a,f,u,n),n.closePath(),n.fill(),sigma.utils.canvas.setLevel(m,n),t.image&&sigma.utils.canvas.drawImage(t,a,f,u,n,c,r("imageThreshold",e)),t.icon&&sigma.utils.canvas.drawIcon(t,a,f,u,n,r("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e=function(e,t,n,r,i,s){e.beginPath(),e.strokeStyle=i,e.lineWidth=s,e.arc(t,n,r,0,Math.PI*2,!0),e.closePath(),e.stroke()};sigma.canvas.nodes.def=function(t,n,r,i){var s=i||{},o=r("prefix")||"",u=t[o+"size"]||1,a=t[o+"x"],f=t[o+"y"],l=r("defaultNodeColor"),c=r("imgCrossOrigin")||"anonymous",h=t.border_size||r("borderSize"),p=r("outerBorderSize"),d=s.color||t.color||l,v=r("nodeBorderColor")==="default"?r("defaultNodeBorderColor"):s.borderColor||t.border_color||l,m=t.active?r("nodeActiveLevel"):t.level;sigma.utils.canvas.setLevel(m,n),t.active&&(r("nodeActiveColor")==="node"?d=t.active_color||d:d=r("defaultNodeActiveColor")||d,p>0&&(n.beginPath(),n.fillStyle=r("nodeOuterBorderColor")==="node"?d||l:r("defaultNodeOuterBorderColor"),n.arc(a,f,u+h+p,0,Math.PI*2,!0),n.closePath(),n.fill()),h>0&&(n.beginPath(),n.fillStyle=r("nodeBorderColor")==="node"?v:r("defaultNodeBorderColor"),n.arc(a,f,u+h,0,Math.PI*2,!0),n.closePath(),n.fill()));if((!t.active||t.active&&r("nodeActiveColor")==="node")&&t.colors&&t.colors.length){var g,y=t.colors.length,b=1/y,w=0;for(g=0;g<y;g++)n.fillStyle=t.colors[g],n.beginPath(),n.moveTo(a,f),n.arc(a,f,u,w,w+Math.PI*2*b,!1),n.lineTo(a,f),n.closePath(),n.fill(),w+=Math.PI*2*b;sigma.utils.canvas.resetLevel(n)}else n.fillStyle=d,n.beginPath(),n.arc(a,f,u,0,Math.PI*2,!0),n.closePath(),n.fill(),sigma.utils.canvas.resetLevel(n),!t.active&&h>0&&u>2*h&&e(n,a,f,u,v,h);t.image&&sigma.utils.canvas.drawImage(t,a,f,u,n,c,r("imageThreshold")),t.icon&&sigma.utils.canvas.drawIcon(t,a,f,u,n,r("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e=function(e,t,n,r,i){i.moveTo(t-r,n),i.lineTo(t,n-r),i.lineTo(t+r,n),i.lineTo(t,n+r)};sigma.canvas.nodes.diamond=function(t,n,r,i){var s=i||{},o=r("prefix")||"",u=t[o+"size"]||1,a=t[o+"x"],f=t[o+"y"],l=r("defaultNodeColor"),c=r("imgCrossOrigin")||"anonymous",h=t.border_size||r("borderSize"),p=r("outerBorderSize"),d=s.color||t.color||l,v=r("nodeBorderColor")==="default"?r("defaultNodeBorderColor"):s.borderColor||t.border_color||l,m=t.active?r("nodeActiveLevel"):t.level;t.active&&(r("nodeActiveColor")==="node"?d=t.active_color||d:d=r("defaultNodeActiveColor")||d,p>0&&(m&&setShadow(m,n),n.beginPath(),n.fillStyle=r("nodeOuterBorderColor")==="node"?d||l:r("defaultNodeOuterBorderColor"),e(t,a,f,u+h+p,n),n.closePath(),n.fill(),m&&resetShadow(n))),h>0&&(n.beginPath(),n.fillStyle=r("nodeBorderColor")==="node"?v:r("defaultNodeBorderColor"),e(t,a,f,u+h,n),n.closePath(),n.fill()),sigma.utils.canvas.setLevel(m,n),n.fillStyle=d,n.beginPath(),e(t,a,f,u,n),n.closePath(),n.fill(),m&&sigma.utils.canvas.resetLevel(n),t.image&&sigma.utils.canvas.drawImage(t,a,f,u,n,c,r("imageThreshold"),e),t.icon&&sigma.utils.canvas.drawIcon(t,a,f,u,n,r("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e=function(e,t,n,r,i){var s=e.equilateral&&e.equilateral.numPoints||5,o=e.equilateral&&e.equilateral.rotate||0,u=r;o+=Math.PI/s,i.moveTo(t+u*Math.sin(o),n-u*Math.cos(o));for(var a=1;a<s;a++)i.lineTo(t+Math.sin(o+2*Math.PI*a/s)*u,n-Math.cos(o+2*Math.PI*a/s)*u)};sigma.canvas.nodes.equilateral=function(t,n,r,i){var s=i||{},o=r("prefix")||"",u=t[o+"size"]||1,a=t[o+"x"],f=t[o+"y"],l=r("defaultNodeColor"),c=r("imgCrossOrigin")||"anonymous",h=t.border_size||r("borderSize"),p=r("outerBorderSize"),d=s.color||t.color||l,v=r("nodeBorderColor")==="default"?r("defaultNodeBorderColor"):s.borderColor||t.border_color||l,m=t.active?r("nodeActiveLevel"):t.level;t.active&&(r("nodeActiveColor")==="node"?d=t.active_color||d:d=r("defaultNodeActiveColor")||d,p>0&&(n.beginPath(),n.fillStyle=r("nodeOuterBorderColor")==="node"?d||l:r("defaultNodeOuterBorderColor"),e(t,a,f,u+h+p,n),n.closePath(),n.fill())),h>0&&(n.beginPath(),n.fillStyle=r("nodeBorderColor")==="node"?v:r("defaultNodeBorderColor"),e(t,a,f,u+h,n),n.closePath(),n.fill()),sigma.utils.canvas.setLevel(m,n),n.fillStyle=d,n.beginPath(),e(t,a,f,u,n),n.closePath(),n.fill(),m&&sigma.utils.canvas.resetLevel(n),t.image&&sigma.utils.canvas.drawImage(t,a,f,u,n,c,r("imageThreshold"),e),t.icon&&sigma.utils.canvas.drawIcon(t,a,f,u,n,r("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e=function(e,t,n,r,i){var s=Math.PI*45/180;i.moveTo(t+r*Math.sin(s),n-r*Math.cos(s));for(var o=1;o<4;o++)i.lineTo(t+Math.sin(s+2*Math.PI*o/4)*r,n-Math.cos(s+2*Math.PI*o/4)*r)};sigma.canvas.nodes.square=function(t,n,r,i){var s=i||{},o=r("prefix")||"",u=t[o+"size"]||1,a=t[o+"x"],f=t[o+"y"],l=r("defaultNodeColor"),c=r("imgCrossOrigin")||"anonymous",h=t.border_size||r("borderSize"),p=r("outerBorderSize"),d=s.color||t.color||l,v=r("nodeBorderColor")==="default"?r("defaultNodeBorderColor"):s.borderColor||t.border_color||l,m=t.active?r("nodeActiveLevel"):t.level;t.active&&(r("nodeActiveColor")==="node"?d=t.active_color||d:d=r("defaultNodeActiveColor")||d,p>0&&(n.beginPath(),n.fillStyle=r("nodeOuterBorderColor")==="node"?d||l:r("defaultNodeOuterBorderColor"),e(t,a,f,u+h+p,n),n.closePath(),n.fill())),h>0&&(n.beginPath(),n.fillStyle=r("nodeBorderColor")==="node"?v:r("defaultNodeBorderColor"),e(t,a,f,u+h,n),n.closePath(),n.fill()),sigma.utils.canvas.setLevel(m,n),n.fillStyle=d,n.beginPath(),e(t,a,f,u,n),n.closePath(),n.fill(),m&&sigma.utils.canvas.resetLevel(n),t.image&&sigma.utils.canvas.drawImage(t,a,f,u,n,c,r("imageThreshold"),e),t.icon&&sigma.utils.canvas.drawIcon(t,a,f,u,n,r("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e=function(e,t,n,r,i){var s=e.star&&e.star.numPoints||5,o=e.star&&e.star.innerRatio||.5,u=r,a=r*o,f=Math.PI/s;i.moveTo(t,n-r);for(var l=0;l<s;l++)i.lineTo(t+Math.sin(f+2*Math.PI*l/s)*a,n-Math.cos(f+2*Math.PI*l/s)*a),i.lineTo(t+Math.sin(2*Math.PI*(l+1)/s)*u,n-Math.cos(2*Math.PI*(l+1)/s)*u)};sigma.canvas.nodes.star=function(t,n,r,i){var s=i||{},o=r("prefix")||"",u=t[o+"size"]||1,a=t[o+"x"],f=t[o+"y"],l=r("defaultNodeColor"),c=r("imgCrossOrigin")||"anonymous",h=t.border_size||r("borderSize"),p=r("outerBorderSize"),d=s.color||t.color||l,v=r("nodeBorderColor")==="default"?r("defaultNodeBorderColor"):s.borderColor||t.border_color||l,m=t.active?r("nodeActiveLevel"):t.level;t.active&&(r("nodeActiveColor")==="node"?d=t.active_color||d:d=r("defaultNodeActiveColor")||d,p>0&&(n.beginPath(),n.fillStyle=r("nodeOuterBorderColor")==="node"?d||l:r("defaultNodeOuterBorderColor"),e(t,a,f,u+h+p*2,n),n.closePath(),n.fill())),h>0&&(n.beginPath(),n.fillStyle=r("nodeBorderColor")==="node"?v:r("defaultNodeBorderColor"),e(t,a,f,u+h,n),n.closePath(),n.fill()),sigma.utils.canvas.setLevel(m,n),n.fillStyle=d,n.beginPath(),e(t,a,f,u,n),n.closePath(),n.fill(),m&&sigma.utils.canvas.resetLevel(n),t.image&&sigma.utils.canvas.drawImage(t,a,f,u,n,c,r("imageThreshold"),e),t.icon&&sigma.utils.canvas.drawIcon(t,a,f,u,n,r("iconThreshold"))}}(),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var t={defaultLabelActiveColor:"#000",activeFont:"",activeFontStyle:"",labelActiveColor:"default",nodeActiveColor:"node",defaultNodeActiveColor:"rgb(236, 81, 72)",edgeActiveColor:"edge",defaultEdgeActiveColor:"rgb(236, 81, 72)",nodeBorderColor:"node,",nodeOuterBorderColor:"",outerBorderSize:0,defaultNodeOuterBorderColor:"#000",nodeActiveLevel:0,nodeHoverLevel:0,edgeActiveLevel:0,edgeHoverLevel:0,iconThreshold:8,imageThreshold:8,imgCrossOrigin:"anonymous"};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,n,r,i,s,o){var u=(e[s+"size"]||1)/2,a=t[s+"x"],f=t[s+"y"],l=n[s+"x"],c=n[s+"y"],h=n[s+"size"],p=e.active?e.active_color||o("defaultEdgeActiveColor"):e.color;if(!p)switch(o("edgeColor")){case"source":p=t.color||o("defaultNodeColor");break;case"target":p=n.color||o("defaultNodeColor");break;default:p=o("defaultEdgeColor")}e.active&&(p=o("edgeActiveColor")==="edge"?p||defaultEdgeColor:o("defaultEdgeActiveColor")),p=sigma.utils.floatColor(p),r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=h,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=h,r[i++]=0,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=h,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=-1,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=1,r[i++]=p},render:function(e,t,n,r){var i,s=e.getAttribLocation(t,"a_pos1"),o=e.getAttribLocation(t,"a_pos2"),u=e.getAttribLocation(t,"a_thickness"),a=e.getAttribLocation(t,"a_tSize"),f=e.getAttribLocation(t,"a_delay"),l=e.getAttribLocation(t,"a_minus"),c=e.getAttribLocation(t,"a_head"),h=e.getAttribLocation(t,"a_headPosition"),p=e.getAttribLocation(t,"a_color"),d=e.getUniformLocation(t,"u_resolution"),v=e.getUniformLocation(t,"u_matrix"),m=e.getUniformLocation(t,"u_matrixHalfPi"),g=e.getUniformLocation(t,"u_matrixHalfPiMinus"),y=e.getUniformLocation(t,"u_ratio"),b=e.getUniformLocation(t,"u_nodeRatio"),w=e.getUniformLocation(t,"u_arrowHead"),E=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.uniform2f(d,r.width,r.height),e.uniform1f(y,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),e.uniform1f(b,Math.pow(r.ratio,r.settings("nodesPowRatio"))/r.ratio),e.uniform1f(w,5),e.uniform1f(E,r.scalingRatio),e.uniformMatrix3fv(v,!1,r.matrix),e.uniformMatrix2fv(m,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(g,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(s),e.enableVertexAttribArray(o),e.enableVertexAttribArray(u),e.enableVertexAttribArray(a),e.enableVertexAttribArray(f),e.enableVertexAttribArray(l),e.enableVertexAttribArray(c),e.enableVertexAttribArray(h),e.enableVertexAttribArray(p),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(p,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,n]),r}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,n,r,i,s,o){var u=(e[s+"size"]||1)/2,a=t[s+"x"],f=t[s+"y"],l=n[s+"x"],c=n[s+"y"],h=e.active?e.active_color||o("defaultEdgeActiveColor"):e.color;if(!h)switch(o("edgeColor")){case"source":h=t.color||o("defaultNodeColor");break;case"target":h=n.color||o("defaultNodeColor");break;default:h=o("defaultEdgeColor")}e.active&&(h=o("edgeActiveColor")==="edge"?h||defaultEdgeColor:o("defaultEdgeActiveColor")),h=sigma.utils.floatColor(h),r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=0,r[i++]=h,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=1,r[i++]=h,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=0,r[i++]=h,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=0,r[i++]=h,r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=1,r[i++]=h,r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=0,r[i++]=h},render:function(e,t,n,r){var i,s=e.getAttribLocation(t,"a_color"),o=e.getAttribLocation(t,"a_position1"),u=e.getAttribLocation(t,"a_position2"),a=e.getAttribLocation(t,"a_thickness"),f=e.getAttribLocation(t,"a_minus"),l=e.getUniformLocation(t,"u_resolution"),c=e.getUniformLocation(t,"u_matrix"),h=e.getUniformLocation(t,"u_matrixHalfPi"),p=e.getUniformLocation(t,"u_matrixHalfPiMinus"),d=e.getUniformLocation(t,"u_ratio"),v=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.uniform2f(l,r.width,r.height),e.uniform1f(d,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),e.uniform1f(v,r.scalingRatio),e.uniformMatrix3fv(c,!1,r.matrix),e.uniformMatrix2fv(h,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(p,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(s),e.enableVertexAttribArray(o),e.enableVertexAttribArray(u),e.enableVertexAttribArray(a),e.enableVertexAttribArray(f),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(u,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,n]),r}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,n,r,i,s,o){var u=(e[s+"size"]||1)/2,a=t[s+"x"],f=t[s+"y"],l=n[s+"x"],c=n[s+"y"],h=e.active?e.active_color||o("defaultEdgeActiveColor"):e.color;if(!h)switch(o("edgeColor")){case"source":h=t.color||o("defaultNodeColor");break;case"target":h=n.color||o("defaultNodeColor");break;default:h=o("defaultEdgeColor")}e.active&&(h=o("edgeActiveColor")==="edge"?h||defaultEdgeColor:o("defaultEdgeActiveColor")),h=sigma.utils.floatColor(h),r[i++]=a,r[i++]=f,r[i++]=h,r[i++]=l,r[i++]=c,r[i++]=h},render:function(e,t,n,r){var i,s=e.getAttribLocation(t,"a_color"),o=e.getAttribLocation(t,"a_position"),u=e.getUniformLocation(t,"u_resolution"),a=e.getUniformLocation(t,"u_matrix");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(u,r.width,r.height),e.uniformMatrix3fv(a,!1,r.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(s),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,n]),r}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:12,addNode:function(e,t,n,r,i){var s=this,o=e.color||i("defaultNodeColor"),u=i("imgCrossOrigin")||"anonymous";e.active&&(i("nodeActiveColor")==="node"?o=e.active_color||o:o=i("defaultNodeActiveColor")||o);var a=sigma.utils.floatColor(o||i("defaultNodeColor"));typeof s.spriteSheet=="undefined"&&s.createSpriteSheet(i);var f=-1,l=.7,c=999,h=1,p=1,d=1,v=0;switch(e.type||"circle"){case"circle":case"disc":case"disk":d=1,c=999,l=1;break;case"square":d=0,c=4,l=.7,typeof e.square!="undefined"&&typeof e.square.rotate=="number"&&(v=e.square.rotate);break;case"diamond":d=0,c=4,l=.7,v=45*Math.PI/180,typeof e.diamond!="undefined"&&typeof e.diamond.rotate=="number"&&(v=e.diamond.rotate);break;case"triangle":d=0,c=3,l=.5,v=Math.PI,typeof e.triangle!="undefined"&&typeof e.triangle.rotate=="number"&&(v=e.triangle.rotate);break;case"star":d=1,l=.7,c=5,typeof e.star!="undefined"&&(typeof e.star.numPoints=="number"&&(c=e.star.numPoints),typeof e.star.rotate=="number"&&(v=e.star.rotate));break;case"seastar":d=2,l=.5,c=5,typeof e.seastar!="undefined"&&(typeof e.seastar.numPoints=="number"&&(c=e.seastar.numPoints),typeof e.seastar.rotate=="number"&&(v=e.seastar.rotate));break;case"equilateral":d=0,c=7,l=.7,v=0,typeof e.equilateral!="undefined"&&(typeof e.equilateral.numPoints=="number"&&(c=e.equilateral.numPoints),typeof e.equilateral.rotate=="number"&&(v=e.equilateral.rotate));break;case"hexagon":d=0,c=6,l=.7,typeof e.hexagon!="undefined"&&typeof e.hexagon.rotate=="number"&&(v=e.hexagon.rotate);break;case"polygon":d=1,c=5,l=.5,v=0,typeof e.polygon!="undefined"&&(typeof e.polygon.type=="string"&&(d=e.polygon.type=="convex"?1:0),typeof e.polygon.angles=="number"&&(c=Math.round(Math.max(3,Math.min(8,e.polygon.angles)))),typeof e.polygon.scale=="number"&&(l=e.polygon.scale||(d?.5:.7)),typeof e.polygon.rotate=="number"&&(v=e.polygon.rotate));break;case"cross":d=0,c=9,l=.1,typeof e.cross!="undefined"&&(typeof e.cross.lineWeight=="number"&&(l=Math.max(.1,Math.min(.5,e.cross.lineWeight*.1))),typeof e.rotate=="number"&&(v=e.cross.rotate))}if(typeof e.image!="undefined"){var m=e.image.url||"";m.length>0&&(f=s.getImage(m,u),h=e.image.w||1,p=e.image.h||1)}if(typeof e.icon!="undefined"){var g="Arial";typeof e.icon.font=="string"&&(g=e.icon.font);var y="";typeof e.icon.content=="string"&&(y=e.icon.content);var b=.7;typeof e.icon.scale=="number"&&(b=Math.abs(Math.max(.01,e.icon.scale))*.5);var w=e.icon.color||o,E=e.color||o,S=.5,x=.5;typeof e.icon.x=="number"&&(S=e.icon.x),typeof e.icon.y=="number"&&(x=e.icon.y),f=s.getText(g,E,w,b,S,x,y)}t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"],t[n++]=a,t[n++]=0,t[n++]=d,t[n++]=c,t[n++]=l,t[n++]=v,t[n++]=f,t[n++]=h,t[n++]=p,t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"],t[n++]=a,t[n++]=2*Math.PI/3,t[n++]=d,t[n++]=c,t[n++]=l,t[n++]=v,t[n++]=f,t[n++]=h,t[n++]=p,t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"],t[n++]=a,t[n++]=4*Math.PI/3,t[n++]=d,t[n++]=c,t[n++]=l,t[n++]=v,t[n++]=f,t[n++]=h,t[n++]=p},render:function(e,t,n,r){var i,s=this,o=arguments;typeof s.spriteSheet=="undefined"&&s.createSpriteSheet();var u=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),f=e.getAttribLocation(t,"a_color"),l=e.getAttribLocation(t,"a_angle"),c=e.getAttribLocation(t,"a_image"),h=e.getAttribLocation(t,"a_shape"),p=e.getUniformLocation(t,"u_resolution"),d=e.getUniformLocation(t,"u_matrix"),v=e.getUniformLocation(t,"u_ratio"),m=e.getUniformLocation(t,"u_scale"),g=e.getUniformLocation(t,"u_sprite_dim"),y=e.getUniformLocation(t,"u_texture_dim"),b=e.getUniformLocation(t,"u_sampler");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(p,r.width,r.height),e.uniform1f(v,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),e.uniform1f(m,r.scalingRatio),e.uniformMatrix3fv(d,!1,r.matrix),e.uniform2f(g,s.spriteSheet.spriteWidth,s.spriteSheet.spriteHeight),e.uniform2f(y,s.spriteSheet.maxWidth,s.spriteSheet.maxHeight),e.enableVertexAttribArray(u),e.enableVertexAttribArray(a),e.enableVertexAttribArray(f),e.enableVertexAttribArray(l),e.enableVertexAttribArray(h),e.enableVertexAttribArray(c),e.vertexAttribPointer(u,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT
,8),e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(h,4,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(c,3,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),typeof s.texture=="undefined"&&(s.texture=e.createTexture(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s.spriteSheet.canvas),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.generateMipmap(e.TEXTURE_2D)),typeof s.texture!="undefined"&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s.texture),s.updateNeeded&&(s.updateNeeded=!1,e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s.spriteSheet.canvas)),e.uniform1i(e.getUniformLocation(t,"u_sampler"),0)),e.drawArrays(e.TRIANGLES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","attribute vec4 a_shape;","attribute vec3 a_image;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform vec2 u_sprite_dim;","uniform vec2 u_texture_dim;","varying vec4 shape;","varying highp vec4 v_sprite;","varying vec4 color;","varying vec2 center;","varying float radius;","varying vec3 image;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","shape = a_shape;","image = a_image;","highp vec2 sp = ","vec2(mod((a_image.s * u_sprite_dim.x), u_texture_dim.x),","floor((a_image.s * u_sprite_dim.x) / u_texture_dim.y) * u_sprite_dim.y);","sp = vec2(sp.x + (u_sprite_dim.x * 0.5),"," sp.y + (u_sprite_dim.y * 0.5));","v_sprite = vec4(","sp.x / u_texture_dim.x,","sp.y / u_texture_dim.y,","u_sprite_dim.x / u_texture_dim.x,","- u_sprite_dim.y / u_texture_dim.y",");","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["#ifdef GL_ES","precision mediump float;","#endif","#define PI_2 6.283185307179586","#define MAX_ANGLES 8","varying vec4 shape;","varying highp vec4 v_sprite;","varying vec4 color;","varying vec2 center;","varying float radius;","varying vec3 image;","uniform sampler2D u_sampler;","void main(void) {","int angles = int(shape.t);","int convex = int(shape.s);","vec2 m = gl_FragCoord.xy - center;","vec2 p = m.xy/radius;","float theta = atan(p.y,p.x);","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec4 color1 = (image.s >= 0.0) ?"," texture2D(u_sampler, ","vec2(","(v_sprite.s + v_sprite.p * p.x * 0.5 * image.t),","(v_sprite.t + v_sprite.q * p.y * 0.5 * image.p)","))"," : color",";","mat2 shapeRot = mat2(cos(shape.q),sin(shape.q),-sin(shape.q),cos(shape.q));","p = p * shapeRot;","if (angles > 9) {","gl_FragColor = ","((radius - sqrt(m.x * m.x + m.y * m.y)) > 0.0)","? color1 : color0;","} else if (angles > 8){","gl_FragColor = (","(abs(p.x) > 0.0 && abs(p.x) < (1.0 - sin(shape.p)) && abs(p.y) < shape.p)","|| (abs(p.y) > 0.0 && abs(p.y) < (1.0 - sin(shape.p)) && abs(p.x) < shape.p)",") ? color1 : color0;","} else {","float scale = (convex > 0) ? shape.p * 0.5 : shape.p;","float angle = PI_2 / shape.t;","mat2 t = mat2(cos(angle),sin(angle),-sin(angle),cos(angle));","int q = 0;","for (int i=0;i<MAX_ANGLES;i++) {","if (i >= angles) break;","if (p.y < scale) q++;","p *= t;","}","gl_FragColor =","((convex > 0)","? (q > angles - (angles - 1) / 2)",": (q > angles - 1))","? color1 : color0;","}","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,n]),r},createSpriteSheet:function(e){var t=this,n={maxWidth:e("spriteSheetResolution")||2048,maxHeight:e("spriteSheetResolution")||2048,maxSprites:e("spriteSheetMaxSprites")||256},r=n.maxWidth/Math.sqrt(n.maxSprites),i=n.maxHeight/Math.sqrt(n.maxSprites),s=document.createElement("canvas");s.width=n.maxWidth,s.height=n.maxHeight;var o=s.getContext("2d");t.spriteSheet={canvas:s,maxWidth:n.maxWidth,maxHeight:n.maxHeight,maxSprites:n.maxSprite,spriteWidth:r,spriteHeight:i,currentIndex:1,urlToIndex:{}}},getText:function(e,t,n,r,i,s,o){var u=this,a=Math.round(r*u.spriteSheet.spriteHeight),f=i*u.spriteSheet.spriteWidth,l=s*u.spriteSheet.spriteHeight,c=e+":"+t+":"+n+":"+a+":"+o+":"+f+":"+l;if(c in u.spriteSheet.urlToIndex)return u.spriteSheet.urlToIndex[c];var h=u.spriteSheet.currentIndex;u.spriteSheet.currentIndex+=1,u.spriteSheet.urlToIndex[c]=h;var p=h*u.spriteSheet.spriteWidth%u.spriteSheet.maxWidth,d=Math.floor(h*u.spriteSheet.spriteWidth/u.spriteSheet.maxWidth)*u.spriteSheet.spriteHeight,v=u.spriteSheet.canvas.getContext("2d");return v.beginPath(),v.rect(p,d,u.spriteSheet.spriteWidth,u.spriteSheet.spriteHeight),v.fillStyle=t,v.fill(),v.beginPath(),v.fillStyle=n,v.font=""+a+"px "+e,v.textAlign="center",v.textBaseline="middle",v.fillText(o,p+f,d+l),u.updateNeeded=!0,h},getImage:function(e,t){var n=this,r=n.spriteSheet.canvas.getContext("2d");if(e.length<1)return-1;if(e in n.spriteSheet.urlToIndex)return n.spriteSheet.urlToIndex[e];var i=n.spriteSheet.currentIndex;if(i>n.spriteSheet.maxSprites)return-1;n.spriteSheet.currentIndex+=1,n.spriteSheet.urlToIndex[e]=i;var s=new Image;return s.setAttribute("crossOrigin",t),s.onload=function(){var e=i*n.spriteSheet.spriteWidth%n.spriteSheet.maxWidth,t=Math.floor(i*n.spriteSheet.spriteWidth/n.spriteSheet.maxWidth)*n.spriteSheet.spriteHeight;r.drawImage(s,0,0,s.width,s.height,e,t,n.spriteSheet.spriteWidth,n.spriteSheet.spriteHeight),n.updateNeeded=!0},s.src=e,i}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,n,r,i){var s=e.color||i("defaultNodeColor");e.active&&(i("nodeActiveColor")==="node"?s=e.active_color||s:s=i("defaultNodeActiveColor")||s),s=sigma.utils.floatColor(s||i("defaultNodeColor")),t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"]||1,t[n++]=sigma.utils.floatColor(s||i("defaultNodeColor"))},render:function(e,t,n,r){var i,s=e.getAttribLocation(t,"a_position"),o=e.getAttribLocation(t,"a_size"),u=e.getAttribLocation(t,"a_color"),a=e.getUniformLocation(t,"u_resolution"),f=e.getUniformLocation(t,"u_matrix"),l=e.getUniformLocation(t,"u_ratio"),c=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(a,r.width,r.height),e.uniform1f(l,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),e.uniform1f(c,r.scalingRatio),e.uniformMatrix3fv(f,!1,r.matrix),e.enableVertexAttribArray(s),e.enableVertexAttribArray(o),e.enableVertexAttribArray(u),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,n]),r}}}(),function(){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.classes.graph.addMethod("HITS",function(e){var t={},n=1e-4,r=[],i=[],s=this.nodes(),o=s.length,u={};e||(e=!1);for(var a in s)e?(r.push(s[a]),i.push(s[a])):(this.degree(s[a].id,"out")>0&&r.push(s[a]),this.degree(s[a].id,"in")>0&&i.push(s[a])),t[s[a].id]={authority:1,hub:1};var f;for(;;){f=!0;var l=0,c=0;for(var a in i){u[i[a].id]={authority:1,hub:0};var h=[];e?h=this.allNeighborsIndex[i[a].id]:h=this.inNeighborsIndex[i[a].id];for(var p in h)p!=i[a].id&&(u[i[a].id].authority+=t[p].hub);l+=u[i[a].id].authority}for(var a in r){u[r[a].id]?u[r[a].id].hub=1:u[r[a].id]={authority:0,hub:1};var h=[];e?h=this.allNeighborsIndex[r[a].id]:h=this.outNeighborsIndex[r[a].id];for(var p in h)p!=r[a].id&&(u[r[a].id].hub+=t[p].authority);c+=u[r[a].id].hub}for(var a in i)u[i[a].id].authority/=l,Math.abs((u[i[a].id].authority-t[i[a].id].authority)/t[i[a].id].authority)>=n&&(f=!1);for(var a in r)u[r[a].id].hub/=c,Math.abs((u[r[a].id].hub-t[r[a].id].hub)/t[r[a].id].hub)>=n&&(f=!1);t=u,u={};if(f)break}return t})}.call(window),function(e){"use strict";if(typeof sigma=="undefined")throw new Error("sigma not in scope.");sigma.utils.pkg("sigma.plugins");var t=function(t,n){function f(e){var t={};return e.forEach(function(e,n){t[e]=!0}),Object.keys(t)}function l(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function c(e,t){var n=e._assoc_mat[t]?Object.keys(e._assoc_mat[t]):[],r=0;return n.forEach(function(n,i){var s=e._assoc_mat[t][n]||1;t==n&&(s*=2),r+=s}),r}function h(e,t){if(typeof e._assoc_mat[t]=="undefined")return[];var n=Object.keys(e._assoc_mat[t]);return n}function p(t,n,r){return t._assoc_mat[n]?t._assoc_mat[n][r]:e}function d(e){var t=0;return e.edges.forEach(function(e){t+=e.weight}),t}function v(e,t){g(e,t);var n=e.edges.map(function(e){return e.source+"_"+e.target}).indexOf(t.source+"_"+t.target);n!=-1?e.edges[n].weight=t.weight:e.edges.push(t)}function m(e){var t={};return e.forEach(function(e,n){t[e.source]=t[e.source]||{},t[e.source][e.target]=e.weight,t[e.target]=t[e.target]||{},t[e.target][e.source]=e.weight}),t}function g(e,t){e._assoc_mat[t.source]=e._assoc_mat[t.source]||{},e._assoc_mat[t.source][t.target]=t.weight,e._assoc_mat[t.target]=e._assoc_mat[t.target]||{},e._assoc_mat[t.target][t.source]=t.weight}function y(e){if(e==null||typeof e!="object")return e;var t=e.constructor();for(var n in e)t[n]=y(e[n]);return t}function b(e,t,n){t.nodes_to_com={},t.total_weight=0,t.internals={},t.degrees={},t.gdegrees={},t.loops={},t.total_weight=d(e),typeof n=="undefined"?e.nodes.forEach(function(n,r){t.nodes_to_com[n]=r;var i=c(e,n);if(i<0)throw new Error("A node has a negative degree. Use positive weights.");t.degrees[r]=i,t.gdegrees[n]=i,t.loops[n]=p(e,n,n)||0,t.internals[r]=t.loops[n]}):e.nodes.forEach(function(r,i){var s=n[r];t.nodes_to_com[r]=s;var o=c(e,r);t.degrees[s]=(t.degrees[s]||0)+o,t.gdegrees[r]=o;var u=0,a=h(e,r);a.forEach(function(t,i){var o=e._assoc_mat[r][t];if(o<=0)throw new Error("A node has a negative degree. Use positive weights.");n[t]==s&&(t==r?u+=o:u+=o/2)}),t.internals[s]=(t.internals[s]||0)+u})}function w(e){var t=e.total_weight,n=0,r=f(l(e.nodes_to_com));return r.forEach(function(r,i){var s=e.internals[r]||0,o=e.degrees[r]||0;t>0&&(n=n+s/t-Math.pow(o/(2*t),2))}),n}function E(e,t,n){var r={},i=h(t,e);return i.forEach(function(i,s){if(i!=e){var o=t._assoc_mat[e][i]||1,u=n.nodes_to_com[i];r[u]=(r[u]||0)+o}}),r}function S(e,t,n,r){r.nodes_to_com[e]=+t,r.degrees[t]=(r.degrees[t]||0)+(r.gdegrees[e]||0),r.internals[t]=(r.internals[t]||0)+n+(r.loops[e]||0)}function x(e,t,n,r){r.degrees[t]=(r.degrees[t]||0)-(r.gdegrees[e]||0),r.internals[t]=(r.internals[t]||0)-n-(r.loops[e]||0),r.nodes_to_com[e]=-1}function T(e){var t=0,n=y(e),r={},i=Object.keys(e);return i.forEach(function(i){var s=e[i],o=typeof r[s]=="undefined"?-1:r[s];o==-1&&(r[s]=t,o=t,t+=1),n[i]=o}),n}function N(e,t){var n=!0,s=0,o=w(t),u=o;while(n&&s!=r){o=u,n=!1,s+=1,e.nodes.forEach(function(r,i){var s=t.nodes_to_com[r],o=(t.gdegrees[r]||0)/(t.total_weight*2),u=E(r,e,t);x(r,s,u[s]||0,t);var a=s,f=0,l=Object.keys(u);l.forEach(function(e,n){var r=u[e]-(t.degrees[e]||0)*o;r>f&&(f=r,a=e)}),S(r,a,u[a]||0,t),a!=s&&(n=!0)}),u=w(t);if(u-o<i)break}}function C(e,t){var n={nodes:[],edges:[],_assoc_mat:{}},r,i,s=l(e);return n.nodes=n.nodes.concat(f(s)),t.edges.forEach(function(t,s){i=t.weight||1;var o=e[t.source],u=e[t.target];r=p(n,o,u)||0;var a=r+i;v(n,{source:o,target:u,weight:a})}),n}function k(e,t){var n=y(e[0]);for(var r=1;r<t+1;r++)Object.keys(n).forEach(function(t,i){var s=t,o=n[t];n[s]=e[r][o]});return n}function L(e,t){if(e.edges.length==0){var n={};return e.nodes.forEach(function(e,t){n[e]=e}),n}var r={};b(u,r,t);var s=w(r),o=[];N(u,r);var a=w(r),f=T(r.nodes_to_com);o.push(f),s=a;var l=C(f,u);b(l,r);for(;;){N(l,r),a=w(r);if(a-s<i)break;f=T(r.nodes_to_com),o.push(f),s=a,l=C(f,l),b(l,r)}return o}var r=-1,i=1e-7,s={},o=[],u,a;u={nodes:t.nodes().map(function(e){return e.id}),edges:t.edges(),_assoc_mat:m(t.edges())},a=n;var A={};return A.run=function(e){return a=e||a,s={},o=L(u,a),this},A.countLevels=function(){return o.length-1},A.getPartitions=function(t){if(t!==e&&(t<0||t>o.length-1))throw new RangeError('Invalid argument: "level" is not between 0 and '+o.length-1+" included.");return k(o,t||o.length-1)},A.countPartitions=function(e){return 1+Math.max.apply(null,Object.keys(e).map(function(t){return e[t]}))},A.setResults=function(e){var n=this,r=e||{},i=this.getPartitions(r.level);return t.nodes().forEach(function(e){typeof r.setter=="function"?(n.setter=r.setter,n.setter.call(e,i[e.id])):typeof n.setter=="function"?n.setter.call(e,i[e.id]):e._louvain=i[e.id]}),this},A};sigma.plugins.louvain=function(e,n){var r=n||{},i=t(e,r.partitions).run();return i.setResults({level:i.countLevels(),setter:r.setter}),i}}.call(this);