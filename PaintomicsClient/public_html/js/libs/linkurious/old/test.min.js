(function(e){"use strict";if("undefined"==typeof sigma)throw new Error("sigma not in scope.");sigma.utils.pkg("sigma.settings");var t={nodeHaloColor:"#fff",nodeHaloStroke:!1,nodeHaloStrokeColor:"#000",nodeHaloStrokeWidth:.5,nodeHaloSize:50,nodeHaloClustering:!1,nodeHaloClusteringMaxRadius:1e3,edgeHaloColor:"#fff",edgeHaloSize:10,drawHalo:!0};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}).call(this),function(e){"use strict";function t(){for(var e=[],t=-1,n=arguments.length;++t<n;){var r=arguments[t];e.push(r)}var i=e[0],s=-1,o=i?i.length:0,u=[];e:for(;++s<o;)if(r=i[s],u.indexOf(r)<0){for(var t=n;--t;)if(e[t].indexOf(r)<0)continue e;u.push(r)}return u}function n(e,t,n){for(var r=0;r<e.length;r++)null!=e[r]&&(t.beginPath(),t.arc(e[r].x,e[r].y,e[r].radius,0,2*Math.PI,!0),t.closePath(),n?t.stroke():t.fill())}function r(e,t,n){if(n=n||Number.POSITIVE_INFINITY,e.length>1)for(var r,i,s,o=!0;o;){o=!1;for(var u=0;u<e.length;u++)if(null!==e[u])for(var a=u+1;a<e.length;a++)if(null!==e[a]&&(i=sigma.utils.getDistance(e[u].x,e[u].y,e[a].x,e[a].y),n>i&&i<e[u].radius+e[a].radius)){o=!0,s=[{x:e[u].x,y:e[u].y,radius:e[u].radius},{x:e[a].x,y:e[a].y,radius:e[a].radius}],e[u].points&&(s=s.concat(e[u].points)),e[a].points&&(s=s.concat(e[a].points)),r={x:0,y:0};for(var f=0;f<s.length;f++)r.x+=s[f].x,r.y+=s[f].y;r.x/=s.length,r.y/=s.length,r.radius=Math.max.apply(null,s.map(function(e){return t+sigma.utils.getDistance(r.x,r.y,e.x,e.y)})),e.push({x:r.x,y:r.y,radius:r.radius,points:s}),e[u]=e[a]=null;break}}return e}function i(e){e=e||{};var i=sigma.utils.getPixelRatio();this.domElements.background||(this.initDOM("canvas","background"),this.domElements.background.width=this.container.offsetWidth*i,this.domElements.background.height=this.container.offsetHeight*i,this.container.insertBefore(this.domElements.background,this.container.firstChild));var s,o,u,a,f,l,h,p,v,m,g=this,y=g.contexts.background,w=this instanceof sigma.renderers.webgl,E=g.options.prefix,S=w?E.substr(5):E,x=e.nodeHaloClustering||g.settings("nodeHaloClustering"),T=e.nodeHaloClusteringMaxRadius||g.settings("nodeHaloClusteringMaxRadius"),N=e.nodeHaloColor||g.settings("nodeHaloColor"),C=e.nodeHaloSize||g.settings("nodeHaloSize"),k=e.nodeHaloStroke||g.settings("nodeHaloStroke"),L=e.nodeHaloStrokeColor||g.settings("nodeHaloStrokeColor"),A=e.nodeHaloStrokeWidth||g.settings("nodeHaloStrokeWidth"),O=g.settings("borderSize")||0,M=g.settings("outerBorderSize")||0,_=e.edgeHaloColor||g.settings("edgeHaloColor"),D=e.edgeHaloSize||g.settings("edgeHaloSize"),P=e.drawHalo||g.settings("drawHalo"),H=e.nodes||[],B=e.edges||[];P&&(H=w?H:t(e.nodes,g.nodesOnScreen),B=w?B:t(e.edges,g.edgesOnScreen),y.clearRect(0,0,y.canvas.width,y.canvas.height),y.save(),y.strokeStyle=_,B.forEach(function(e){s=g.graph.nodes(e.source),o=g.graph.nodes(e.target),y.lineWidth=(e[E+"size"]||1)+D,y.beginPath(),u={},a=s[S+"size"],f=s[S+"x"],l=s[S+"y"],h=o[S+"x"],p=o[S+"y"],y.moveTo(f,l),"curve"===e.type||"curvedArrow"===e.type?e.source===e.target?(u=sigma.utils.getSelfLoopControlPoints(f,l,a),y.bezierCurveTo(u.x1,u.y1,u.x2,u.y2,h,p)):(u=sigma.utils.getQuadraticControlPoint(f,l,h,p),y.quadraticCurveTo(u.x,u.y,h,p)):(y.moveTo(f,l),y.lineTo(h,p)),y.stroke(),y.closePath()}),y.fillStyle=N,k&&(y.lineWidth=A,y.strokeStyle=L),v=O+M+C,m=H.filter(function(e){return!e.hidden}).map(function(e){return{x:e[S+"x"],y:e[S+"y"],radius:e[S+"size"]+v}}),x&&(m=r(m,v,T)),k&&n(m,y,!0),n(m,y),y.restore())}if("undefined"==typeof sigma)throw new Error("sigma not in scope.");sigma.renderers.canvas.prototype.halo=i,sigma.renderers.webgl.prototype.halo=i}.call(this),function(e){"use strict";function s(e){var t=";base64,";if(e.indexOf(t)==-1){var n=e.split(","),r=n[0].split(":")[1],i=decodeURIComponent(n[1]);return new Blob([i],{type:r})}var n=e.split(t),r=n[0].split(":")[1],i=window.atob(n[1]),s=i.length,o=new Uint8Array(s);for(var u=0;u<s;++u)o[u]=i.charCodeAt(u);return new Blob([o],{type:r})}function o(e,t,n){n=n||"graph."+t;if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(s(e),n);else if(navigator.msSaveBlob)navigator.msSaveBlob(s(e),n);else{var r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r)}}function u(e,t,n){var r=Math.min(n/e,n/t);return{width:e*r,height:t*r}}function a(e,t,n){var r;return r=sigma.utils.getBoundaries(e.graph,t.camera.readPrefix),r.minX/=n.zoomRatio,r.minY/=n.zoomRatio,r.maxX/=n.zoomRatio,r.maxY/=n.zoomRatio,r}function f(e,t,n){var r,i=n.margin||0,s={width:t.width,height:t.height};return!n.clips&&!n.size?(r=a(e,t,n),s={width:r.maxX-r.minX+r.sizeMax*2,height:r.maxY-r.minY+r.sizeMax*2}):n.size&&n.size>=1&&(s=u(t.width,t.height,n.size)),s.width+=i,s.height+=i,s}function l(e,t,r){r=r||{};if(!r.format||r.format in n){var i=f(e,t,r),s=e.settings("batchEdgesDrawing");s&&e.settings("batchEdgesDrawing",!1),r.clip||this.clone(e,r,i);var u=this.draw(t,r,i);e.settings("batchEdgesDrawing",s);var a=u.toDataURL(n[r.format||"png"]);return r.download&&o(a,r.format||"png",r.filename),a}throw Error('sigma.renderers.image: unsupported format "'+r.format+'".')}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t,n,r,i;t=["scene","edges","nodes","labels"],n={png:"image/png",jpg:"image/jpeg",gif:"image/gif",tiff:"image/tiff"},l.prototype.clone=function(e,n,s){n.tmpContainer=n.tmpContainer||"image-container";var o=document.getElementById(n.tmpContainer);o||(o=document.createElement("div"),o.id=n.tmpContainer,document.body.appendChild(o)),o.setAttribute("style","width:"+s.width+"px;"+"height:"+Math.round(s.height)+"px;");var u=e.addRenderer({container:document.getElementById(n.tmpContainer),type:"canvas",settings:{batchEdgesDrawing:!0,drawLabels:!!n.labels}});u.camera.ratio=n.zoomRatio>0?n.zoomRatio:1;var a=u instanceof sigma.renderers.webgl,f=!1,l=[];r=document.createElement("canvas"),i=r.getContext("2d"),e.refresh(),t.forEach(function(e){if(!u.contexts[e])return;if(n.labels===!1&&e==="labels")return;var t=u.domElements[e]||u.domElements.scene,o=u.contexts[e];f||(r.width=s.width,r.height=s.height,a&&o instanceof WebGLRenderingContext&&(r.width*=.5,r.height*=.5),f=!0),o instanceof WebGLRenderingContext?i.drawImage(t,0,0,t.width/2,t.height/2):i.drawImage(t,0,0);if(~l.indexOf(o))return;l.push(o)}),l=[],e.killRenderer(u),o.parentNode.removeChild(o)},l.prototype.draw=function(e,n,i){if(!n.size||n.size<1)n.size=window.innerWidth;var s=e instanceof sigma.renderers.webgl,o=!1,a=[],f=document.createElement("canvas"),l=f.getContext("2d");return t.forEach(function(t){if(!e.contexts[t])return;if(n.labels===!1&&t==="labels")return;var c=e.domElements[t]||e.domElements.scene,h=e.contexts[t];if(~a.indexOf(h))return;if(!o){var p,d;n.clip?(p=c.width,d=c.height,i=u(p,d,n.size)):(p=r.width,d=r.height),f.width=i.width,f.height=i.height,!s&&!h instanceof WebGLRenderingContext&&(f.width*=2,f.height*=2),o=!0,n.background&&(l.rect(0,0,f.width,f.height),l.fillStyle=n.background,l.fill())}n.clip?l.drawImage(c,0,0,f.width,f.height):l.drawImage(r,0,0,f.width,f.height),a.push(h)}),a=[],f};var c=null;sigma.plugins.image=function(e,t,n){return sigma.plugins.killImage(),c||(c=new l(e,t,n)),c},sigma.plugins.killImage=function(){c instanceof l&&(c=null,r=null,i=null)}}.call(this),function(undefined){"use strict";function crush(e){var t,n,r,i=["x","y","dx","dy","old_dx","old_dy","mass","convergence","size","fixed"],s=["source","target","weight"],o=["node","centerX","centerY","size","nextSibling","firstChild","mass","massCenterX","massCenterY"];for(n=0,r=o.length;n<r;n++)t=new RegExp("rp\\(([^,]*), '"+o[n]+"'\\)","g"),e=e.replace(t,n===0?"$1":"$1 + "+n);for(n=0,r=i.length;n<r;n++)t=new RegExp("np\\(([^,]*), '"+i[n]+"'\\)","g"),e=e.replace(t,n===0?"$1":"$1 + "+n);for(n=0,r=s.length;n<r;n++)t=new RegExp("ep\\(([^,]*), '"+s[n]+"'\\)","g"),e=e.replace(t,n===0?"$1":"$1 + "+n);return e}function getWorkerFn(){var e=crush?crush(Worker.toString()):Worker.toString();return";("+e+").call(this);"}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layouts");var _root=this,inWebWorker=!("document"in _root),Worker=function(e){function s(){var e,t,n={},r=arguments.length;for(e=r-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n}function o(e){var t;for(t in e)(!("hasOwnProperty"in e)||e.hasOwnProperty(t))&&delete e[t];return e}function u(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function a(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d;u=r-e,a=i-t,f=Math.sqrt(a*a+u*u);if(f>n+s)return!1;if(f<Math.abs(n-s))return!1;o=(n*n-s*s+f*f)/(2*f),p=e+u*o/f,d=t+a*o/f,l=Math.sqrt(n*n-o*o),c=-a*(l/f),h=u*(l/f);var v=p+c,m=p-c,g=d+h,y=d-h;return{xi:v,xi_prime:m,yi:g,yi_prime:y}}function f(e,t,n,r,i,s,o,u){var a,f,l,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return a=(u-s)*(n-e)-(o-i)*(r-t),a==0?p:(f=t-s,l=e-i,c=(o-i)*f-(u-s)*l,h=(n-e)*f-(r-t)*l,f=c/a,l=h/a,p.x=e+f*(n-e),p.y=t+f*(r-t),f>0&&f<1&&(p.onLine1=!0),l>0&&l<1&&(p.onLine2=!0),p)}function l(e,t,n,r,i){return(i-r)*(e-t)/(n-t)+r}function c(e){return Math.acos(e.x/Math.sqrt(e.x*e.x+e.y*e.y))}function h(e,t,n,r){return{xi:-(r-t),yi:n-e,xi_prime:r-t,yi_prime:-(n-e)}}function p(e,t){return{x:(e.xi_prime-e.xi)/t,y:(e.yi_prime-e.yi)/t}}function d(e,t,n,r,i){return{x:e+(n-e)*i,y:t+(r-t)*i}}function y(e,n){if(e%t.ppn!==0)throw new Error('Invalid argument in np: "i" is not correct ('+e+").");if(e!==parseInt(e))throw new TypeError('Invalid argument in np: "i" is not an integer.');if(n in v)return e+v[n];throw new Error("ForceLink.Worker - Inexistant node property given ("+n+").")}function b(e,n){if(e%t.ppe!==0)throw new Error('Invalid argument in ep: "i" is not correct ('+e+").");if(e!==parseInt(e))throw new TypeError('Invalid argument in ep: "i" is not an integer.');if(n in m)return e+m[n];throw new Error("ForceLink.Worker - Inexistant edge property given ("+n+").")}function w(e,n){if(e%t.ppr!==0)throw new Error('Invalid argument in rp: "i" is not correct ('+e+").");if(e!==parseInt(e))throw new TypeError('Invalid argument in rp: "i" is not an integer.');if(n in g)return e+g[n];throw new Error("ForceLink.Worker - Inexistant region property given ("+n+").")}function E(e){if(isNaN(e))throw new TypeError("NaN alert!")}function S(e,i,s){s=s||{};var o,u;n=e,r=i,t.nodesLength=n.length,t.edgesLength=r.length,x(s)}function x(e){t.settings=s(e,t.settings)}function T(){var e,s,o,a,f,v,m,g,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B;for(v=0;v<t.nodesLength;v+=t.ppn)n[y(v,"old_dx")]=n[y(v,"dx")],n[y(v,"old_dy")]=n[y(v,"dy")],n[y(v,"dx")]=0,n[y(v,"dy")]=0;if(t.settings.outboundAttractionDistribution){C=0;for(v=0;v<t.nodesLength;v+=t.ppn)C+=n[y(v,"mass")];C/=t.nodesLength}if(t.settings.barnesHutOptimize){var j=Infinity,F=-Infinity,I=Infinity,q=-Infinity,R,U,z,X,V;i=[];for(v=0;v<t.nodesLength;v+=t.ppn)j=Math.min(j,n[y(v,"x")]),F=Math.max(F,n[y(v,"x")]),I=Math.min(I,n[y(v,"y")]),q=Math.max(q,n[y(v,"y")]);i[w(0,"node")]=-1,i[w(0,"centerX")]=(j+F)/2,i[w(0,"centerY")]=(I+q)/2,i[w(0,"size")]=Math.max(F-j,q-I),i[w(0,"nextSibling")]=-1,i[w(0,"firstChild")]=-1,i[w(0,"mass")]=0,i[w(0,"massCenterX")]=0,i[w(0,"massCenterY")]=0,a=1;for(v=0;v<t.nodesLength;v+=t.ppn){f=0;for(;;){if(i[w(f,"firstChild")]>=0){n[y(v,"x")]<i[w(f,"centerX")]?n[y(v,"y")]<i[w(f,"centerY")]?R=i[w(f,"firstChild")]:R=i[w(f,"firstChild")]+t.ppr:n[y(v,"y")]<i[w(f,"centerY")]?R=i[w(f,"firstChild")]+t.ppr*2:R=i[w(f,"firstChild")]+t.ppr*3,i[w(f,"massCenterX")]=(i[w(f,"massCenterX")]*i[w(f,"mass")]+n[y(v,"x")]*n[y(v,"mass")])/(i[w(f,"mass")]+n[y(v,"mass")]),i[w(f,"massCenterY")]=(i[w(f,"massCenterY")]*i[w(f,"mass")]+n[y(v,"y")]*n[y(v,"mass")])/(i[w(f,"mass")]+n[y(v,"mass")]),i[w(f,"mass")]+=n[y(v,"mass")],f=R;continue}if(i[w(f,"node")]<0){i[w(f,"node")]=v;break}i[w(f,"firstChild")]=a*t.ppr,S=i[w(f,"size")]/2,x=i[w(f,"firstChild")],i[w(x,"node")]=-1,i[w(x,"centerX")]=i[w(f,"centerX")]-S,i[w(x,"centerY")]=i[w(f,"centerY")]-S,i[w(x,"size")]=S,i[w(x,"nextSibling")]=x+t.ppr,i[w(x,"firstChild")]=-1,i[w(x,"mass")]=0,i[w(x,"massCenterX")]=0,i[w(x,"massCenterY")]=0,x+=t.ppr,i[w(x,"node")]=-1,i[w(x,"centerX")]=i[w(f,"centerX")]-S,i[w(x,"centerY")]=i[w(f,"centerY")]+S,i[w(x,"size")]=S,i[w(x,"nextSibling")]=x+t.ppr,i[w(x,"firstChild")]=-1,i[w(x,"mass")]=0,i[w(x,"massCenterX")]=0,i[w(x,"massCenterY")]=0,x+=t.ppr,i[w(x,"node")]=-1,i[w(x,"centerX")]=i[w(f,"centerX")]+S,i[w(x,"centerY")]=i[w(f,"centerY")]-S,i[w(x,"size")]=S,i[w(x,"nextSibling")]=x+t.ppr,i[w(x,"firstChild")]=-1,i[w(x,"mass")]=0,i[w(x,"massCenterX")]=0,i[w(x,"massCenterY")]=0,x+=t.ppr,i[w(x,"node")]=-1,i[w(x,"centerX")]=i[w(f,"centerX")]+S,i[w(x,"centerY")]=i[w(f,"centerY")]+S,i[w(x,"size")]=S,i[w(x,"nextSibling")]=i[w(f,"nextSibling")],i[w(x,"firstChild")]=-1,i[w(x,"mass")]=0,i[w(x,"massCenterX")]=0,i[w(x,"massCenterY")]=0,a+=4,n[y(i[w(f,"node")],"x")]<i[w(f,"centerX")]?n[y(i[w(f,"node")],"y")]<i[w(f,"centerY")]?R=i[w(f,"firstChild")]:R=i[w(f,"firstChild")]+t.ppr:n[y(i[w(f,"node")],"y")]<i[w(f,"centerY")]?R=i[w(f,"firstChild")]+t.ppr*2:R=i[w(f,"firstChild")]+t.ppr*3,i[w(f,"mass")]=n[y(i[w(f,"node")],"mass")],i[w(f,"massCenterX")]=n[y(i[w(f,"node")],"x")],i[w(f,"massCenterY")]=n[y(i[w(f,"node")],"y")],i[w(R,"node")]=i[w(f,"node")],i[w(f,"node")]=-1,n[y(v,"x")]<i[w(f,"centerX")]?n[y(v,"y")]<i[w(f,"centerY")]?X=i[w(f,"firstChild")]:X=i[w(f,"firstChild")]+t.ppr:n[y(v,"y")]<i[w(f,"centerY")]?X=i[w(f,"firstChild")]+t.ppr*2:X=i[w(f,"firstChild")]+t.ppr*3;if(R===X){f=R;continue}i[w(X,"node")]=v;break}}}if(t.settings.barnesHutOptimize){k=t.settings.scalingRatio;for(v=0;v<t.nodesLength;v+=t.ppn){f=0;for(;;){if(i[w(f,"firstChild")]>=0){P=Math.sqrt((n[y(v,"x")]-i[w(f,"massCenterX")])*(n[y(v,"x")]-i[w(f,"massCenterX")])+(n[y(v,"y")]-i[w(f,"massCenterY")])*(n[y(v,"y")]-i[w(f,"massCenterY")]));if(2*i[w(f,"size")]/P<t.settings.barnesHutTheta){L=n[y(v,"x")]-i[w(f,"massCenterX")],A=n[y(v,"y")]-i[w(f,"massCenterY")],t.settings.adjustSize?P>0?(B=k*n[y(v,"mass")]*i[w(f,"mass")]/P/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B):P<0&&(B=-k*n[y(v,"mass")]*i[w(f,"mass")]/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B):P>0&&(B=k*n[y(v,"mass")]*i[w(f,"mass")]/P/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B);if(i[w(f,"nextSibling")]<0)break;f=i[w(f,"nextSibling")];continue}f=i[w(f,"firstChild")];continue}i[w(f,"node")]>=0&&i[w(f,"node")]!==v&&(L=n[y(v,"x")]-n[y(i[w(f,"node")],"x")],A=n[y(v,"y")]-n[y(i[w(f,"node")],"y")],P=Math.sqrt(L*L+A*A),t.settings.adjustSize?P>0?(B=k*n[y(v,"mass")]*n[y(i[w(f,"node")],"mass")]/P/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B):P<0&&(B=-k*n[y(v,"mass")]*n[y(i[w(f,"node")],"mass")]/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B):P>0&&(B=k*n[y(v,"mass")]*n[y(i[w(f,"node")],"mass")]/P/P,n[y(v,"dx")]+=L*B,n[y(v,"dy")]+=A*B));if(i[w(f,"nextSibling")]<0)break;f=i[w(f,"nextSibling")];continue}}}else{k=t.settings.scalingRatio;for(m=0;m<t.nodesLength;m+=t.ppn)for(g=0;g<m;g+=t.ppn)L=n[y(m,"x")]-n[y(g,"x")],A=n[y(m,"y")]-n[y(g,"y")],t.settings.adjustSize?(P=Math.sqrt(L*L+A*A)-n[y(m,"size")]-n[y(g,"size")],P>0?(B=k*n[y(m,"mass")]*n[y(g,"mass")]/P/P,n[y(m,"dx")]+=L*B,n[y(m,"dy")]+=A*B,n[y(g,"dx")]+=L*B,n[y(g,"dy")]+=A*B):P<0&&(B=100*k*n[y(m,"mass")]*n[y(g,"mass")],n[y(m,"dx")]+=L*B,n[y(m,"dy")]+=A*B,n[y(g,"dx")]-=L*B,n[y(g,"dy")]-=A*B)):(P=Math.sqrt(L*L+A*A),P>0&&(B=k*n[y(m,"mass")]*n[y(g,"mass")]/P/P,n[y(m,"dx")]+=L*B,n[y(m,"dy")]+=A*B,n[y(g,"dx")]-=L*B,n[y(g,"dy")]-=A*B))}x=t.settings.gravity/t.settings.scalingRatio,k=t.settings.scalingRatio;for(v=0;v<t.nodesLength;v+=t.ppn)B=0,L=n[y(v,"x")],A=n[y(v,"y")],P=Math.sqrt(L*L+A*A),t.settings.strongGravityMode?P>0&&(B=k*n[y(v,"mass")]*x):P>0&&(B=k*n[y(v,"mass")]*x/P),n[y(v,"dx")]-=L*B,n[y(v,"dy")]-=A*B;k=1*(t.settings.outboundAttractionDistribution?C:1);for(E=0;E<t.edgesLength;E+=t.ppe)m=r[b(E,"source")],g=r[b(E,"target")],S=r[b(E,"weight")],_=Math.pow(S,t.settings.edgeWeightInfluence),L=n[y(m,"x")]-n[y(g,"x")],A=n[y(m,"y")]-n[y(g,"y")],t.settings.adjustSizes?(P=Math.sqrt(L*L+A*A-n[y(m,"size")]-n[y(g,"size")]),t.settings.linLogMode?t.settings.outboundAttractionDistribution?P>0&&(B=-k*_*Math.log(1+P)/P/n[y(m,"mass")]):P>0&&(B=-k*_*Math.log(1+P)/P):t.settings.outboundAttractionDistribution?P>0&&(B=-k*_/n[y(m,"mass")]):P>0&&(B=-k*_)):(P=Math.sqrt(L*L+A*A),t.settings.linLogMode?t.settings.outboundAttractionDistribution?P>0&&(B=-k*_*Math.log(1+P)/P/n[y(m,"mass")]):P>0&&(B=-k*_*Math.log(1+P)/P):t.settings.outboundAttractionDistribution?(P=1,B=-k*_/n[y(m,"mass")]):(P=1,B=-k*_)),P>0&&(n[y(m,"dx")]+=L*B,n[y(m,"dy")]+=A*B,n[y(g,"dx")]-=L*B,n[y(g,"dy")]-=A*B);var $,J,K,Q,G=0;if(t.settings.adjustSizes)for(v=0;v<t.nodesLength;v+=t.ppn)n[y(v,"fixed")]||($=Math.sqrt(n[y(v,"dx")]*n[y(v,"dx")]+n[y(v,"dy")]*n[y(v,"dy")]),$>t.maxForce&&(n[y(v,"dx")]=n[y(v,"dx")]*t.maxForce/$,n[y(v,"dy")]=n[y(v,"dy")]*t.maxForce/$),J=n[y(v,"mass")]*Math.sqrt((n[y(v,"old_dx")]-n[y(v,"dx")])*(n[y(v,"old_dx")]-n[y(v,"dx")])+(n[y(v,"old_dy")]-n[y(v,"dy")])*(n[y(v,"old_dy")]-n[y(v,"dy")])),K=Math.sqrt((n[y(v,"old_dx")]+n[y(v,"dx")])*(n[y(v,"old_dx")]+n[y(v,"dx")])+(n[y(v,"old_dy")]+n[y(v,"dy")])*(n[y(v,"old_dy")]+n[y(v,"dy")]))/2,Q=.1*Math.log(1+K)/(1+Math.sqrt(J)),O=n[y(v,"x")],M=n[y(v,"y")],n[y(v,"x")]=n[y(v,"x")]+n[y(v,"dx")]*(Q/t.settings.slowDown),n[y(v,"y")]=n[y(v,"y")]+n[y(v,"dy")]*(Q/t.settings.slowDown),L=n[y(v,"x")],A=n[y(v,"y")],P=Math.sqrt((L-O)*(L-O)+(A-M)*(A-M)),G+=P);else for(v=0;v<t.nodesLength;v+=t.ppn)n[y(v,"fixed")]||(J=n[y(v,"mass")]*Math.sqrt((n[y(v,"old_dx")]-n[y(v,"dx")])*(n[y(v,"old_dx")]-n[y(v,"dx")])+(n[y(v,"old_dy")]-n[y(v,"dy")])*(n[y(v,"old_dy")]-n[y(v,"dy")])),K=Math.sqrt((n[y(v,"old_dx")]+n[y(v,"dx")])*(n[y(v,"old_dx")]+n[y(v,"dx")])+(n[y(v,"old_dy")]+n[y(v,"dy")])*(n[y(v,"old_dy")]+n[y(v,"dy")]))/2,Q=n[y(v,"convergence")]*Math.log(1+K)/(1+Math.sqrt(J)),n[y(v,"convergence")]=Math.min(1,Math.sqrt(Q*(n[y(v,"dx")]*n[y(v,"dx")]+n[y(v,"dy")]*n[y(v,"dy")])/(1+Math.sqrt(J)))),O=n[y(v,"x")],M=n[y(v,"y")],n[y(v,"x")]=n[y(v,"x")]+n[y(v,"dx")]*(Q/t.settings.slowDown),n[y(v,"y")]=n[y(v,"y")]+n[y(v,"dy")]*(Q/t.settings.slowDown),L=n[y(v,"x")],A=n[y(v,"y")],P=Math.sqrt((L-O)*(L-O)+(A-M)*(A-M)),G+=P);t.iterations++;if(t.settings.autoStop){t.converged=t.iterations>t.settings.maxIterations||G/t.nodesLength<t.settings.avgDistanceThreshold;if(t.converged&&t.settings.alignNodeSiblings){var Y={},Z={},et,tt;for(E=0;E<t.edgesLength;E+=t.ppe){m=r[b(E,"source")],g=r[b(E,"target")];if(m===g)continue;Y[m]=Y[m]||{},Y[g]=Y[g]||{},Y[m][g]=!0,Y[g][m]=!0}Object.keys(Y).forEach(function(e){e=~~e,tt=Object.keys(Y[e]),tt.length==2&&(et=tt[0]+";"+tt[1],et in Z?Z[et].push(e):(et=tt[1]+";"+tt[0],Z[et]||(Z[et]=[~~tt[1],~~tt[0]]),Z[et].push(e)))});var nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt=t.settings.nodeSiblingsAngleMin;Object.keys(Z).forEach(function(e){rt=Z[e].shift(),it=Z[e].shift(),nt=Z[e],ut=n[y(rt,"x")],at=n[y(rt,"y")],ft=n[y(it,"x")],lt=n[y(it,"y")];if(nt.length==1)return;st=Object.keys(Y[rt]).length,ot=Object.keys(Y[it]).length,ct=l(st/(st+ot),0,1,.25,.75),pt=d(ut,at,ft,lt,ct),dt=h(ut,at,ft,lt),ht=u(ut,at,ft,lt),vt=p(dt,ht),mt=c(vt);if(2*gt>Math.PI)throw new Error("ForceLink.Worker - Invalid parameter: angleMin must be smaller than 2 PI.");if(gt>0)if(mt<gt||mt>Math.PI-gt&&mt<=Math.PI)vt={x:Math.cos(Math.PI-gt)*2,y:Math.sin(Math.PI-gt)*2};else if(mt>2*Math.PI-gt||mt>=Math.PI&&mt<Math.PI+gt)vt={x:Math.cos(gt)*2,y:Math.sin(gt)*2};var r=0,i=1,s=1;nt.length%2==1&&(s=0,r=1);for(var o=0;o<nt.length;o++)n[y(nt[o],"x")]=pt.x+i*vt.x*s*(r||o>=2?t.settings.nodeSiblingsScale:t.settings.nodeSiblingsScale*2/3),n[y(nt[o],"y")]=pt.y+i*vt.y*s*(r||o>=2?t.settings.nodeSiblingsScale:t.settings.nodeSiblingsScale*2/3),i=-i,s+=(o+r)%2})}}}function C(e){for(var t=0;t<e;t++)T();N()}var t={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1,maxIterations:1e3,avgDistanceThreshold:.01,autoStop:!1,alignNodeSiblings:!1,nodeSiblingsScale:1,nodeSiblingsAngleMin:0}},n,r,i,v={x:0,y:1,dx:2,dy:3,old_dx:4,old_dy:5,mass:6,convergence:7,size:8,fixed:9},m={source:0,target:1,weight:2},g={node:0,centerX:1,centerY:2,size:3,nextSibling:4,firstChild:5,mass:6,massCenterX:7,massCenterY:8},N;typeof window!="undefined"&&window.document?N=function(){if(!t.autoStop||t.converged){var e;document.createEvent?(e=document.createEvent("Event"),e.initEvent("newCoords",!0,!1)):(e=document.createEventObject(),e.eventType="newCoords"),e.eventName="newCoords",e.data={nodes:n.buffer,converged:t.converged},requestAnimationFrame(function(){document.dispatchEvent(e)})}}:N=function(){(!t.autoStop||t.converged)&&self.postMessage({nodes:n.buffer,converged:t.converged},[n.buffer])};var k=function(e){switch(e.data.action){case"start":S(new Float32Array(e.data.nodes),new Float32Array(e.data.edges),e.data.config),C(t.settings.startingIterations);break;case"loop":n=new Float32Array(e.data.nodes),C(t.settings.iterationsPerRender);break;case"config":x(e.data.config);break;case"kill":o(t),n=null,r=null,i=null,self.removeEventListener("message",k);break;default:}};self.addEventListener("message",k)};if(inWebWorker)eval(getWorkerFn());else{if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.layouts.getForceLinkWorker=getWorkerFn}}.call(this),function(undefined){"use strict";function Supervisor(e,t){_root.URL=_root.URL||_root.webkitURL,t=t||{},this.sigInst=e,this.graph=this.sigInst.graph,this.ppn=10,this.ppe=3,this.config={},this.worker=null,this.shouldUseWorker=null,this.workerUrl=null,this.runOnBackground=null,this.easing=null,this.randomize=null,this.configure(t),this.started=!1,this.running=!1,this.initWorker()}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layouts");var _root=this,webWorkers="Worker"in _root,eventEmitter={};sigma.classes.dispatcher.extend(eventEmitter),Supervisor.prototype.makeBlob=function(e){var t;try{t=new Blob([e],{type:"application/javascript"})}catch(n){_root.BlobBuilder=_root.BlobBuilder||_root.WebKitBlobBuilder||_root.MozBlobBuilder,t=new BlobBuilder,t.append(e),t=t.getBlob()}return t},Supervisor.prototype.graphToByteArrays=function(){var e=this.graph.nodes(),t=this.graph.edges(),n=e.length*this.ppn,r=t.length*this.ppe,i={},s,o,u;this.nodesByteArray=new Float32Array(n),this.edgesByteArray=new Float32Array(r);for(s=o=0,u=e.length;s<u;s++)i[e[s].id]=o,this.nodesByteArray[o]=this.randomize(e[s].x),this.nodesByteArray[o+1]=this.randomize(e[s].y),this.nodesByteArray[o+2]=0,this.nodesByteArray[o+3]=0,this.nodesByteArray[o+4]=0,this.nodesByteArray[o+5]=0,this.nodesByteArray[o+6]=1+this.graph.degree(e[s].id),this.nodesByteArray[o+7]=1,this.nodesByteArray[o+8]=e[s].size,this.nodesByteArray[o+9]=e[s].fixed||0,o+=this.ppn;for(s=o=0,u=t.length;s<u;s++)this.edgesByteArray[o]=i[t[s].source],this.edgesByteArray[o+1]=i[t[s].target],this.edgesByteArray[o+2]=t[s].weight||0,o+=this.ppe},Supervisor.prototype.applyLayoutChanges=function(e){var t=this.graph.nodes(),n=0,r;for(var i=0,s=this.nodesByteArray.length;i<s;i+=this.ppn)e?(t[n].fa2_x=this.nodesByteArray[i],t[n].fa2_y=this.nodesByteArray[i+1]):(t[n].x=this.nodesByteArray[i],t[n].y=this.nodesByteArray[i+1]),n++},Supervisor.prototype.sendByteArrayToWorker=function(e){var t={action:e||"loop",nodes:this.nodesByteArray.buffer},n=[this.nodesByteArray.buffer];e==="start"&&(t.config=this.config||{},t.edges=this.edgesByteArray.buffer,n.push(this.edgesByteArray.buffer)),this.shouldUseWorker?this.worker.postMessage(t,n):_root.postMessage(t,"*")},Supervisor.prototype.start=function(){if(this.running)return;this.running=!0,this.started?this.sendByteArrayToWorker():(this.sendByteArrayToWorker("start"),this.started=!0,eventEmitter.dispatchEvent("start"))},Supervisor.prototype.stop=function(){if(!this.running)return;this.running=!1,eventEmitter.dispatchEvent("stop")},Supervisor.prototype.initWorker=function(){var _this=this,workerFn=sigma.layouts.getForceLinkWorker();if(this.shouldUseWorker){if(!this.workerUrl){var blob=this.makeBlob(workerFn);this.worker=new Worker(URL.createObjectURL(blob))}else this.worker=new Worker(this.workerUrl);this.worker.postMessage=this.worker.webkitPostMessage||this.worker.postMessage}else eval(workerFn);this.msgName=this.worker?"message":"newCoords",this.listener=function(e){_this.nodesByteArray=new Float32Array(e.data.nodes),_this.running&&(_this.applyLayoutChanges(_this.runOnBackground),_this.sendByteArrayToWorker(),_this.runOnBackground||_this.sigInst.refresh({skipIndexation:!0})),e.data.converged&&(_this.running=!1),_this.running||(_this.killWorker(),_this.runOnBackground&&_this.easing?(_this.applyLayoutChanges(!0),eventEmitter.dispatchEvent("interpolate"),sigma.plugins.animate(_this.sigInst,{x:"fa2_x",y:"fa2_y"},{easing:_this.easing,onComplete:function(){_this.sigInst.refresh(),eventEmitter.dispatchEvent("stop")}})):(_this.applyLayoutChanges(!1),_this.sigInst.refresh(),eventEmitter.dispatchEvent("stop")))},(this.worker||document).addEventListener(this.msgName,this.listener),this.graphToByteArrays(),_this.sigInst.bind("kill",function(){sigma.layouts.killForceLink()})},Supervisor.prototype.killWorker=function(){this.worker?this.worker.terminate():(_root.postMessage({action:"kill"},"*"),document.removeEventListener(this.msgName,this.listener))},Supervisor.prototype.configure=function(e){this.config=e,this.shouldUseWorker=e.worker===!1?!1:webWorkers,this.workerUrl=e.workerUrl,this.runOnBackground=e.background?!0:!1,this.easing=e.easing;switch(e.randomize){case"globally":this.randomize=function(t){return Math.random()*(e.randomizeFactor||1)};break;case"locally":this.randomize=function(t){return t+Math.random()*(e.randomizeFactor||1)};break;default:this.randomize=function(e){return e}}if(!this.started)return;var t={action:"config",config:this.config};this.shouldUseWorker?this.worker.postMessage(t):_root.postMessage(t,"*")};var supervisor=null;sigma.layouts.startForceLink=function(e,t){return supervisor?supervisor.running||(supervisor.killWorker(),supervisor.initWorker(),supervisor.started=!1):supervisor=new Supervisor(e,t),t&&supervisor.configure(t),supervisor.start(),eventEmitter},sigma.layouts.stopForceLink=function(){if(!supervisor)return;return supervisor.stop(),supervisor},sigma.layouts.killForceLink=function(){if(!supervisor)return;supervisor.stop(),supervisor.killWorker(),supervisor=null,eventEmitter={},sigma.classes.dispatcher.extend(eventEmitter)},sigma.layouts.configForceLink=function(e,t){return supervisor?supervisor.running||(supervisor.killWorker(),supervisor.initWorker(),supervisor.started=!1):supervisor=new Supervisor(e,t),supervisor.configure(t),eventEmitter},sigma.layouts.isForceLinkRunning=function(){return!!supervisor&&supervisor.running}}.call(this),function(e){"use strict";function a(){n=Object.create(null),r=Object.create(null),i=0,s=0}function f(){t!==null&&u&&t.dispatchEvent("activeNodes")}function l(){t!==null&&u&&t.dispatchEvent("activeEdges")}function c(e){t=this,o=e.graph,n===null&&(n=Object.create(null),i=0,o.nodes().forEach(function(e){e.active&&(n[e.id]=e,i++)})),r===null&&(r=Object.create(null),s=0,o.edges().forEach(function(e){e.active&&(r[e.id]=e,s++)})),sigma.classes.dispatcher.extend(this),e.bind("kill",function(){t.kill()})}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var t=null,n,r,i,s,o=null,u=!0;a(),sigma.classes.graph.attach("addNode","sigma.plugins.activeState.addNode",function(e){e.active&&(n[e.id]=this.nodesIndex[e.id],i++,f())}),sigma.classes.graph.attach("addEdge","sigma.plugins.activeState.addEdge",function(e){e.active&&(r[e.id]=this.edgesIndex[e.id],l())}),sigma.classes.graph.attachBefore("dropNode","sigma.plugins.activeState.dropNode",function(t){this.nodesIndex[t]!==e&&this.nodesIndex[t].active&&(delete n[t],i--,f())}),sigma.classes.graph.attachBefore("dropEdge","sigma.plugins.activeState.dropEdge",function(t){this.edgesIndex[t]!==e&&this.edgesIndex[t].active&&(delete r[t],s--,l())}),sigma.classes.graph.attachBefore("clear","sigma.plugins.activeState.clear",a),c.prototype.kill=function(){this.unbind(),n=null,r=null,i=0,s=0,o=null,t=null},c.prototype.addNodes=function(e){var t=i,r;arguments.length||o.nodes().forEach(function(e){e.hidden||(e.active=!0,n[e.id]=e)});if(arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if(typeof e=="string"||typeof e=="number")r=o.nodes(e),r.hidden||(r.active=!0,n[e]=r);else if(Array.isArray(e)){var s,u,a=[];for(s=0,u=e.length;s<u;s++){if(typeof e[s]!="string"&&typeof e[s]!="number")throw new TypeError("Invalid argument: a node id is not a string or a number, was "+e[s]);r=o.nodes(e[s]),r.hidden||(r.active=!0,n[e[s]]=r)}}return i=Object.keys(n).length,t!=i&&f(),this},c.prototype.addEdges=function(e){var t=s,n;arguments.length||o.edges().forEach(function(e){e.hidden||(e.active=!0,r[e.id]=e)});if(arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if(typeof e=="string"||typeof e=="number")n=o.edges(e),n.hidden||(n.active=!0,r[e]=n);else if(Array.isArray(e)){var i,u,a=[];for(i=0,u=e.length;i<u;i++){if(typeof e[i]!="string"&&typeof e[i]!="number")throw new TypeError("Invalid argument: an edge id is not a string or a number, was "+e[i]);n=o.edges(e[i]),n.hidden||(n.active=!0,r[e[i]]=n)}}return s=Object.keys(r).length,t!=s&&l(),this},c.prototype.dropNodes=function(e){var t=i;arguments.length||o.nodes().forEach(function(e){e.active=!1,delete n[e.id]});if(arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if(typeof e=="string"||typeof e=="number")o.nodes(e).active=!1,delete n[e];else if(Array.isArray(e)){var r,s;for(r=0,s=e.length;r<s;r++){if(typeof e[r]!="string"&&typeof e[r]!="number")throw new TypeError("Invalid argument: a node id is not a string or a number, was "+e[r]);o.nodes(e[r]).active=!1,delete n[e[r]]}}return i=Object.keys(n).length,t!=i&&f(),this},c.prototype.dropEdges=function(e){var t=s;arguments.length||o.edges().forEach(function(e){e.active=!1,delete r[e.id]});if(arguments.length>1)throw new TypeError("Too many arguments. Use an array instead.");if(typeof e=="string"||typeof e=="number")o.edges(e).active=!1,delete r[e];else if(Array.isArray(e)){var n,i;for(n=0,i=e.length;n<i;n++){if(typeof e[n]!="string"&&typeof e[n]!="number")throw new TypeError("Invalid argument: an edge id is not a string or a number, was "+e[n]);o.edges(e[n]).active=!1,delete r[e[n]]}}return s=Object.keys(r).length,t!=s&&l(),this},c.prototype.addNeighbors=function(){if("adjacentNodes"in o){var e,t;e=Object.keys(n);if(e.length){for(t in n)o.adjacentNodes(t).forEach(function(t){t.hidden||e.push(t.id)});u=!1,this.dropNodes().dropEdges(),u=!0,this.addNodes(e)}return this}throw new Error("Missing method graph.adjacentNodes")},c.prototype.setNodesBy=function(e){var t=[];return o.nodes().forEach(function(n){e.call(o,n)&&(n.hidden||t.push(n.id))}),u=!1,this.dropNodes(),u=!0,this.addNodes(t),this},c.prototype.setEdgesBy=function(e){var t=[];return o.edges().forEach(function(n){e.call(o,n)&&(n.hidden||t.push(n.id))}),u=!1,this.dropEdges(),u=!0,this.addEdges(t),this},c.prototype.invertNodes=function(){var e=o.nodes().filter(function(e){return!e.hidden&&!e.active}).map(function(e){return e.id});return u=!1,this.dropNodes(),u=!0,e.length?this.addNodes(e):f(),this},c.prototype.invertEdges=function(){var e=o.edges().filter(function(e){return!e.hidden&&!e.active}).map(function(e){return e.id});return u=!1,this.dropEdges(),u=!0,e.length?this.addEdges(e):l(),this},c.prototype.nodes=function(){var e,t=[];for(e in n)t.push(n[e]);return t},c.prototype.edges=function(){var e,t=[];for(e in r)t.push(r[e]);return t},sigma.plugins.activeState=function(e){return t||(t=new c(e)),t},sigma.plugins.killActiveState=function(){t instanceof c&&(t.kill(),t=null)}}.call(this),function(){"use strict";function e(e,t,n){function b(e){var t=window.getComputedStyle(e),n=function(e){return parseInt(t.getPropertyValue(e).replace("px",""))||0};return{left:e.getBoundingClientRect().left+n("padding-left"),top:e.getBoundingClientRect().top+n("padding-top")}}function w(e){d=!1,o.removeEventListener("mousemove",N),o.removeEventListener("mouseup",T),h.length?setTimeout(function(){l=h[h.length-1],a.addEventListener("mousedown",x)},0):l=null}function E(e){if(e.data.enter.nodes.length==0)return;var t=e.data.enter.nodes[0];if(p[t.id])return;h.push(t),p[t.id]=!0,d||(l=h[h.length-1],a.addEventListener("mousedown",x))}function S(e){if(e.data.leave.nodes.length==0)return;var t=e.data.leave.nodes[0],n=h.map(function(e){return e}).indexOf(t);h.splice(n,1),delete p[t.id],h.length&&!d?l=h[h.length-1]:a.removeEventListener("mousedown",x)}function x(e){if(!y||e.which==3)return;d=!0,l&&i
.graph.nodes().length>0&&(g=!0,a.removeEventListener("mousedown",x),o.addEventListener("mousemove",N),o.addEventListener("mouseup",T),u.settings({mouseEnabled:!1,enableHovering:!1}),r.dispatchEvent("startdrag",{node:l,captor:e,renderer:u}))}function T(e){d=!1,a.addEventListener("mousedown",x),o.removeEventListener("mousemove",N),o.removeEventListener("mouseup",T),u.settings({mouseEnabled:!0,enableHovering:!0});if(m){r.dispatchEvent("drop",{node:l,captor:e,renderer:u});if(s){var t=s.nodes();for(var n=0;n<t.length;n++)delete t[n].alphaX,delete t[n].alphaY}i.refresh()}r.dispatchEvent("dragend",{node:l,captor:e,renderer:u}),m=!1,l=null}function N(e){function n(){var t=b(u.container),n=e.clientX-t.left,o=e.clientY-t.top,a=Math.cos(u.camera.angle),h=Math.sin(u.camera.angle),p=i.graph.nodes(),d=[],v,w,E,S,x,T,N;if(!y||p.length<2)return;N=sigma.utils.getDistance(n,o,l[f+"x"],l[f+"y"]);if(g&&N<l[f+"size"])return;g=!1;for(var C=0;;C++){if(!y)break;S=p[C],S&&(x={x:S.x*a+S.y*h,y:S.y*a-S.x*h,renX:S[f+"x"],renY:S[f+"y"]},d.push(x));if(C==p.length-1)break;if(C>0){if(d[0].x!=d[1].x&&d[0].y!=d[1].y)break;d.pop()}}var k=d[0],L=d[1],A=L.renX-k.renX;A===0&&(A=1);var O=L.renY-k.renY;O===0&&(O=1),n=(n-k.renX)/A*(L.x-k.x)+k.x,o=(o-k.renY)/O*(L.y-k.y)+k.y,v=n*a-o*h,w=o*a+n*h;if(s){E=s.nodes(),T=-1<E.map(function(e){return e.id}).indexOf(l.id);if(T)for(var C=0;C<E.length;C++){c!=l&&(E[C].alphaX=null,E[C].alphaY=null);if(!E[C].alphaX||!E[C].alphaY)E[C].alphaX=E[C].x-n,E[C].alphaY=E[C].y-o;E[C].x=l.x+E[C].alphaX,E[C].y=l.y+E[C].alphaY}}l.x=v,l.y=w,i.refresh({skipIndexation:!0}),m=!0,r.dispatchEvent("drag",{node:l,captor:e,renderer:u}),c=l}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){clearTimeout(t);var t=setTimeout(n,0)}else n()}sigma.classes.dispatcher.extend(this);if(sigma.renderers.webgl&&t instanceof sigma.renderers.webgl)throw new Error("The sigma.plugins.dragNodes is not compatible with the WebGL renderer");var r=this,i=e,s=n,o=document.body,u=t,a=t.container.lastChild,f=t.options.prefix,l=null,c=null,h=[],p={},d=!1,v=!1,m=!1,g=!0,y=!0;t instanceof sigma.renderers.svg&&(a=t.container.firstChild),t.bind("hovers",E),t.bind("hovers",S),t.bind("click",w),this.enable=function(){y=!0},this.disable=function(){y=!1,l=null,c=null,h=[],p={},d=!1,v=!1,m=!1,g=!0},this.unbindAll=function(){a.removeEventListener("mousedown",x),o.removeEventListener("mousemove",N),o.removeEventListener("mouseup",T),u.unbind("hovers",E),u.unbind("hovers",S)}}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t={};sigma.plugins.dragNodes=function(n,r,i){return t[n.id]||(t[n.id]=new e(n,r,i)),n.bind("kill",function(){sigma.plugins.killDragNodes(n)}),n.bind("animate.start",function(){t[n.id].disable()}),n.bind("animate.end",function(){t[n.id].enable()}),t[n.id]},sigma.plugins.killDragNodes=function(n){t[n.id]instanceof e&&(t[n.id].unbindAll(),delete t[n.id])}}.call(window),function(undefined){"use strict";function deepCopy(o){var copy=Object.create(null);for(var i in o)typeof o[i]=="object"&&o[i]!==null?copy[i]=deepCopy(o[i]):typeof o[i]=="function"&&o[i]!==null?eval(" copy[i] = "+o[i].toString()):copy[i]=o[i];return copy}function cloneChain(e){var t=e.slice(0);for(var n=0,r=t.length;n<r;n++)t[n]=deepCopy(t[n]);return t}function strToObjectRef(e,t){return t.split(".").reduce(function(e,t){return e[t]},e)}function Filter(s){function register(e,t,n,r){arguments[3]===undefined&&typeof arguments[2]!="object"&&(r=n,n=null);if(r!==undefined&&typeof r!="number"&&typeof r!="string")throw new TypeError('Invalid argument: "key" is not a number or a string, was '+r);if(r!==undefined&&typeof r=="string"&&!r.length)throw new TypeError('Invalid argument: "key" is an empty string.');if(typeof e!="string")throw new TypeError('Invalid argument: "processor" is not a string, was '+e);if("undo"===r)throw new Error('Invalid argument: "key" has value "undo", which is a reserved keyword.');if(_keysIndex[r])throw new Error('Invalid argument: the filter of key "'+r+'" already exists.');r&&(_keysIndex[r]=!0),_chain.push({key:r,processor:e,predicate:t,options:n||{}})}function unregister(e){_chain=_chain.filter(function(t){return!(t.key in e)});for(var t in e)delete _keysIndex[t]}var _self=this,_s=s,_g=s.graph,_chain=[],_keysIndex=Object.create(null);this.has=function(e){return _keysIndex[e]},this.nodesBy=function(e,t,n){return register("nodes",e,t,n),this},this.edgesBy=function(e,t,n){return register("edges",e,t,n),this},this.neighborsOf=function(e,t,n){if(typeof e!="number"&&typeof e!="string")throw new TypeError("Invalid argument: id is not a string or a number, was "+e);if(typeof e=="string"&&!e.length)throw new TypeError("Invalid argument: id is an empty string.");return register("neighbors",e,t,n),this},this.apply=function(){for(var e=0,t=_chain.length;e<t;++e)switch(_chain[e].processor){case"nodes":Processors.nodes(_g,_chain[e].predicate,_chain[e].options);break;case"edges":Processors.edges(_g,_chain[e].predicate,_chain[e].options);break;case"neighbors":Processors.neighbors(_g,_chain[e].predicate);break;case"undo":Processors.undo(_g,_chain[e].predicate);break;default:throw new Error("Unknown processor "+_chain[e].processor)}return _chain[0]&&"undo"===_chain[0].key&&_chain.shift(),_s&&_s.refresh(),this},this.undo=function(e){var t=Object.create(null),n=arguments.length;if(n===1)if(Object.prototype.toString.call(e)==="[object Array]")for(var r=0,i=e.length;r<i;r++)t[e[r]]=!0;else t[e]=!0;else if(n>1)for(var r=0;r<n;r++)t[arguments[r]]=!0;else this.clear();return unregister(t),_chain.unshift({key:"undo",processor:"undo"}),this},this.clear=function(){return _chain.length=0,_keysIndex=Object.create(null),this},this.kill=function(){return this.clear(),delete _instance[_s.id],_g=null,_s=null,this},this.serialize=function(){var e=cloneChain(_chain);for(var t=0,n=e.length;t<n;t++)e[t].predicate=e[t].predicate.toString().replace(/\s+/g," ").replace(/"use strict"; /,"");return e},this.load=function(chain){if(chain===undefined)throw new TypeError("Missing argument.");if(!Array.isArray(chain))throw new TypeError('Invalid argument: "chain" is not an array, was '+chain);this.clear();var copy=cloneChain(chain);for(var i=0,len=copy.length;i<len;i++){if(copy[i].predicate===undefined)throw new TypeError('Missing filter key: "predicate".');if(copy[i].processor===undefined)throw new TypeError('Missing filter key: "processor".');if(copy[i].key!=undefined&&typeof copy[i].key!="string")throw new TypeError('Invalid filter key: "key" is not a string, was '+copy[i].key.toString());typeof copy[i].predicate=="string"&&eval(" copy[i].predicate = "+copy[i].predicate);if(typeof copy[i].predicate!="function")throw new TypeError('Invalid filter key: "predicate" of key "'+copy[i].key+'" is not a function.');if(typeof copy[i].processor!="string")throw new TypeError('Invalid filter key: "processor" of key "'+copy[i].key+'" is not a string.');copy[i].key&&(_keysIndex[copy[i].key]=!0)}return _chain=copy,this}}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var _instance={};sigma.classes.graph.hasMethod("adjacentNodes")||sigma.classes.graph.addMethod("adjacentNodes",function(e){if(typeof e!="number"&&typeof e!="string")throw new TypeError('Invalid argument: "id" is not a string or a number, was '+e);var t,n=[];for(t in this.allNeighborsIndex[e])n.push(this.nodesIndex[t]);return n}),sigma.classes.graph.hasMethod("adjacentEdges")||sigma.classes.graph.addMethod("adjacentEdges",function(e){if(typeof e!="number"&&typeof e!="string")throw new TypeError('Invalid argument: "id" is not a string or a number, was '+e);var t=this.allNeighborsIndex[e],n,r,i=[];for(r in t)for(n in t[r])i.push(t[r][n]);return i});var Processors={};Processors.nodes=function(e,t,n){if(!e)return;var r=e.nodes(),i=r.length,s=e.edges(),o=s.length;while(i--)r[i].hidden=!t.call({graph:e,get:strToObjectRef},r[i],n)||r[i].hidden;while(o--)if(e.nodes(s[o].source).hidden||e.nodes(s[o].target).hidden)s[o].hidden=!0},Processors.edges=function(e,t,n){if(!e)return;var r=e.edges(),i=r.length;while(i--)r[i].hidden=!t.call({graph:e,get:strToObjectRef},r[i],n)||r[i].hidden},Processors.neighbors=function(e,t){if(!e)return;var n=e.nodes(),r=n.length,i=e.edges(),s=i.length,o=e.adjacentNodes(t),u=o.length,a={};while(u--)a[o[u].id]=!0;while(r--)n[r].id!==t&&!(n[r].id in a)&&(n[r].hidden=!0);while(s--)if(e.nodes(i[s].source).hidden||e.nodes(i[s].target).hidden)i[s].hidden=!0},Processors.undo=function(e){if(!e)return;var t=e.nodes(),n=t.length,r=e.edges(),i=r.length;while(n--)t[n].hidden=!1;while(i--)r[i].hidden=!1},sigma.plugins.filter=function(e){return _instance[e.id]||(_instance[e.id]=new Filter(e),e.bind("kill",function(){sigma.plugins.killFilter(e)})),_instance[e.id]},sigma.plugins.killFilter=function(e){_instance[e.id]instanceof Filter&&_instance[e.id].kill(),delete _instance[e.id]}}.call(this),function(e){"use strict";function r(n,r,i){sigma.classes.dispatcher.extend(this);if(sigma.renderers.webgl&&r instanceof sigma.renderers.webgl)throw new Error("The sigma.plugins.lasso is not compatible with the WebGL renderer");this.sigmaInstance=n,this.renderer=r,this.drawingCanvas=e,this.drawingContext=e,this.drewPoints=[],this.selectedNodes=[],this.isActive=!1,this.isDrawing=!1,t=document.body,this.settings=new sigma.classes.configurable({strokeStyle:"black",lineWidth:2,fillWhileDrawing:!1,fillStyle:"rgba(200, 200, 200, 0.25)",cursor:"crosshair"},i||{})}function o(e){var t=this.drawingCanvas.getBoundingClientRect();this.isActive&&(this.isDrawing=!0,this.drewPoints=[],this.selectedNodes=[],this.sigmaInstance.refresh(),this.drewPoints.push({x:e.clientX-t.left,y:e.clientY-t.top}),this.drawingCanvas.style.cursor=this.settings("cursor"),e.stopPropagation())}function u(e){if(this.isActive&&this.isDrawing){var t=0,n=0,r=this.drawingCanvas.getBoundingClientRect();switch(e.type){case"touchmove":t=e.touches[0].clientX,n=e.touches[0].clientY;break;default:t=e.clientX,n=e.clientY}this.drewPoints.push({x:t-r.left,y:n-r.top}),this.drawingContext.lineWidth=this.settings("lineWidth"),this.drawingContext.strokeStyle=this.settings("strokeStyle"),this.drawingContext.fillStyle=this.settings("fillStyle"),this.drawingContext.lineJoin="round",this.drawingContext.lineCap="round",this.drawingContext.clearRect(0,0,this.drawingContext.canvas.width,this.drawingContext.canvas.height);var i=this.drewPoints[0],s=this.drewPoints[1],o=this.drewPoints.length,u=function(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}};this.drawingContext.beginPath(),this.drawingContext.moveTo(i.x,i.y);for(var a=1;a<o;a++){var f=u(i,s);this.drawingContext.quadraticCurveTo(i.x,i.y,f.x,f.y),i=this.drewPoints[a],s=this.drewPoints[a+1]}this.drawingContext.lineTo(i.x,i.y),this.drawingContext.stroke(),this.settings("fillWhileDrawing")&&this.drawingContext.fill(),e.stopPropagation()}}function a(e){if(this.isActive&&this.isDrawing){this.isDrawing=!1;var t=this.renderer.nodesOnScreen,n=t.length,r=0,i=this.renderer.options.prefix||"";while(n--){var s=t[n],o=s[i+"x"],u=s[i+"y"];this.drawingContext.isPointInPath(o,u)&&!s.hidden&&this.selectedNodes.push(s)}this.dispatchEvent("selectedNodes",this.selectedNodes),this.drawingContext.clearRect(0,0,this.drawingCanvas.width,this.drawingCanvas.height),this.drawingCanvas.style.cursor=this.settings("cursor"),e.stopPropagation()}}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t=e,n={};r.prototype.clear=function(){return this.deactivate(),this.sigmaInstance=e,this.renderer=e,this},r.prototype.activate=function(){return this.sigmaInstance&&!this.isActive&&(this.isActive=!0,this.renderer.domElements.lasso||(this.renderer.initDOM("canvas","lasso"),this.drawingCanvas=this.renderer.domElements.lasso,this.drawingCanvas.width=this.renderer.container.offsetWidth,this.drawingCanvas.height=this.renderer.container.offsetHeight,this.renderer.container.appendChild(this.drawingCanvas),this.drawingContext=this.drawingCanvas.getContext("2d"),this.drawingCanvas.style.cursor=this.settings("cursor")),i.apply(this)),this},r.prototype.deactivate=function(){return this.sigmaInstance&&this.isActive&&(this.isActive=!1,this.isDrawing=!1,s.apply(this),this.renderer.domElements.lasso&&(this.renderer.container.removeChild(this.renderer.domElements.lasso),delete this.renderer.domElements.lasso,this.drawingCanvas.style.cursor="",this.drawingCanvas=e,this.drawingContext=e,this.drewPoints=[])),this};var i=function(){this.drawingCanvas.addEventListener("mousedown",o.bind(this)),t.addEventListener("mousemove",u.bind(this)),t.addEventListener("mouseup",a.bind(this)),this.drawingCanvas.addEventListener("touchstart",o.bind(this)),t.addEventListener("touchmove",u.bind(this)),t.addEventListener("touchcancel",a.bind(this)),t.addEventListener("touchleave",a.bind(this)),t.addEventListener("touchend",a.bind(this))},s=function(){this.drawingCanvas.removeEventListener("mousedown",o.bind(this)),t.removeEventListener("mousemove",u.bind(this)),t.removeEventListener("mouseup",a.bind(this)),this.drawingCanvas.removeEventListener("touchstart",o.bind(this)),this.drawingCanvas.removeEventListener("touchmove",u.bind(this)),t.removeEventListener("touchcancel",a.bind(this)),t.removeEventListener("touchleave",a.bind(this)),t.removeEventListener("touchend",a.bind(this))};r.prototype.getSelectedNodes=function(){return this.selectedNodes},sigma.plugins.lasso=function(e,t,i){return n[e.id]||(n[e.id]=new r(e,t,i)),e.bind("kill",function(){n[e.id]instanceof r&&(n[e.id].clear(),delete n[e.id])}),n[e.id]}}.call(this),function(){"use strict";function n(e){var t=e.settings("autoRescale");return t?Array.isArray(t)?t.indexOf("nodePosition")!==-1:!0:!1}function r(e,t){var n,r,i=-Infinity,s=Infinity,o=Infinity,u=-Infinity,a=-Infinity;for(n=0,r=e.length;n<r;n++)i=Math.max(e[n][t+"size"],i),u=Math.max(e[n][t+"x"],u),s=Math.min(e[n][t+"x"],s),a=Math.max(e[n][t+"y"],a),o=Math.min(e[n][t+"y"],o);return i=i||1,{sizeMax:i,minX:s,minY:o,maxX:u,maxY:a}}function i(t,i){function o(e){var t,r,i,o,u,a,f;t=(e.minX+e.maxX)*.5,r=(e.minY+e.maxY)*.5;if(n(s.s)){var l,c,h,p,d;d=s.s.camera.getRectangle(e.maxX-e.minX,e.maxY-e.minY),o=d.x2-d.x1||1,u=d.height||1,l=sigma.utils.getBoundaries(s.s.graph,s.s.camera.readPrefix),c=s.s.camera.getRectangle(l.maxX-l.minX,l.maxY-l.minY),h=c.x2-c.x1||1,p=c.height||1,a=h-s.settings.padding.left-s.settings.padding.right,f=p-s.settings.padding.top-s.settings.padding.bottom,i=Math.max(o/a,u/f)}else o=e.maxX-e.minX+e.sizeMax*2,u=e.maxY-e.minY+e.sizeMax*2,a=s.s.renderers[0].width-s.settings.padding.left-s.settings.padding.right,f=s.s.renderers[0].height-s.settings.padding.top-s.settings.padding.bottom,i=Math.max(o/a,u/f);return i=Math.max(s.s.settings("zoomMin"),Math.min(s.s.settings("zoomMax"),i)),t+=(s.settings.padding.right-s.settings.padding.left)*i*.5,r+=(s.settings.padding.bottom-s.settings.padding.top)*i*.5,{x:t,y:r,ratio:i}}var s=this;this.s=t,this.settings=sigma.utils.extend(i,e),this.settings.zoomDef=this.settings.zoomDef||this.s.settings("zoomMax"),this.s.bind("kill",function(){sigma.plugins.killLocate(s.s)}),this.nodes=function(e,i){if(arguments.length<1)throw new TypeError("Too few arguments.");if(arguments.length===3&&typeof i!="object")throw new TypeError('Invalid argument: "options" is not an object, was '+i);var u,a,f=sigma.utils.extend(i,s.settings.animation.node),l=s.s.camera.ratio,c=n(s.s);if(typeof e=="string"||typeof e=="number"){a=s.s.graph.nodes(e);if(a===undefined)throw new Error('Invalid argument: the node of id "'+e+'" does not exist.');u={x:a[s.s.camera.readPrefix+"x"],y:a[s.s.camera.readPrefix+"y"],ratio:c?s.s.settings("zoomMin"):s.settings.zoomDef}}else{if(!Array.isArray(e))throw new TypeError('Invalid argument: "v" is not a string, a number, or an array, was '+e);var h=r(e.map(function(e){return s.s.graph.nodes(e)}),s.s.camera.readPrefix);u=o(h)}return s.settings.focusOut&&c?sigma.misc.animation.camera(t.camera,{x:(s.s.camera.x+u.x)*.5,y:(s.s.camera.y+u.y)*.5,ratio:s.settings.zoomDef},{duration:f.duration,onComplete:function(){sigma.misc.animation.camera(s.s.camera,u,f)}}):sigma.misc.animation.camera(s.s.camera,u,f),s},this.edges=function(e,i){if(arguments.length<1)throw new TypeError("Too few arguments.");if(arguments.length===3&&typeof i!="object")throw new TypeError('Invalid argument: "options" is not an object, was '+i);var u,a,f,l=sigma.utils.extend(i,s.settings.animation.edge),c=s.s.camera.ratio,h=n(s.s);if(typeof e=="string"||typeof e=="number"){a=s.s.graph.edges(e);if(a===undefined)throw new Error('Invalid argument: the edge of id "'+e+'" does not exist.');f=r([s.s.graph.nodes(a.source),s.s.graph.nodes(a.target)],s.s.camera.readPrefix),u=o(f)}else{if(!Array.isArray(e))throw new TypeError('Invalid argument: "v" is not a string or a number, or an array, was '+e);var p,d,v=[];for(p=0,d=e.length;p<d;p++)a=s.s.graph.edges(e[p]),v.push(s.s.graph.nodes(a.source)),v.push(s.s.graph.nodes(a.target));f=r(v,s.s.camera.readPrefix),u=o(f)}return s.settings.focusOut&&h?sigma.misc.animation.camera(t.camera,{x:(s.s.camera.x+u.x)*.5,y:(s.s.camera.y+u.y)*.5,ratio:s.settings.zoomDef},{duration:l.duration,onComplete:function(){sigma.misc.animation.camera(s.s.camera,u,l)}}):sigma.misc.animation.camera(s.s.camera,u,l),s},this.center=function(e,t){var n=sigma.utils.extend(t,s.settings.animation.center);return s.s.graph.nodes().length?s.nodes(s.s.graph.nodes().map(function(e){return e.id}),n):sigma.misc.animation.camera(s.s.camera,{x:0,y:0,ratio:e},n),s},this.setPadding=function(e){return s.settings.padding=sigma.utils.extend(e,s.settings.padding),s},this.kill=function(){s.settings=null,s.s=null}}if(typeof sigma=="undefined")throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var e={animation:{node:{duration:300},edge:{duration:300},center:{duration:300}},padding:{top:0,right:0,bottom:0,left:0},focusOut:!1,zoomDef:null},t={};sigma.plugins.locate=function(e,n){return t[e.id]||(t[e.id]=new i(e,n)),t[e.id]},sigma.plugins.killLocate=function(e){t[e.id]instanceof i&&t[e.id].kill(),delete t[e.id]}}.call(window),function(e){"use strict";function o(e,t){var n=e?e.length:0;if(!n)return[];var r=-1,i=[],s=t.length;e:while(++r<n){var o=e[r];if(o===o){var u=s;while(u--)if(t[u]===o)continue e;i.push(o)}else t.indexOf(o)<0&&i.push(o)}return i}function u(e){i=e.which===32,n.removeEventListener("keydown",u,!1),n.addEventListener("keyup",a,!1)}function a(e){i=!1,n.addEventListener("keydown",u,!1),n.removeEventListener("keyup",a,!1)}function f(e,t,a){function d(){t.dropEdges(),t.nodes().length===e.graph.nodes().length?t.dropNodes():t.addNodes(),e.refresh({skipIndexation:!0})}function v(){c++}function m(){c=0,l.container.lastChild.addEventListener("mousemove",v)}function g(){setTimeout(function(){c=0;var e=t.nodes()[0];e&&r===null&&(r=e.id)},1),l.container.lastChild.removeEventListener("mousemove",v)}function y(){t.dropEdges(),t.dropNodes(),e.refresh({skipIndexation:!0})}function b(){var n=t.nodes().map(function(e){return e.id}),r=t.edges().map(function(e){return e.id});t.dropEdges(r),t.dropNodes(n),n.length==e.graph.nodes().length?e.graph.clear():(e.graph.dropEdges(r),e.graph.dropNodes(n)),e.refresh()}function w(){t.addNeighbors(),e.refresh({skipIndexation:!0})}function E(){t.dropEdges(),t.setNodesBy(function(t){return e.graph.degree(t.id)===0}),e.refresh({skipIndexation:!0})}function S(){t.dropEdges(),t.setNodesBy(function(t){return e.graph.adjacentNodes(t.id).length===1}),e.refresh({skipIndexation:!0})}function x(e){var n=e.data;n.length?(t.dropEdges(),t.addNodes(n.map(function(e){return e.id})),r=t.nodes()[0].id):(t.dropNodes(),r=null)}var f=this,l=a||e.renderers[0],c=0,h=null,p=null;n=n||document.getElementsByTagName("body")[0],l.container.lastChild.addEventListener("mousedown",m),l.container.lastChild.addEventListener("mouseup",g),this.init=function(){var e=t.nodes();e.length&&(r=e[0].id)},this.clickNodesHandler=function(n){if(c>1)return;var u=n.data.node.map(function(e){return e.id}),a=t.nodes().map(function(e){return e.id}),f=o(u,a);t.dropEdges();if(i){var l=o(u,f);t.dropNodes(l)}else{a.length>1&&t.addNodes(u);var h=t.nodes()[0];h!=null&&(r===h.id?f.length?(t.dropNodes(),r=null):setTimeout(function(){s||(t.dropNodes(),r=null,e.refresh({skipIndexation:!0}))},e.settings("doubleClickTimeout")):r=h.id)}t.addNodes(f),e.refresh({skipIndexation:!0})},this.doubleClickNodesHandler=function(t){s=!0,setTimeout(function(){s=!1},100+e.settings("doubleClickTimeout"))},this.clickEdgesHandler=function(n){if(c>1)return;var r=n.data.edge.map(function(e){return e.id}),s=t.edges().map(function(e){return e.id}),u=o(r,s);t.dropNodes();if(i){var a=o(r,u);t.dropEdges(a)}else t.dropEdges(),s.length>1&&t.addEdges(r);t.addEdges(u),e.refresh({skipIndexation:!0})},e.bind("clickNodes",this.clickNodesHandler),e.bind("doubleClickNodes",this.doubleClickNodesHandler),e.bind("clickEdges",this.clickEdgesHandler),n.addEventListener("keydown",u,!1),this.bindKeyboard=function(e){if(!e)throw new Error('Missing argument: "keyboard"');return h=e,h.bind("32+65 18+32+65",d),h.bind("32+85 18+32+85",y),h.bind("32+46 18+32+46",b),h.bind("32+69 18+32+69",w),h.bind("32+73 18+32+73",E),h.bind("32+76 18+32+76",S),this},this.unbindKeyboard=function(){return h&&(h.unbind("32+65 18+32+65",d),h.unbind("32+85 18+32+85",y),h.unbind("32+46 18+32+46",b),h.unbind("32+69 18+32+69",w),h.unbind("32+73 18+32+73",E),h.unbind("32+76 18+32+76",S),h=null),this},this.bindLasso=function(e){if(!e)throw new Error('Missing argument: "lassoInstance"');p=e,p.bind("selectedNodes",x)},this.unbindLasso=function(){p&&p.unbind("selectedNodes",x)},this.clear=function(){e.unbind("clickNodes",f.clickNodesHandler),e.unbind("doubleClickNodes",f.doubleClickNodesHandler),e.unbind("clickEdges",f.clickEdgesHandler),f.unbindKeyboard(),f.unbindLasso(),l.container.lastChild.removeEventListener("mousedown",m),l.container.lastChild.removeEventListener("mouseup",g),l.container.lastChild.removeEventListener("mousemove",v),l=null,h=null}}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t={},n=null,r=null,i=!1,s=!1;sigma.plugins.select=function(e,n,r){return t[e.id]||(t[e.id]=new f(e,n),e.bind("kill",function(){sigma.plugins.killSelect(e)})),t[e.id]},sigma.plugins.killSelect=function(e){t[e.id]instanceof f&&(t[e.id].clear(),delete t[e.id]),!t.length&&n&&(n.removeEventListener("keydown",u,!1),n.removeEventListener("keyup",a,!1),n=null)}}.call(this),function(e){"use strict";function t(e){return e*Math.PI/180}function n(e,t){return typeof e=="function"?e.call(t):e}function r(e){function C(e,t){if(e.draw&&e.x&&e.y&&e.radius>e.threshold){var n=e.x,r=e.y;switch(e.position){case"top-right":n+=e.nodeSize*T,r+=e.nodeSize*N;break;case"top-left":n+=e.nodeSize*S,r+=e.nodeSize*x;break;case"bottom-left":n+=e.nodeSize*w,r+=e.nodeSize*E;break;case"bottom-right":n+=e.nodeSize*y,r+=e.nodeSize*b}t.fillStyle=e.fillColor,e.strokeColor!==t.strokeStyle&&(t.strokeStyle=e.strokeColor),t.beginPath(),t.arc(n,r,e.radius,2*Math.PI,!1),t.closePath(),(!e.strokeIfText||e.radius>e.textThreshold)&&t.stroke(),t.fill();if(e.radius>e.textThreshold){var i=Math.round(e.fontScale*e.radius),s=e.fontStyle+" "+i+"px "+e.font;s!==t.font&&(t.font=s),t.fillStyle=e.textColor,t.fillText(e.content,n,r)}}}e=e||{};var r=e.font||this.settings("glyphFont"),i=e.fontStyle||this.settings("glyphFontStyle"),s=e.fontScale||this.settings("glyphFontScale"),o=e.strokeColor||this.settings("glyphStrokeColor"),u=e.lineWidth||this.settings("glyphLineWidth"),a=e.fillColor||this.settings("glyphFillColor"),f=e.scale||this.settings("glyphScale"),l=e.textColor||this.settings("glyphTextColor"),c=e.textThreshold||this.settings("glyphTextThreshold"),h="strokeIfText"in e?e.strokeIfText:this.settings("glyphStrokeIfText"),p=e.threshold||this.settings("glyphThreshold"),d="draw"in e?e.draw:this.settings("drawGlyphs");if(!d)return;this.domElements.glyphs||(this.initDOM("canvas","glyphs"),this.domElements.glyphs.width=this.container.offsetWidth,this.domElements.glyphs.height=this.container.offsetHeight,this.container.insertBefore(this.domElements.glyphs,this.domElements.glyphs.previousSibling)),this.drawingContext=this.domElements.glyphs.getContext("2d"),this.drawingContext.textAlign="center",this.drawingContext.textBaseline="middle",this.drawingContext.lineWidth=u,this.drawingContext.strokeStyle=o;var v=this,m=this.nodesOnScreen||[],g=this.options.prefix||"",y=Math.cos(t(45)),b=Math.sin(t(45)),w=Math.cos(t(135)),E=Math.sin(t(135)),S=Math.cos(t(225)),x=Math.sin(t(225)),T=Math.cos(t(315)),N=Math.sin(t(315)),k;m.forEach(function(e){e.glyphs&&e.glyphs.forEach(function(t){k=!e.hidden,k&&"draw"in t&&(k=t.draw),C({x:e[g+"x"],y:e[g+"y"],nodeSize:e[g+"size"]||0,position:t.position,radius:t.size||e[g+"size"]*f,content:(t.content||"").toString()||"",lineWidth:t.lineWidth||u,fillColor:n(t.fillColor,e)||a,textColor:n(t.textColor,e)||l,strokeColor:n(t.strokeColor,e)||o,strokeIfText:"strokeIfText"in t?t.strokeIfText:h,fontStyle:t.fontStyle||i,font:t.font||r,fontScale:t.fontScale||s,threshold:t.threshold||p,textThreshold:t.textThreshold||c,draw:k},v.drawingContext)})})}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.renderers.canvas.prototype.glyphs=r}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.def=function(e,t,n,r,i,s){function b(e,t,n,r,s,o,u){var a=Math.round(sigma.utils.canvas.getTextWidth(t,i("approximateLabelWidth"),n,s)+r+1.5+n/3),f=n+4;t.save(),t.beginPath(),t.translate(o,u),t.rotate(e),t.rect(-a/2,-f-r/2,a,f),t.closePath(),t.fill(),t.restore()}if(typeof e.label!="string"||t==n)return;var o=i("prefix")||"",u=e[o+"size"]||1;if(u<i("edgeLabelThreshold")&&!e.hover)return;if(0===i("edgeLabelSizePowRatio"))throw new Error('Invalid setting: "edgeLabelSizePowRatio" is equal to 0.');var a,f=0,l=e.hover?i("hoverFontStyle")||i("fontStyle"):i("fontStyle"),c=(t[o+"x"]+n[o+"x"])/2,h=(t[o+"y"]+n[o+"y"])/2,p,d,v;a=i("edgeLabelSize")==="fixed"?i("defaultEdgeLabelSize"):i("defaultEdgeLabelSize")*u*Math.pow(u,-1/i("edgeLabelSizePowRatio"));var m=[l,a+"px",i("font")].join(" ");e.active&&(m=[i("activeFontStyle")||i("fontStyle"),a+"px",i("activeFont")||i("font")].join(" ")),s&&s.ctx.font!=m?(r.font=m,s.ctx.font=m):r.font=m,r.textAlign="center",r.textBaseline="alphabetic";if("auto"===i("edgeLabelAlignment")){var g=sigma.utils.canvas.getTextWidth(r,i("approximateLabelWidth"),a,e.label),y=sigma.utils.getDistance(t[o+"x"],t[o+"y"],n[o+"x"],n[o+"y"]);y=y-t[o+"size"]-n[o+"size"]-10,g<y&&(p=n[o+"x"]-t[o+"x"],d=n[o+"y"]-t[o+"y"],v=t[o+"x"]<n[o+"x"]?1:-1,f=Math.atan2(d*v,p*v))}e.hover&&(r.fillStyle=i("edgeLabelHoverBGColor")==="edge"?e.color||i("defaultEdgeColor"):i("defaultEdgeHoverLabelBGColor"),i("edgeLabelHoverShadow")&&(r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=8,r.shadowColor=i("edgeLabelHoverShadowColor")),b(f,r,a,u,e.label,c,h),i("edgeLabelHoverShadow")&&(r.shadowBlur=0,r.shadowColor="#000")),e.active?r.fillStyle=i("edgeActiveColor")==="edge"?e.active_color||i("defaultEdgeActiveColor"):i("defaultEdgeLabelActiveColor"):r.fillStyle=i("edgeLabelColor")==="edge"?e.color||i("defaultEdgeColor"):i("defaultEdgeLabelColor"),r.translate(c,h),r.rotate(f),r.fillText(e.label,0,-u/2-3),r.rotate(-f),r.translate(-c,-h)}}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curve=function(e,t,n,r,i){function x(e,t,n,r,s,o,u){var a=Math.round(sigma.utils.canvas.getTextWidth(t,i("approximateLabelWidth"),n,s)+r+1.5+n/3),f=n+4;t.save(),t.beginPath(),t.translate(o,u),t.rotate(e),t.rect(-a/2,-f-r/2,a,f),t.closePath(),t.fill(),t.restore()}if(typeof e.label!="string")return;var s=i("prefix")||"",o=e[s+"size"]||1;if(o<i("edgeLabelThreshold")&&!e.hover)return;if(0===i("edgeLabelSizePowRatio"))throw new Error('Invalid setting: "edgeLabelSizePowRatio" is equal to 0.');var u,a=t[s+"size"],f=t[s+"x"],l=t[s+"y"],c=n[s+"x"],h=n[s+"y"],p=c-f,d=h-l,v=f<c?1:-1,m={},g,y=0,b=.5,w=e.hover?i("hoverFontStyle")||i("fontStyle"):i("fontStyle");t.id===n.id?(m=sigma.utils.getSelfLoopControlPoints(f,l,a),g=sigma.utils.getPointOnBezierCurve(b,f,l,c,h,m.x1,m.y1,m.x2,m.y2)):(m=sigma.utils.getQuadraticControlPoint(f,l,c,h,e.cc),g=sigma.utils.getPointOnQuadraticCurve(b,f,l,c,h,m.x,m.y)),u=i("edgeLabelSize")==="fixed"?i("defaultEdgeLabelSize"):i("defaultEdgeLabelSize")*o*Math.pow(o,-1/i("edgeLabelSizePowRatio")),r.save(),e.active?r.font=[i("activeFontStyle")||i("fontStyle"),u+"px",i("activeFont")||i("font")].join(" "):r.font=[w,u+"px",i("font")].join(" "),r.textAlign="center",r.textBaseline="alphabetic";if("auto"===i("edgeLabelAlignment"))if(t.id===n.id)y=Math.atan2(1,1);else{var E=sigma.utils.canvas.getTextWidth(r,i("approximateLabelWidth"),u,e.label),S=sigma.utils.getDistance(t[s+"x"],t[s+"y"],n[s+"x"],n[s+"y"]);S=S-t[s+"size"]-n[s+"size"]-10,E<S&&(y=Math.atan2(d*v,p*v))}e.hover&&(r.fillStyle=i("edgeLabelHoverBGColor")==="edge"?e.color||i("defaultEdgeColor"):i("defaultEdgeHoverLabelBGColor"),i("edgeLabelHoverShadow")&&(r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=8,r.shadowColor=i("edgeLabelHoverShadowColor")),x(y,r,u,o,e.label,g.x,g.y),i("edgeLabelHoverShadow")&&(r.shadowBlur=0,r.shadowColor="#000")),e.active?r.fillStyle=i("edgeActiveColor")==="edge"?e.active_color||i("defaultEdgeActiveColor"):i("defaultEdgeLabelActiveColor"):r.fillStyle=i("edgeLabelColor")==="edge"?e.color||i("defaultEdgeColor"):i("defaultEdgeLabelColor"),r.translate(g.x,g.y),r.rotate(y),r.fillText(e.label,0,-o/2-3),r.restore()}}.call(this),function(e){"use strict";if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curvedArrow=function(e,t,n,r,i){sigma.canvas.edges.labels.curve(e,t,n,r,i)}}.call(this),function(){"use strict";function n(e){if(t[e])return t[e];var n=[0,0,0];return e.match(/^#/)?(e=(e||"").replace(/^#/,""),n=e.length===3?[parseInt(e.charAt(0)+e.charAt(0),16),parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)]:[parseInt(e.charAt(0)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)]):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),n=[+e[1],+e[2],+e[3]]),t[e]={r:n[0],g:n[1],b:n[2]},t[e]}function r(e,t,r){e=n(e),t=n(t);var i={r:e.r*(1-r)+t.r*r,g:e.g*(1-r)+t.g*r,b:e.b*(1-r)+t.b*r};return"rgb("+[i.r|0,i.g|0,i.b|0].join(",")+")"}if(typeof sigma=="undefined")throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var e=0,t={};sigma.plugins.animate=function(t,n,i){function h(){var e=(sigma.utils.dateNow()-f)/u;e>=1?(l.forEach(function(e){for(var t in n)t in n&&n[t]in e&&(e[t]=e[n[t]])}),t.refresh({skipIndexation:!0}),typeof s.onComplete=="function"&&s.onComplete(),t.dispatchEvent("animate.end")):(e=a(e),l.forEach(function(t){for(var i in n)i in n&&n[i]in t&&(i.match(/color$/)?t[i]=r(c[t.id][i],t[n[i]],e):t[i]=t[n[i]]*e+c[t.id][i]*(1-e))}),t.refresh({skipIndexation:!0}),t.animations[o]=requestAnimationFrame(h))}var s=i||{},o=++e,u=s.duration||t.settings("animationsTime"),a=typeof s.easing=="string"?sigma.utils.easings[s.easing]:typeof s.easing=="function"?s.easing:sigma.utils.easings.quadraticInOut,f=sigma.utils.dateNow(),l,c;s.nodes&&s.nodes.length?typeof s.nodes[0]=="object"?l=s.nodes:l=t.graph.nodes(s.nodes):l=t.graph.nodes(),c=l.reduce(function(e,t){var r;e[t.id]={};for(r in n)r in t&&(e[t.id][r]=t[r]);return e},{}),t.animations=t.animations||Object.create({}),sigma.plugins.killAnimate(t),t.dispatchEvent("animate.start"),h()},sigma.plugins.killAnimate=function(e){for(var t in e.animations||{})cancelAnimationFrame(e.animations[t])}}.call(window),!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=i("edgeColor"),a=i("defaultNodeColor"),f=i("defaultEdgeColor"),l=i("edgeHoverLevel"),c=e[o+"size"]||1,h=n[o+"size"],p=t[o+"x"],d=t[o+"y"],v=n[o+"x"],m=n[o+"y"];c=e.hover?i("edgeHoverSizeRatio")*c:c;var g=2.5*c,y=Math.sqrt(Math.pow(v-p,2)+Math.pow(m-d,2)),b=p+(v-p)*(y-g-h)/y,w=d+(m-d)*(y-g-h)/y,E=(v-p)*g/y,S=(m-d)*g/y;if(l)switch(r.shadowOffsetX=0,l){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}if(!s)switch(
u){case"source":s=t.color||a;break;case"target":s=n.color||a;break;default:s=f}s="edge"===i("edgeHoverColor")?e.hover_color||s:e.hover_color||i("defaultEdgeHoverColor")||s,r.strokeStyle=s,r.lineWidth=c,r.beginPath(),r.moveTo(p,d),r.lineTo(b,w),r.stroke(),r.fillStyle=s,r.beginPath(),r.moveTo(b+E,w+S),r.lineTo(b+.6*S,w-.6*E),r.lineTo(b-.6*S,w+.6*E),r.lineTo(b+E,w+S),r.closePath(),r.fill(),l&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),sigma.canvas.edges.labels.arrow&&(e.hover=!0,sigma.canvas.edges.labels.arrow(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=i("edgeHoverSizeRatio")*(e[o+"size"]||1),a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel"),h={},p=t[o+"size"],d=t[o+"x"],v=t[o+"y"],m=n[o+"x"],g=n[o+"y"];if(h=t.id===n.id?sigma.utils.getSelfLoopControlPoints(d,v,p):sigma.utils.getQuadraticControlPoint(d,v,m,g),c)switch(r.shadowOffsetX=0,c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}s="edge"===i("edgeHoverColor")?e.hover_color||s:e.hover_color||i("defaultEdgeHoverColor")||s,r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(d,v),t.id===n.id?r.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,m,g):r.quadraticCurveTo(h.x,h.y,m,g),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),sigma.canvas.edges.labels.curve&&(e.hover=!0,sigma.canvas.edges.labels.curve(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,n,r,i){var s,o,u,a,f,l,c=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,h=i("prefix")||"",p=i("edgeColor"),d=i("defaultNodeColor"),v=i("defaultEdgeColor"),m=i("edgeHoverLevel"),g={},y=i("edgeHoverSizeRatio")*(e[h+"size"]||1),b=n[h+"size"],w=t[h+"x"],E=t[h+"y"],S=n[h+"x"],x=n[h+"y"];if(g=t.id===n.id?sigma.utils.getSelfLoopControlPoints(w,E,b):sigma.utils.getQuadraticControlPoint(w,E,S,x),t.id===n.id?(s=Math.sqrt(Math.pow(S-g.x1,2)+Math.pow(x-g.y1,2)),o=2.5*y,u=g.x1+(S-g.x1)*(s-o-b)/s,a=g.y1+(x-g.y1)*(s-o-b)/s,f=(S-g.x1)*o/s,l=(x-g.y1)*o/s):(s=Math.sqrt(Math.pow(S-g.x,2)+Math.pow(x-g.y,2)),o=2.5*y,u=g.x+(S-g.x)*(s-o-b)/s,a=g.y+(x-g.y)*(s-o-b)/s,f=(S-g.x)*o/s,l=(x-g.y)*o/s),m)switch(r.shadowOffsetX=0,m){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}if(!c)switch(p){case"source":c=t.color||d;break;case"target":c=n.color||d;break;default:c=v}if(c="edge"===i("edgeHoverColor")?e.hover_color||c:e.hover_color||i("defaultEdgeHoverColor")||c,r.strokeStyle=c,r.lineWidth=y,r.beginPath(),r.moveTo(w,E),t.id===n.id?r.bezierCurveTo(g.x2,g.y2,g.x1,g.y1,u,a):r.quadraticCurveTo(g.x,g.y,u,a),r.stroke(),r.fillStyle=c,r.beginPath(),r.moveTo(u+f,a+l),r.lineTo(u+.6*l,a-.6*f),r.lineTo(u-.6*l,a+.6*f),r.lineTo(u+f,a+l),r.closePath(),r.fill(),m&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),sigma.canvas.edges.labels.curvedArrow){e.hover=!0;var T=sigma.canvas.edges.labels.curvedArrow;(T.render||T)(e,t,n,r,i),e.hover=!1}}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dashed=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel");if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}if(s="edge"===i("edgeHoverColor")?e.hover_color||s:e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),r.save(),c)switch(r.shadowOffsetX=0,c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}r.setLineDash([8,3]),r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel");if(c)switch(r.shadowOffsetX=0,c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}s="edge"===i("edgeHoverColor")?e.hover_color||s:e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),sigma.canvas.edges.labels.def&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dotted=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel");if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}if(s="edge"===i("edgeHoverColor")?e.hover_color||s:e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),r.save(),c)switch(r.shadowOffsetX=0,c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}if(r.setLineDash([2]),r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels){e.hover=!0;var h=sigma.canvas.edges.labels.def;(h.render||h)(e,t,n,r,i),e.hover=!1}}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.parallel=function(e,t,n,r,i){var s,o,u=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,a=i("prefix")||"",f=e[a+"size"]||1,l=i("edgeColor"),c=i("defaultNodeColor"),h=i("defaultEdgeColor"),p=i("edgeHoverLevel"),d=t[a+"x"],v=t[a+"y"],m=n[a+"x"],g=n[a+"y"],y=sigma.utils.getDistance(d,v,m,g);if(!u)switch(l){case"source":u=t.color||c;break;case"target":u=n.color||c;break;default:u=h}if(u="edge"===i("edgeHoverColor")?e.hover_color||u:e.hover_color||i("defaultEdgeHoverColor")||u,f*=i("edgeHoverSizeRatio"),s=sigma.utils.getCircleIntersection(d,v,f,m,g,y),o=sigma.utils.getCircleIntersection(m,g,f,d,v,y),r.save(),p)switch(r.shadowOffsetX=0,p){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}r.strokeStyle=u,r.lineWidth=f,r.beginPath(),r.moveTo(s.xi,s.yi),r.lineTo(o.xi_prime,o.yi_prime),r.closePath(),r.stroke(),r.beginPath(),r.moveTo(s.xi_prime,s.yi_prime),r.lineTo(o.xi,o.yi),r.closePath(),r.stroke(),p&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.tapered=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),o=i("prefix")||"",f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=i("edgeHoverLevel"),h=t[o+"x"],p=t[o+"y"],d=n[o+"x"],v=n[o+"y"],m=sigma.utils.getDistance(h,p,d,v);if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}s="edge"===i("edgeHoverColor")?e.hover_color||s:e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio");var g=sigma.utils.getCircleIntersection(h,p,u,d,v,m);if(r.save(),c)switch(r.shadowOffsetX=0,c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}r.globalAlpha=.65,r.fillStyle=s,r.beginPath(),r.moveTo(d,v),r.lineTo(g.xi,g.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.fill(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore(),sigma.canvas.edges.labels&&(e.hover=!0,sigma.canvas.edges.labels.def(e,t,n,r,i),e.hover=!1)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=i("edgeColor"),a=i("defaultNodeColor"),f=i("defaultEdgeColor"),l=e.active?i("edgeActiveLevel"):e.level,c=e[o+"size"]||1,h=n[o+"size"],p=t[o+"x"],d=t[o+"y"],v=n[o+"x"],m=n[o+"y"],g=2.5*c,y=Math.sqrt(Math.pow(v-p,2)+Math.pow(m-d,2)),b=p+(v-p)*(y-g-h)/y,w=d+(m-d)*(y-g-h)/y,E=(v-p)*g/y,S=(m-d)*g/y;if(l)switch(r.shadowOffsetX=0,l){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}if(!s)switch(u){case"source":s=t.color||a;break;case"target":s=n.color||a;break;default:s=f}e.active?r.strokeStyle="edge"===i("edgeActiveColor")?s||f:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.lineWidth=c,r.beginPath(),r.moveTo(p,d),r.lineTo(b,w),r.stroke(),r.fillStyle=s,r.beginPath(),r.moveTo(b+E,w+S),r.lineTo(b+.6*S,w-.6*E),r.lineTo(b-.6*S,w+.6*E),r.lineTo(b+E,w+S),r.closePath(),r.fill(),l&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level,h={},p=t[o+"size"],d=t[o+"x"],v=t[o+"y"],m=n[o+"x"],g=n[o+"y"];if(h=t.id===n.id?sigma.utils.getSelfLoopControlPoints(d,v,p):sigma.utils.getQuadraticControlPoint(d,v,m,g),c)switch(r.shadowOffsetX=0,c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}e.active?r.strokeStyle="edge"===i("edgeActiveColor")?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(d,v),t.id===n.id?r.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,m,g):r.quadraticCurveTo(h.x,h.y,m,g),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(e,t,n,r,i){var s,o,u,a,f,l,c=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,h=i("prefix")||"",p=i("edgeColor"),d=i("defaultNodeColor"),v=i("defaultEdgeColor"),m=e.active?i("edgeActiveLevel"):e.level,g={},y=e[h+"size"]||1,b=n[h+"size"],w=t[h+"x"],E=t[h+"y"],S=n[h+"x"],x=n[h+"y"];if(g=t.id===n.id?sigma.utils.getSelfLoopControlPoints(w,E,b):sigma.utils.getQuadraticControlPoint(w,E,S,x),t.id===n.id?(s=Math.sqrt(Math.pow(S-g.x1,2)+Math.pow(x-g.y1,2)),o=2.5*y,u=g.x1+(S-g.x1)*(s-o-b)/s,a=g.y1+(x-g.y1)*(s-o-b)/s,f=(S-g.x1)*o/s,l=(x-g.y1)*o/s):(s=Math.sqrt(Math.pow(S-g.x,2)+Math.pow(x-g.y,2)),o=2.5*y,u=g.x+(S-g.x)*(s-o-b)/s,a=g.y+(x-g.y)*(s-o-b)/s,f=(S-g.x)*o/s,l=(x-g.y)*o/s),m)switch(r.shadowOffsetX=0,m){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}if(!c)switch(p){case"source":c=t.color||d;break;case"target":c=n.color||d;break;default:c=v}e.active?r.strokeStyle="edge"===i("edgeActiveColor")?c||v:i("defaultEdgeActiveColor"):r.strokeStyle=c,r.lineWidth=y,r.beginPath(),r.moveTo(w,E),t.id===n.id?r.bezierCurveTo(g.x2,g.y2,g.x1,g.y1,u,a):r.quadraticCurveTo(g.x,g.y,u,a),r.stroke(),r.fillStyle=c,r.beginPath(),r.moveTo(u+f,a+l),r.lineTo(u+.6*l,a-.6*f),r.lineTo(u-.6*l,a+.6*f),r.lineTo(u+f,a+l),r.closePath(),r.fill(),m&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dashed=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level;if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}if(r.save(),c)switch(r.shadowOffsetX=0,c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}e.active?r.strokeStyle="edge"===i("edgeActiveColor")?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.setLineDash([8,3]),r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level;if(c)switch(r.shadowOffsetX=0,c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}e.active?r.strokeStyle="edge"===i("edgeActiveColor")?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000")}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dotted=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level;if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}if(r.save(),c)switch(r.shadowOffsetX=0,c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}e.active?r.strokeStyle="edge"===i("edgeActiveColor")?s||l:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.setLineDash([2]),r.lineWidth=u,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(n[o+"x"],n[o+"y"]),r.stroke(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.parallel=function(e,t,n,r,i){var s,o,u=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,a=i("prefix")||"",f=e[a+"size"]||1,l=i("edgeColor"),c=i("defaultNodeColor"),h=i("defaultEdgeColor"),p=e.active?i("edgeActiveLevel"):e.level,d=t[a+"x"],v=t[a+"y"],m=n[a+"x"],g=n[a+"y"],y=sigma.utils.getDistance(d,v,m,g);if(!u)switch(l){case"source":u=t.color||c;break;case"target":u=n.color||c;break;default:u=h}if(s=sigma.utils.getCircleIntersection(d,v,f,m,g,y),o=sigma.utils.getCircleIntersection(m,g,f,d,v,y),r.save(),p)switch(r.shadowOffsetX=0,p){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}e.active?r.strokeStyle="edge"===i("edgeActiveColor")?u||h:i("defaultEdgeActiveColor"):r.strokeStyle=u,r.lineWidth=f,r.beginPath(),r.moveTo(s.xi,s.yi),r.lineTo(o.xi_prime,o.yi_prime),r.closePath(),r.stroke(),r.beginPath(),r.moveTo(s.xi_prime,s.yi_prime),r.lineTo(o.xi,o.yi),r.closePath(),r.stroke(),p&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.tapered=function(e,t,n,r,i){var s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,o=i("prefix")||"",u=e[o+"size"]||1,a=i("edgeColor"),o=i("prefix")||"",f=i("defaultNodeColor"),l=i("defaultEdgeColor"),c=e.active?i("edgeActiveLevel"):e.level,h=t[o+"x"],p=t[o+"y"],d=n[o+"x"],v=n[o+"y"],m=sigma.utils.getDistance(h,p,d,v);if(!s)switch(a){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=l}var g=sigma.utils.getCircleIntersection(h,p,u,d,v,m);if(r.save(),c)switch(r.shadowOffsetX=0,c){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}e.active?r.fillStyle="edge"===i("edgeActiveColor")?s||l:i("defaultEdgeActiveColor"):r.fillStyle=s,r.globalAlpha=.65,r.beginPath(),r.moveTo(d,v),r.lineTo(g.xi,g.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.fill(),c&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),r.restore()}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(e,t,n,r,i){(sigma.canvas.hovers[t.type]||sigma.canvas.hovers.def)(t,r,i),(sigma.canvas.hovers[n.type]||sigma.canvas.hovers.def)(n,r,i)}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,n){function r(t){t.font=(s?s+" ":"")+c+"px "+(n("hoverFont")||n("font")),t.beginPath(),t.fillStyle="node"===n("labelHoverBGColor")?e.color||a:n("defaultHoverLabelBGColor"),e.label&&n("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=n("labelHoverShadowColor"))}function i(e,t,r,i){var s=Math.round(i[o+"x"]),a=Math.round(i[o+"y"]),l=sigma.utils.canvas.getTextWidth(t,n("approximateLabelWidth"),r,i.label),c=Math.round(l+4),h=r+4,p=Math.round(u+.25*r);if(i.label&&"string"==typeof i.label)switch(e){case"center":a=Math.round(i[o+"y"]-.5*r-2),t.rect(s-.5*c,a,c,h);break;case"left":s=Math.round(i[o+"x"]+.5*r+2),a=Math.round(i[o+"y"]-.5*r-2),c+=.5*u+.5*r,t.moveTo(s,a+p),t.arcTo(s,a,s-p,a,p),t.lineTo(s-c-f-p,a),t.lineTo(s-c-f-p,a+h),t.lineTo(s-p,a+h),t.arcTo(s,a+h,s,a+h-p,p),t.lineTo(s,a+p);break;case"top":t.rect(s-.5*c,a-p-h,c,h);break;case"bottom":t.rect(s-.5*c,a+p,c,h);break;case"inside":if(2*p>=l)break;case"right":default:s=Math.round(i[o+"x"]-.5*r-2),a=Math.round(i[o+"y"]-.5*r-2),c+=.5*u+.5*r,t.moveTo(s,a+p),t.arcTo(s,a,s+p,a,p),t.lineTo(s+c+f+p,a),t.lineTo(s+c+f+p,a+h),t.lineTo(s+p,a+h),t.arcTo(s,a+h,s,a+h-p,p),t.lineTo(s,a+p)}t.closePath(),t.fill(),t.shadowOffsetY=0,t.shadowBlur=0}var s=n("hoverFontStyle")||n("fontStyle"),o=n("prefix")||"",u=e[o+"size"]||1,a=n("defaultNodeColor"),f=n("borderSize"),l=n("labelAlignment"),c="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*u,h="node"===n("nodeHoverColor")?e.color||a:n("defaultNodeHoverColor"),p=n("nodeHoverLevel");if("center"!==l&&(r(t),i(l,t,c,e)),p)switch(t.shadowOffsetX=0,p){case 1:t.shadowOffsetY=1.5,t.shadowBlur=4,t.shadowColor="rgba(0,0,0,0.36)";break;case 2:t.shadowOffsetY=3,t.shadowBlur=12,t.shadowColor="rgba(0,0,0,0.39)";break;case 3:t.shadowOffsetY=6,t.shadowBlur=12,t.shadowColor="rgba(0,0,0,0.42)";break;case 4:t.shadowOffsetY=10,t.shadowBlur=20,t.shadowColor="rgba(0,0,0,0.47)";break;case 5:t.shadowOffsetY=15,t.shadowBlur=24,t.shadowColor="rgba(0,0,0,0.52)"}f>0&&(t.beginPath(),t.fillStyle="node"===n("nodeBorderColor")?e.color||a:n("defaultNodeBorderColor"),t.arc(e[o+"x"],e[o+"y"],u+f,0,2*Math.PI,!0),t.closePath(),t.fill());var d=sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def;if(d(e,t,n,{color:h}),p&&(t.shadowOffsetY=0,t.shadowBlur=0),"center"===l&&(r(t),i(l,t,c,e)),"string"==typeof e.label){t.fillStyle="node"===n("labelHoverColor")?e.color||a:n("defaultLabelHoverColor");var v,m=0,g=c/3;switch(t.textAlign="center",l){case"bottom":g=+u+4*c/3;break;case"center":break;case"left":t.textAlign="right",m=-u-f-n("outerBorderSize")-3-v;break;case"top":g=-u-2*c/3;break;case"inside":if(v=getTextWidth(e.label),2*(u+c/3)>=v)break;case"right":default:m=u+f+n("outerBorderSize")+3,t.textAlign="left"}t.fillText(e.label,Math.round(e[o+"x"]+m),Math.round(e[o+"y"]+g))}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,t,n,r){var i,s,o,u,a=n("prefix")||"",f=e[a+"size"]||1,l=n(e.active?"activeFontStyle":"fontStyle"),c=e.active?n("borderSize")+n("outerBorderSize"):0,h=n("labelAlignment");if(!(f<n("labelThreshold"))&&e.label&&"string"==typeof e.label){i="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*f;var p=(l?l+" ":"")+i+"px "+(e.active?n("activeFont")||n("font"):n("font"));switch(r&&r.ctx.font!=p?(t.font=p,r.ctx.font=p):t.font=p,e.active?t.fillStyle="node"===n("labelActiveColor")?e.active_color||n("defaultNodeActiveColor"):n("defaultLabelActiveColor"):t.fillStyle="node"===n("labelColor")?e.color||n("defaultNodeColor"):n("defaultLabelColor"),o=0,u=i/3,t.textAlign="center",h){case"bottom":u=+f+4*i/3;break;case"center":break;case"left":t.textAlign="right",o=-f-c-3;break;case"top":u=-f-2*i/3;break;case"inside":if(s=sigma.utils.canvas.getTextWidth(t,n("approximateLabelWidth"),i,e.label),2*(f+i/3)>=s)break;case"right":default:o=f+c+3,t.textAlign="left"}t.fillText(e.label,Math.round(e[a+"x"]+o),Math.round(e[a+"y"]+u))}}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e={},t=function(e,t,n,r,i){var s=e.cross&&e.cross.lineWeight||1;i.moveTo(t-r,n-s),i.lineTo(t-r,n+s),i.lineTo(t-s,n+s),i.lineTo(t-s,n+r),i.lineTo(t+s,n+r),i.lineTo(t+s,n+s),i.lineTo(t+r,n+s),i.lineTo(t+r,n-s),i.lineTo(t+s,n-s),i.lineTo(t+s,n-r),i.lineTo(t-s,n-r),i.lineTo(t-s,n-s)},n=function(n,r,i,s,o,u,f){if(n.image&&n.image.url&&!(f>s)){var l=n.image.url,c=n.image.h||1,h=n.image.w||1,p=n.image.scale||1,d=(n.image.clip||1,e[l]);d||(d=document.createElement("IMG"),d.setAttribute("crossOrigin",u),d.src=l,d.onload=function(){window.dispatchEvent(new Event("resize"))},e[l]=d);var v=c>h?h/c:1,m=h>c?c/h:1,g=s*p;o.save(),o.beginPath(),t(n,r,i,s,o),o.closePath(),o.clip(),o.drawImage(d,r+Math.sin(-0.7855)*g*v,i-Math.cos(-0.7855)*g*m,g*v*2*Math.sin(-0.7855)*-1,g*m*2*Math.cos(-0.7855)),o.restore()}},r=function(e,t,n,r,i,s){if(e.icon&&!(s>r)){var o=e.icon.font||"Arial",u=e.icon.color||"#F00",a=e.icon.content||"?",f=(e.icon.x||.5,e.icon.y||.5,r),l=.7;"number"==typeof e.icon.scale&&(l=Math.abs(Math.max(.01,e.icon.scale)));var c=Math.round(l*f);i.save(),i.fillStyle=u,i.font=""+c+"px "+o,i.textAlign="center",i.textBaseline="middle",i.fillText(a,t,n),i.restore()}};sigma.canvas.nodes.cross=function(e,i,s,o){var u=o||{},a=s("prefix")||"",f=e[a+"size"]||1,l=e[a+"x"],h=e[a+"y"],p=s("defaultNodeColor"),v=s("imgCrossOrigin")||"anonymous",m=s("borderSize"),g=s("outerBorderSize"),y=u.color||e.color||p,w=e.active?s("nodeActiveLevel"):e.level;if(w)switch(i.shadowOffsetX=0,w){case 1:i.shadowOffsetY=1.5,i.shadowBlur=4,i.shadowColor="rgba(0,0,0,0.36)";break;case 2:i.shadowOffsetY=3,i.shadowBlur=12,i.shadowColor="rgba(0,0,0,0.39)";break;case 3:i.shadowOffsetY=6,i.shadowBlur=12,i.shadowColor="rgba(0,0,0,0.42)";break;case 4:i.shadowOffsetY=10,i.shadowBlur=20,i.shadowColor="rgba(0,0,0,0.47)";break;case 5:i.shadowOffsetY=15,i.shadowBlur=24,i.shadowColor="rgba(0,0,0,0.52)"}e.active&&(y="node"===s("nodeActiveColor")?e.active_color||y:s("defaultNodeActiveColor")||y),e.active&&(g>0&&(i.beginPath(),i.fillStyle="node"===s("nodeOuterBorderColor")?y||p:s("defaultNodeOuterBorderColor"),t(e,l,h,f+m+g,i),i.closePath(),i.fill()),m>0&&(i.beginPath(),i.fillStyle="node"===s("nodeBorderColor")?y||p:s("defaultNodeBorderColor"),t(e,l,h,f+m,i),i.closePath(),i.fill())),i.fillStyle=y,i.beginPath(),t(e,l,h,f,i),i.closePath(),i.fill(),w&&(i.shadowOffsetY=0,i.shadowBlur=0,i.shadowColor="#000000"),e.image&&n(e,l,h,f,i,v,s("imageThreshold")),e.icon&&r(e,l,h,f,i,s("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e={},t=function(t,n,r,i,s,o,u){if(t.image&&t.image.url&&!(u>i)){var f=t.image.url,l=t.image.h||1,c=t.image.w||1,h=t.image.scale||1,p=t.image.clip||1,d=e[f];d||(d=document.createElement("IMG"),d.setAttribute("crossOrigin",o),d.src=f,d.onload=function(){window.dispatchEvent(new Event("resize"))},e[f]=d);var v=l>c?c/l:1,m=c>l?l/c:1,g=i*h;s.save(),s.beginPath(),s.arc(n,r,i*p,0,2*Math.PI,!0),s.closePath(),s.clip(),s.drawImage(d,n+Math.sin(-0.7855)*g*v,r-Math.cos(-0.7855)*g*m,g*v*2*Math.sin(-0.7855)*-1,g*m*2*Math.cos(-0.7855)),s.restore()}},n=function(e,t,n,r,i,s){if(e.icon&&!(s>r)){var o=e.icon.font||"Arial",u=e.icon.color||"#F00",a=e.icon.content||"?",f=(e.icon.x||.5,e.icon.y||.5,r),l=.7;"number"==typeof e.icon.scale&&(l=Math.abs(Math.max(.01,e.icon.scale)));var c=Math.round(l*f);i.save(),i.fillStyle=u,i.font=""+c+"px "+o,i.textAlign="center",i.textBaseline="middle",i.fillText(a,t,n),i.restore()}};sigma.canvas.nodes.def=function(e,r,i,s){var o=s||{},u=i("prefix")||"",a=e[u+"size"]||1,f=e[u+"x"],l=e[u+"y"],h=i("defaultNodeColor"),p=i("imgCrossOrigin")||"anonymous",d=i("borderSize"),v=i("outerBorderSize"),m=o.color||e.color||h,g=e.active?i("nodeActiveLevel"):e.level;if(g)switch(r.shadowOffsetX=0,g){case 1:r.shadowOffsetY=1.5,r.shadowBlur=4,r.shadowColor="rgba(0,0,0,0.36)";break;case 2:r.shadowOffsetY=3,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.39)";break;case 3:r.shadowOffsetY=6,r.shadowBlur=12,r.shadowColor="rgba(0,0,0,0.42)";break;case 4:r.shadowOffsetY=10,r.shadowBlur=20,r.shadowColor="rgba(0,0,0,0.47)";break;case 5:r.shadowOffsetY=15,r.shadowBlur=24,r.shadowColor="rgba(0,0,0,0.52)"}if(e.active&&(m="node"===i("nodeActiveColor")?e.active_color||m:i("defaultNodeActiveColor")||m,v>0&&(r.beginPath(),r.fillStyle="node"===i("nodeOuterBorderColor")?m||h:i("defaultNodeOuterBorderColor"),r.arc(f,l,a+d+v,0,2*Math.PI,!0),r.closePath(),r.fill()),d>0&&(r.beginPath(),r.fillStyle="node"===i("nodeBorderColor")?m||h:i("defaultNodeBorderColor"),r.arc(f,l,a+d,0,2*Math.PI,!0),r.closePath(),r.fill())),(!e.active||e.active&&"node"===i("nodeActiveColor"))&&e.colors&&e.colors.length){var y,w=e.colors.length,E=1/w,S=0;for(y=0;w>y;y++)r.fillStyle=e.colors[y],r.beginPath(),r.moveTo(f,l),r.arc(f,l,a,S,S+2*Math.PI*E,!1),r.lineTo(f,l),r.closePath(),r.fill(),S+=2*Math.PI*E}else r.fillStyle=m,r.beginPath(),r.arc(f,l,a,0,2*Math.PI,!0),r.closePath(),r.fill();g&&(r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor="#000000"),e.image&&t(e,f,l,a,r,p,i("imageThreshold")),e.icon&&n(e,f,l,a,r,i("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e={},t=function(e,t,n,r,i){i.moveTo(t-r,n),i.lineTo(t,n-r),i.lineTo(t+r,n),i.lineTo(t,n+r)},n=function(n,r,i,s,o,u,f){if(n.image&&n.image.url&&!(f>s)){var l=n.image.url,c=n.image.h||1,h=n.image.w||1,p=n.image.scale||1,d=(n.image.clip||1,e[l]);d||(d=document.createElement("IMG"),d.setAttribute("crossOrigin",u),d.src=l,d.onload=function(){window.dispatchEvent(new Event("resize"))},e[l]=d);var v=c>h?h/c:1,m=h>c?c/h:1,g=s*p;o.save(),o.beginPath(),t(n,r,i,s,o),o.closePath(),o.clip(),o.drawImage(d,r+Math.sin(-0.7855)*g*v,i-Math.cos(-0.7855)*g*m,g*v*2*Math.sin(-0.7855)*-1,g*m*2*Math.cos(-0.7855)),o.restore()}},r=function(e,t,n,r,i,s){if(e.icon&&!(s>r)){var o=e.icon.font||"Arial",u=e.icon.color||"#F00",a=e.icon.content||"?",f=(e.icon.x||.5,e.icon.y||.5,r),l=.7;"number"==typeof e.icon.scale&&(l=Math.abs(Math.max(.01,e.icon.scale)));var c=Math.round(l*f);i.save(),i.fillStyle=u,i.font=""+c+"px "+o,i.textAlign="center",i.textBaseline="middle",i.fillText(a,t,n),i.restore()}};sigma.canvas.nodes.diamond=function(e,i,s,o){var u=o||{},a=s("prefix")||"",f=e[a+"size"]||1,l=e[a+"x"],h=e[a+"y"],p=s("defaultNodeColor"),v=s("imgCrossOrigin")||"anonymous",m=s("borderSize"),g=s("outerBorderSize"),y=u.color||e.color||p,w=e.active?s("nodeActiveLevel"):e.level;if(w)switch(i.shadowOffsetX=0,w){case 1:i.shadowOffsetY=1.5,i.shadowBlur=4,i.shadowColor="rgba(0,0,0,0.36)";break;case 2:i.shadowOffsetY=3,i.shadowBlur=12,i.shadowColor="rgba(0,0,0,0.39)";break;case 3:i.shadowOffsetY=6,i.shadowBlur=12,i.shadowColor="rgba(0,0,0,0.42)";break;case 4:i.shadowOffsetY=10,i.shadowBlur=20,i.shadowColor="rgba(0,0,0,0.47)";break;case 5:i.shadowOffsetY=15,i.shadowBlur=24,i.shadowColor="rgba(0,0,0,0.52)"}e.active&&(y="node"===s("nodeActiveColor")?e.active_color||y:s("defaultNodeActiveColor")||y,g>0&&(i.beginPath(),i.fillStyle="node"===s("nodeOuterBorderColor")?y||p:s("defaultNodeOuterBorderColor"),t(e,l,h,f+m+g,i),i.closePath(),i.fill()),m>0&&(i.beginPath(),i.fillStyle="node"===s("nodeBorderColor"
)?y||p:s("defaultNodeBorderColor"),t(e,l,h,f+m,i),i.closePath(),i.fill())),i.fillStyle=y,i.beginPath(),t(e,l,h,f,i),i.closePath(),i.fill(),w&&(i.shadowOffsetY=0,i.shadowBlur=0,i.shadowColor="#000000"),e.image&&n(e,l,h,f,i,v,s("imageThreshold")),e.icon&&r(e,l,h,f,i,s("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e={},t=function(e,t,n,r,i){var s=e.equilateral&&e.equilateral.numPoints||5,o=e.equilateral&&e.equilateral.rotate||0,u=r;o+=Math.PI/s,i.moveTo(t+u*Math.sin(o),n-u*Math.cos(o));for(var a=1;s>a;a++)i.lineTo(t+Math.sin(o+2*Math.PI*a/s)*u,n-Math.cos(o+2*Math.PI*a/s)*u)},n=function(n,r,i,s,o,u,f){if(n.image&&n.image.url&&!(f>s)){var l=n.image.url,c=n.image.h||1,h=n.image.w||1,p=n.image.scale||1,d=(n.image.clip||1,e[l]);d||(d=document.createElement("IMG"),d.setAttribute("crossOrigin",u),d.src=l,d.onload=function(){window.dispatchEvent(new Event("resize"))},e[l]=d);var v=c>h?h/c:1,m=h>c?c/h:1,g=s*p;o.save(),o.beginPath(),t(n,r,i,s,o),o.closePath(),o.clip(),o.drawImage(d,r+Math.sin(-0.7855)*g*v,i-Math.cos(-0.7855)*g*m,g*v*2*Math.sin(-0.7855)*-1,g*m*2*Math.cos(-0.7855)),o.restore()}},r=function(e,t,n,r,i,s){if(e.icon&&!(s>r)){var o=e.icon.font||"Arial",u=e.icon.color||"#F00",a=e.icon.content||"?",f=(e.icon.x||.5,e.icon.y||.5,r),l=.7;"number"==typeof e.icon.scale&&(l=Math.abs(Math.max(.01,e.icon.scale)));var c=Math.round(l*f);i.save(),i.fillStyle=u,i.font=""+c+"px "+o,i.textAlign="center",i.textBaseline="middle",i.fillText(a,t,n),i.restore()}};sigma.canvas.nodes.equilateral=function(e,i,s,o){var u=o||{},a=s("prefix")||"",f=e[a+"size"]||1,l=e[a+"x"],h=e[a+"y"],p=s("defaultNodeColor"),v=s("imgCrossOrigin")||"anonymous",m=s("borderSize"),g=s("outerBorderSize"),y=u.color||e.color||p,w=e.active?s("nodeActiveLevel"):e.level;if(w)switch(i.shadowOffsetX=0,w){case 1:i.shadowOffsetY=1.5,i.shadowBlur=4,i.shadowColor="rgba(0,0,0,0.36)";break;case 2:i.shadowOffsetY=3,i.shadowBlur=12,i.shadowColor="rgba(0,0,0,0.39)";break;case 3:i.shadowOffsetY=6,i.shadowBlur=12,i.shadowColor="rgba(0,0,0,0.42)";break;case 4:i.shadowOffsetY=10,i.shadowBlur=20,i.shadowColor="rgba(0,0,0,0.47)";break;case 5:i.shadowOffsetY=15,i.shadowBlur=24,i.shadowColor="rgba(0,0,0,0.52)"}e.active&&(y="node"===s("nodeActiveColor")?e.active_color||y:s("defaultNodeActiveColor")||y,g>0&&(i.beginPath(),i.fillStyle="node"===s("nodeOuterBorderColor")?y||p:s("defaultNodeOuterBorderColor"),t(e,l,h,f+m+g,i),i.closePath(),i.fill()),m>0&&(i.beginPath(),i.fillStyle="node"===s("nodeBorderColor")?y||p:s("defaultNodeBorderColor"),t(e,l,h,f+m,i),i.closePath(),i.fill())),i.fillStyle=y,i.beginPath(),t(e,l,h,f,i),i.closePath(),i.fill(),w&&(i.shadowOffsetY=0,i.shadowBlur=0,i.shadowColor="#000000"),e.image&&n(e,l,h,f,i,v,s("imageThreshold")),e.icon&&r(e,l,h,f,i,s("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e={},t=function(e,t,n,r,i){var s=45*Math.PI/180;i.moveTo(t+r*Math.sin(s),n-r*Math.cos(s));for(var o=1;4>o;o++)i.lineTo(t+Math.sin(s+2*Math.PI*o/4)*r,n-Math.cos(s+2*Math.PI*o/4)*r)},n=function(n,r,i,s,o,u,f){if(n.image&&n.image.url&&!(f>s)){var l=n.image.url,c=n.image.h||1,h=n.image.w||1,p=n.image.scale||1,d=(n.image.clip||1,e[l]);d||(d=document.createElement("IMG"),d.setAttribute("crossOrigin",u),d.src=l,d.onload=function(){window.dispatchEvent(new Event("resize"))},e[l]=d);var v=c>h?h/c:1,m=h>c?c/h:1,g=s*p;o.save(),o.beginPath(),t(n,r,i,s,o),o.closePath(),o.clip(),o.drawImage(d,r+Math.sin(-0.7855)*g*v,i-Math.cos(-0.7855)*g*m,g*v*2*Math.sin(-0.7855)*-1,g*m*2*Math.cos(-0.7855)),o.restore()}},r=function(e,t,n,r,i,s){if(e.icon&&!(s>r)){var o=e.icon.font||"Arial",u=e.icon.color||"#F00",a=e.icon.content||"?",f=(e.icon.x||.5,e.icon.y||.5,r),l=.7;"number"==typeof e.icon.scale&&(l=Math.abs(Math.max(.01,e.icon.scale)));var c=Math.round(l*f);i.save(),i.fillStyle=u,i.font=""+c+"px "+o,i.textAlign="center",i.textBaseline="middle",i.fillText(a,t,n),i.restore()}};sigma.canvas.nodes.square=function(e,i,s,o){var u=o||{},a=s("prefix")||"",f=e[a+"size"]||1,l=e[a+"x"],h=e[a+"y"],p=s("defaultNodeColor"),v=s("imgCrossOrigin")||"anonymous",m=s("borderSize"),g=s("outerBorderSize"),y=u.color||e.color||p,w=e.active?s("nodeActiveLevel"):e.level;if(w)switch(i.shadowOffsetX=0,w){case 1:i.shadowOffsetY=1.5,i.shadowBlur=4,i.shadowColor="rgba(0,0,0,0.36)";break;case 2:i.shadowOffsetY=3,i.shadowBlur=12,i.shadowColor="rgba(0,0,0,0.39)";break;case 3:i.shadowOffsetY=6,i.shadowBlur=12,i.shadowColor="rgba(0,0,0,0.42)";break;case 4:i.shadowOffsetY=10,i.shadowBlur=20,i.shadowColor="rgba(0,0,0,0.47)";break;case 5:i.shadowOffsetY=15,i.shadowBlur=24,i.shadowColor="rgba(0,0,0,0.52)"}e.active&&(y="node"===s("nodeActiveColor")?e.active_color||y:s("defaultNodeActiveColor")||y,g>0&&(i.beginPath(),i.fillStyle="node"===s("nodeOuterBorderColor")?y||p:s("defaultNodeOuterBorderColor"),t(e,l,h,f+m+g,i),i.closePath(),i.fill()),m>0&&(i.beginPath(),i.fillStyle="node"===s("nodeBorderColor")?y||p:s("defaultNodeBorderColor"),t(e,l,h,f+m,i),i.closePath(),i.fill())),i.fillStyle=y,i.beginPath(),t(e,l,h,f,i),i.closePath(),i.fill(),w&&(i.shadowOffsetY=0,i.shadowBlur=0,i.shadowColor="#000000"),e.image&&n(e,l,h,f,i,v,s("imageThreshold")),e.icon&&r(e,l,h,f,i,s("iconThreshold"))}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e={},t=function(e,t,n,r,i){var s=e.star&&e.star.numPoints||5,o=e.star&&e.star.innerRatio||.5,u=r,a=r*o,f=Math.PI/s;i.moveTo(t,n-r);for(var l=0;s>l;l++)i.lineTo(t+Math.sin(f+2*Math.PI*l/s)*a,n-Math.cos(f+2*Math.PI*l/s)*a),i.lineTo(t+Math.sin(2*Math.PI*(l+1)/s)*u,n-Math.cos(2*Math.PI*(l+1)/s)*u)},n=function(n,r,i,s,o,u,f){if(n.image&&n.image.url&&!(f>s)){var l=n.image.url,c=n.image.h||1,h=n.image.w||1,p=n.image.scale||1,d=(n.image.clip||1,e[l]);d||(d=document.createElement("IMG"),d.setAttribute("crossOrigin",u),d.src=l,d.onload=function(){window.dispatchEvent(new Event("resize"))},e[l]=d);var v=c>h?h/c:1,m=h>c?c/h:1,g=s*p;o.save(),o.beginPath(),t(n,r,i,s,o),o.closePath(),o.clip(),o.drawImage(d,r+Math.sin(-0.7855)*g*v,i-Math.cos(-0.7855)*g*m,g*v*2*Math.sin(-0.7855)*-1,g*m*2*Math.cos(-0.7855)),o.restore()}},r=function(e,t,n,r,i,s){if(e.icon&&!(s>r)){var o=e.icon.font||"Arial",u=e.icon.color||"#F00",a=e.icon.content||"?",f=(e.icon.x||.5,e.icon.y||.5,r),l=.7;"number"==typeof e.icon.scale&&(l=Math.abs(Math.max(.01,e.icon.scale)));var c=Math.round(l*f);i.save(),i.fillStyle=u,i.font=""+c+"px "+o,i.textAlign="center",i.textBaseline="middle",i.fillText(a,t,n),i.restore()}};sigma.canvas.nodes.star=function(e,i,s,o){var u=o||{},a=s("prefix")||"",f=e[a+"size"]||1,l=e[a+"x"],h=e[a+"y"],p=s("defaultNodeColor"),v=s("imgCrossOrigin")||"anonymous",m=s("borderSize"),g=s("outerBorderSize"),y=u.color||e.color||p,w=e.active?s("nodeActiveLevel"):e.level;if(w)switch(i.shadowOffsetX=0,w){case 1:i.shadowOffsetY=1.5,i.shadowBlur=4,i.shadowColor="rgba(0,0,0,0.36)";break;case 2:i.shadowOffsetY=3,i.shadowBlur=12,i.shadowColor="rgba(0,0,0,0.39)";break;case 3:i.shadowOffsetY=6,i.shadowBlur=12,i.shadowColor="rgba(0,0,0,0.42)";break;case 4:i.shadowOffsetY=10,i.shadowBlur=20,i.shadowColor="rgba(0,0,0,0.47)";break;case 5:i.shadowOffsetY=15,i.shadowBlur=24,i.shadowColor="rgba(0,0,0,0.52)"}e.active&&(y="node"===s("nodeActiveColor")?e.active_color||y:s("defaultNodeActiveColor")||y,g>0&&(i.beginPath(),i.fillStyle="node"===s("nodeOuterBorderColor")?y||p:s("defaultNodeOuterBorderColor"),t(e,l,h,f+m+2*g,i),i.closePath(),i.fill()),m>0&&(i.beginPath(),i.fillStyle="node"===s("nodeBorderColor")?y||p:s("defaultNodeBorderColor"),t(e,l,h,f+m,i),i.closePath(),i.fill())),i.fillStyle=y,i.beginPath(),t(e,l,h,f,i),i.closePath(),i.fill(),w&&(i.shadowOffsetY=0,i.shadowBlur=0,i.shadowColor="#000000"),e.image&&n(e,l,h,f,i,v,s("imageThreshold")),e.icon&&r(e,l,h,f,i,s("iconThreshold"))}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var t={defaultLabelActiveColor:"#000",activeFont:"",activeFontStyle:"",labelActiveColor:"default",nodeActiveColor:"node",defaultNodeActiveColor:"rgb(236, 81, 72)",edgeActiveColor:"edge",defaultEdgeActiveColor:"rgb(236, 81, 72)",nodeBorderColor:"node,",nodeOuterBorderColor:"",outerBorderSize:0,defaultNodeOuterBorderColor:"#000",nodeActiveLevel:0,nodeHoverLevel:0,edgeActiveLevel:0,edgeHoverLevel:0,iconThreshold:8,imageThreshold:8,imgCrossOrigin:"anonymous"};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,n,r,i,s,o){var u=(e[s+"size"]||1)/2,a=t[s+"x"],f=t[s+"y"],l=n[s+"x"],c=n[s+"y"],h=n[s+"size"],p=e.active?e.active_color||o("defaultEdgeActiveColor"):e.color;if(!p)switch(o("edgeColor")){case"source":p=t.color||o("defaultNodeColor");break;case"target":p=n.color||o("defaultNodeColor");break;default:p=o("defaultEdgeColor")}e.active&&(p="edge"===o("edgeActiveColor")?p||defaultEdgeColor:o("defaultEdgeActiveColor")),p=sigma.utils.floatColor(p),r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=h,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=h,r[i++]=0,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=h,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=-1,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=h,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=1,r[i++]=p},render:function(e,t,n,r){var i,s=e.getAttribLocation(t,"a_pos1"),o=e.getAttribLocation(t,"a_pos2"),u=e.getAttribLocation(t,"a_thickness"),a=e.getAttribLocation(t,"a_tSize"),f=e.getAttribLocation(t,"a_delay"),l=e.getAttribLocation(t,"a_minus"),c=e.getAttribLocation(t,"a_head"),h=e.getAttribLocation(t,"a_headPosition"),p=e.getAttribLocation(t,"a_color"),d=e.getUniformLocation(t,"u_resolution"),v=e.getUniformLocation(t,"u_matrix"),m=e.getUniformLocation(t,"u_matrixHalfPi"),g=e.getUniformLocation(t,"u_matrixHalfPiMinus"),y=e.getUniformLocation(t,"u_ratio"),b=e.getUniformLocation(t,"u_nodeRatio"),w=e.getUniformLocation(t,"u_arrowHead"),E=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.uniform2f(d,r.width,r.height),e.uniform1f(y,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),e.uniform1f(b,Math.pow(r.ratio,r.settings("nodesPowRatio"))/r.ratio),e.uniform1f(w,5),e.uniform1f(E,r.scalingRatio),e.uniformMatrix3fv(v,!1,r.matrix),e.uniformMatrix2fv(m,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(g,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(s),e.enableVertexAttribArray(o),e.enableVertexAttribArray(u),e.enableVertexAttribArray(a),e.enableVertexAttribArray(f),e.enableVertexAttribArray(l),e.enableVertexAttribArray(c),e.enableVertexAttribArray(h),e.enableVertexAttribArray(p),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(p,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,n,r,i,s,o){var u=(e[s+"size"]||1)/2,a=t[s+"x"],f=t[s+"y"],l=n[s+"x"],c=n[s+"y"],h=e.active?e.active_color||o("defaultEdgeActiveColor"):e.color;if(!h)switch(o("edgeColor")){case"source":h=t.color||o("defaultNodeColor");break;case"target":h=n.color||o("defaultNodeColor");break;default:h=o("defaultEdgeColor")}e.active&&(h="edge"===o("edgeActiveColor")?h||defaultEdgeColor:o("defaultEdgeActiveColor")),h=sigma.utils.floatColor(h),r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=0,r[i++]=h,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=1,r[i++]=h,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=0,r[i++]=h,r[i++]=l,r[i++]=c,r[i++]=a,r[i++]=f,r[i++]=u,r[i++]=0,r[i++]=h,r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=1,r[i++]=h,r[i++]=a,r[i++]=f,r[i++]=l,r[i++]=c,r[i++]=u,r[i++]=0,r[i++]=h},render:function(e,t,n,r){var i,s=e.getAttribLocation(t,"a_color"),o=e.getAttribLocation(t,"a_position1"),u=e.getAttribLocation(t,"a_position2"),a=e.getAttribLocation(t,"a_thickness"),f=e.getAttribLocation(t,"a_minus"),l=e.getUniformLocation(t,"u_resolution"),c=e.getUniformLocation(t,"u_matrix"),h=e.getUniformLocation(t,"u_matrixHalfPi"),p=e.getUniformLocation(t,"u_matrixHalfPiMinus"),d=e.getUniformLocation(t,"u_ratio"),v=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.uniform2f(l,r.width,r.height),e.uniform1f(d,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),e.uniform1f(v,r.scalingRatio),e.uniformMatrix3fv(c,!1,r.matrix),e.uniformMatrix2fv(h,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(p,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(s),e.enableVertexAttribArray(o),e.enableVertexAttribArray(u),e.enableVertexAttribArray(a),e.enableVertexAttribArray(f),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(u,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,n,r,i,s,o){var u=((e[s+"size"]||1)/2,t[s+"x"]),a=t[s+"y"],f=n[s+"x"],l=n[s+"y"],c=e.active?e.active_color||o("defaultEdgeActiveColor"):e.color;if(!c)switch(o("edgeColor")){case"source":c=t.color||o("defaultNodeColor");break;case"target":c=n.color||o("defaultNodeColor");break;default:c=o("defaultEdgeColor")}e.active&&(c="edge"===o("edgeActiveColor")?c||defaultEdgeColor:o("defaultEdgeActiveColor")),c=sigma.utils.floatColor(c),r[i++]=u,r[i++]=a,r[i++]=c,r[i++]=f,r[i++]=l,r[i++]=c},render:function(e,t,n,r){var i,s=e.getAttribLocation(t,"a_color"),o=e.getAttribLocation(t,"a_position"),u=e.getUniformLocation(t,"u_resolution"),a=e.getUniformLocation(t,"u_matrix");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(u,r.width,r.height),e.uniformMatrix3fv(a,!1,r.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(s),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:12,addNode:function(e,t,n,r,i){var s=this,o=e.color||i("defaultNodeColor"),u=i("imgCrossOrigin")||"anonymous";e.active&&(o="node"===i("nodeActiveColor")?e.active_color||o:i("defaultNodeActiveColor")||o);var a=sigma.utils.floatColor(o||i("defaultNodeColor"));"undefined"==typeof s.spriteSheet&&s.createSpriteSheet(i);var f=-1,l=.7,c=999,h=1,p=1,d=1,v=0;switch(e.type||"circle"){case"circle":case"disc":case"disk":d=1,c=999,l=1;break;case"square":d=0,c=4,l=.7,"undefined"!=typeof e.square&&"number"==typeof e.square.rotate&&(v=e.square.rotate);break;case"diamond":d=0,c=4,l=.7,v=45*Math.PI/180,"undefined"!=typeof e.diamond&&"number"==typeof e.diamond.rotate&&(v=e.diamond.rotate);break;case"triangle":d=0,c=3,l=.5,v=Math.PI,"undefined"!=typeof e.triangle&&"number"==typeof e.triangle.rotate&&(v=e.triangle.rotate);break;case"star":d=1,l=.7,c=5,"undefined"!=typeof e.star&&("number"==typeof e.star.numPoints&&(c=e.star.numPoints),"number"==typeof e.star.rotate&&(v=e.star.rotate));break;case"seastar":d=2,l=.5,c=5,"undefined"!=typeof e.seastar&&("number"==typeof e.seastar.numPoints&&(c=e.seastar.numPoints),"number"==typeof e.seastar.rotate&&(v=e.seastar.rotate));break;case"equilateral":d=0,c=7,l=.7,v=0,"undefined"!=typeof e.equilateral&&("number"==typeof e.equilateral.numPoints&&(c=e.equilateral.numPoints),"number"==typeof e.equilateral.rotate&&(v=e.equilateral.rotate));break;case"hexagon":d=0,c=6,l=.7,"undefined"!=typeof e.hexagon&&"number"==typeof e.hexagon.rotate&&(v=e.hexagon.rotate);break;case"polygon":d=1,c=5,l=.5,v=0,"undefined"!=typeof e.polygon&&("string"==typeof e.polygon.type&&(d="convex"==e.polygon.type?1:0),"number"==typeof e.polygon.angles&&(c=Math.round(Math.max(3,Math.min(8,e.polygon.angles)))),"number"==typeof e.polygon.scale&&(l=e.polygon.scale||(d?.5:.7)),"number"==typeof e.polygon.rotate&&(v=e.polygon.rotate));break;case"cross":d=0,c=9,l=.1,"undefined"!=typeof e.cross&&("number"==typeof e.cross.lineWeight&&(l=Math.max(.1,Math.min(.5,.1*e.cross.lineWeight))),"number"==typeof e.rotate&&(v=e.cross.rotate))}if("undefined"!=typeof e.image){var m=e.image.url||"";m.length>0&&(f=s.getImage(m,u),h=e.image.w||1,p=e.image.h||1)}if("undefined"!=typeof e.icon){var g="Arial";"string"==typeof e.icon.font&&(g=e.icon.font);var y="";"string"==typeof e.icon.content&&(y=e.icon.content);var b=.7;"number"==typeof e.icon.scale&&(b=.5*Math.abs(Math.max(.01,e.icon.scale)));var w=e.icon.color||o,E=e.color||o,S=.5,x=.5;"number"==typeof e.icon.x&&(S=e.icon.x),"number"==typeof e.icon.y&&(x=e.icon.y),f=s.getText(g,E,w,b,S,x,y)}t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"],t[n++]=a,t[n++]=0,t[n++]=d,t[n++]=c,t[n++]=l,t[n++]=v,t[n++]=f,t[n++]=h,t[n++]=p,t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"],t[n++]=a,t[n++]=2*Math.PI/3,t[n++]=d,t[n++]=c,t[n++]=l,t[n++]=v,t[n++]=f,t[n++]=h,t[n++]=p,t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"],t[n++]=a,t[n++]=4*Math.PI/3,t[n++]=d,t[n++]=c,t[n++]=l,t[n++]=v,t[n++]=f,t[n++]=h,t[n++]=p},render:function(e,t,n,r){var i,s=this;arguments,"undefined"==typeof s.spriteSheet&&s.createSpriteSheet();var o=e.getAttribLocation(t,"a_position"),u=e.getAttribLocation(t,"a_size"),a=e.getAttribLocation(t,"a_color"),f=e.getAttribLocation(t,"a_angle"),l=e.getAttribLocation(t,"a_image"),c=e.getAttribLocation(t,"a_shape"),h=e.getUniformLocation(t,"u_resolution"),p=e.getUniformLocation(t,"u_matrix"),d=e.getUniformLocation(t,"u_ratio"),v=e.getUniformLocation(t,"u_scale"),m=e.getUniformLocation(t,"u_sprite_dim"),g=e.getUniformLocation(t,"u_texture_dim");e.getUniformLocation(t,"u_sampler"),i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(h,r.width,r.height),e.uniform1f(d,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),e.uniform1f(v,r.scalingRatio),e.uniformMatrix3fv(p,!1,r.matrix),e.uniform2f(m,s.spriteSheet.spriteWidth,s.spriteSheet.spriteHeight),e.uniform2f(g,s.spriteSheet.maxWidth,s.spriteSheet.maxHeight),e.enableVertexAttribArray(o),e.enableVertexAttribArray(u),e.enableVertexAttribArray(a),e.enableVertexAttribArray(f),e.enableVertexAttribArray(c),e.enableVertexAttribArray(l),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(c,4,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(l,3,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),"undefined"==typeof s.texture&&(s.texture=e.createTexture(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s.spriteSheet.canvas),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.generateMipmap(e.TEXTURE_2D)),"undefined"!=typeof s.texture&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s.texture),s.updateNeeded&&(s.updateNeeded=!1,e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s.spriteSheet.canvas)),e.uniform1i(e.getUniformLocation(t,"u_sampler"),0)),e.drawArrays(e.TRIANGLES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","attribute vec4 a_shape;","attribute vec3 a_image;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform vec2 u_sprite_dim;","uniform vec2 u_texture_dim;","varying vec4 shape;","varying highp vec4 v_sprite;","varying vec4 color;","varying vec2 center;","varying float radius;","varying vec3 image;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","shape = a_shape;","image = a_image;","highp vec2 sp = ","vec2(mod((a_image.s * u_sprite_dim.x), u_texture_dim.x),","floor((a_image.s * u_sprite_dim.x) / u_texture_dim.y) * u_sprite_dim.y);","sp = vec2(sp.x + (u_sprite_dim.x * 0.5),"," sp.y + (u_sprite_dim.y * 0.5));","v_sprite = vec4(","sp.x / u_texture_dim.x,","sp.y / u_texture_dim.y,","u_sprite_dim.x / u_texture_dim.x,","- u_sprite_dim.y / u_texture_dim.y",");","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["#ifdef GL_ES","precision mediump float;","#endif","#define PI_2 6.283185307179586","#define MAX_ANGLES 8","varying vec4 shape;","varying highp vec4 v_sprite;","varying vec4 color;","varying vec2 center;","varying float radius;","varying vec3 image;","uniform sampler2D u_sampler;","void main(void) {","int angles = int(shape.t);","int convex = int(shape.s);","vec2 m = gl_FragCoord.xy - center;","vec2 p = m.xy/radius;","float theta = atan(p.y,p.x);","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec4 color1 = (image.s >= 0.0) ?"," texture2D(u_sampler, ","vec2(","(v_sprite.s + v_sprite.p * p.x * 0.5 * image.t),","(v_sprite.t + v_sprite.q * p.y * 0.5 * image.p)","))"," : color",";","mat2 shapeRot = mat2(cos(shape.q),sin(shape.q),-sin(shape.q),cos(shape.q));","p = p * shapeRot;","if (angles > 9) {","gl_FragColor = ","((radius - sqrt(m.x * m.x + m.y * m.y)) > 0.0)","? color1 : color0;","} else if (angles > 8){","gl_FragColor = (","(abs(p.x) > 0.0 && abs(p.x) < (1.0 - sin(shape.p)) && abs(p.y) < shape.p)","|| (abs(p.y) > 0.0 && abs(p.y) < (1.0 - sin(shape.p)) && abs(p.x) < shape.p)",") ? color1 : color0;","} else {","float scale = (convex > 0) ? shape.p * 0.5 : shape.p;","float angle = PI_2 / shape.t;","mat2 t = mat2(cos(angle),sin(angle),-sin(angle),cos(angle));","int q = 0;","for (int i=0;i<MAX_ANGLES;i++) {","if (i >= angles) break;","if (p.y < scale) q++;","p *= t;","}","gl_FragColor =","((convex > 0)","? (q > angles - (angles - 1) / 2)",": (q > angles - 1))","? color1 : color0;","}","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,n])},createSpriteSheet:function(e){var t=this,n={maxWidth:e("spriteSheetResolution")||2048,maxHeight:e("spriteSheetResolution")||2048,maxSprites:e("spriteSheetMaxSprites")||256},r=n.maxWidth/Math.sqrt(n.maxSprites),i=n.maxHeight/Math.sqrt(n.maxSprites),s=document.createElement("canvas");s.width=n.maxWidth,s.height=n.maxHeight,s.getContext("2d"),t.spriteSheet={canvas:s,maxWidth:n.maxWidth,maxHeight:n.maxHeight,maxSprites:n.maxSprite,spriteWidth:r,spriteHeight:i,currentIndex:1,urlToIndex:{}}},getText:function(e,t,n,r,i,s,o){var u=this,a=Math.round(r*u.spriteSheet.spriteHeight),f=i*u.spriteSheet.spriteWidth,l=s*u.spriteSheet.spriteHeight,c=e+":"+t+":"+n+":"+a+":"+o+":"+f+":"+l;if(c in u.spriteSheet.urlToIndex)return u.spriteSheet.urlToIndex[c];var h=u.spriteSheet.currentIndex;u.spriteSheet.currentIndex+=1,u.spriteSheet.urlToIndex[c]=h;var p=h*u.spriteSheet.spriteWidth%u.spriteSheet.maxWidth,d=Math.floor(h*u.spriteSheet.spriteWidth/u.spriteSheet.maxWidth)*u.spriteSheet.spriteHeight,v=u.spriteSheet.canvas.getContext("2d");return v.beginPath(),v.rect(p,d,u.spriteSheet.spriteWidth,u.spriteSheet.spriteHeight),v.fillStyle=t,v.fill(),v.beginPath(),v.fillStyle=n,v.font=""+a+"px "+e,v.textAlign="center",v.textBaseline="middle",v.fillText(o,p+f,d+l),u.updateNeeded=!0,h},getImage:function(e,t){var n=this,r=n.spriteSheet.canvas.getContext("2d");if(e.length<1)return-1;if(e in n.spriteSheet.urlToIndex)return n.spriteSheet.urlToIndex[e];var i=n.spriteSheet.currentIndex;if(i>n.spriteSheet.maxSprites)return-1;n.spriteSheet.currentIndex+=1,n.spriteSheet.urlToIndex[e]=i;var s=new Image;return s.setAttribute("crossOrigin",t),s.onload=function(){var e=i*n.spriteSheet.spriteWidth%n.spriteSheet.maxWidth,t=Math.floor(i*n.spriteSheet.spriteWidth/n.spriteSheet.maxWidth)*n.spriteSheet.spriteHeight;r.drawImage(s,0,0,s.width,s.height,e,t,n.spriteSheet.spriteWidth,n.spriteSheet.spriteHeight),n.updateNeeded=!0},s.src=e,i}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,n,r,i){var s=e.color||i("defaultNodeColor");e.active&&(s="node"===i("nodeActiveColor")?e.active_color||s:i("defaultNodeActiveColor")||s),s=sigma.utils.floatColor(s||i("defaultNodeColor")),t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"]||1,t[n++]=sigma.utils.floatColor(s||i("defaultNodeColor"))},render:function(e,t,n,r){var i,s=e.getAttribLocation(t,"a_position"),o=e.getAttribLocation(t,"a_size"),u=e.getAttribLocation(t,"a_color"),a=e.getUniformLocation(t,"u_resolution"),f=e.getUniformLocation(t,"u_matrix"),l=e.getUniformLocation(t,"u_ratio"),c=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(a,r.width,r.height),e.uniform1f(l,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),e.uniform1f(c,r.scalingRatio),e.uniformMatrix3fv(f,!1,r.matrix),e.enableVertexAttribArray(s),e.enableVertexAttribArray(o),e.enableVertexAttribArray(u),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,n])}}}();